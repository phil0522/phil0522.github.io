import{a as A}from"./chunk-KDSIGYEI.js";import{N as P,O as M,S as O}from"./chunk-BW7VNIXC.js";import"./chunk-UYHN5VVP.js";import{d as S,h as k,j as h}from"./chunk-HUY72U33.js";import{Ea as l,N as v,Pa as b,S as m,T as g,Za as p,_a as u,da as y,db as _,eb as t,fb as i,gb as s,kb as x,mb as C,ob as d,wb as f,yb as o}from"./chunk-AFX6RXNX.js";import"./chunk-Q7L6LLAK.js";function F(n,r){n&1&&(t(0,"div",10),s(1,"div",16),t(2,"span"),o(3,"Loading..."),i()())}function T(n,r){if(n&1&&s(0,"app-markdown-renderer",11),n&2){let e=d(2);_("content",e.releaseAgreementContent())}}function V(n,r){n&1&&(t(0,"div",12)(1,"p"),o(2,"No liability release content has been configured."),i(),t(3,"p",17),o(4,"Please contact the administrator."),i()())}function I(n,r){if(n&1){let e=x();t(0,"div",6)(1,"div",7)(2,"h1"),o(3,"Stage 1: Liability Release"),i(),t(4,"p",8),o(5,"Legal Acknowledgement Required"),i()(),t(6,"div",9),p(7,F,4,0,"div",10)(8,T,1,1,"app-markdown-renderer",11)(9,V,5,0,"div",12),i(),t(10,"div",13)(11,"button",14),C("click",function(){m(e);let c=d();return g(c.goBack())}),o(12,"Go Back"),i(),t(13,"button",15),C("click",function(){m(e);let c=d();return g(c.nextStage())}),o(14," Continue "),i()()()}if(n&2){let e=d();l(7),u(e.configService.loading()?7:e.releaseAgreementContent()?8:9),l(6),_("disabled",!e.releaseAgreementContent())}}function z(n,r){n&1&&(t(0,"div",10),s(1,"div",16),t(2,"span"),o(3,"Loading..."),i()())}function R(n,r){if(n&1&&s(0,"app-markdown-renderer",11),n&2){let e=d(2);_("content",e.returnInstructionsContent())}}function N(n,r){n&1&&(t(0,"div",12)(1,"p"),o(2,"No financial terms content has been configured."),i(),t(3,"p",17),o(4,"Please contact the administrator."),i()())}function B(n,r){if(n&1){let e=x();t(0,"div",6)(1,"div",7)(2,"h1"),o(3,"Stage 2: Financial Terms"),i(),t(4,"p",8),o(5,"Strict Refund Policy Agreement"),i()(),t(6,"div",9),p(7,z,4,0,"div",10)(8,R,1,1,"app-markdown-renderer",11)(9,N,5,0,"div",12),i(),t(10,"div",13)(11,"button",14),C("click",function(){m(e);let c=d();return g(c.previousStage())}),o(12,"Back"),i(),t(13,"button",15),C("click",function(){m(e);let c=d();return g(c.nextStage())}),o(14," Continue "),i()()()}if(n&2){let e=d();l(7),u(e.configService.loading()?7:e.returnInstructionsContent()?8:9),l(6),_("disabled",!e.returnInstructionsContent())}}function L(n,r){n&1&&(t(0,"div",10),s(1,"div",16),t(2,"span"),o(3,"Loading..."),i()())}function j(n,r){if(n&1&&s(0,"app-markdown-renderer",11),n&2){let e=d(2);_("content",e.mediaPolicyContent())}}function D(n,r){n&1&&(t(0,"div",12)(1,"p"),o(2,"No media policy content has been configured."),i(),t(3,"p",17),o(4,"Please contact the administrator."),i()())}function q(n,r){if(n&1){let e=x();t(0,"div",6)(1,"div",7)(2,"h1"),o(3,"Stage 3: Media Policy"),i(),t(4,"p",8),o(5,"Photo & Video Consent"),i()(),t(6,"div",9),p(7,L,4,0,"div",10)(8,j,1,1,"app-markdown-renderer",11)(9,D,5,0,"div",12),i(),t(10,"div",13)(11,"button",14),C("click",function(){m(e);let c=d();return g(c.previousStage())}),o(12,"Back"),i(),t(13,"button",18),C("click",function(){m(e);let c=d();return g(c.completeAcknowledgement())}),o(14," I Fully Agree & Consent "),i()()()}if(n&2){let e=d();l(7),u(e.configService.loading()?7:e.mediaPolicyContent()?8:9),l(6),_("disabled",!e.mediaPolicyContent())}}var E=class n{configService=v(P);seasonService=v(M);acknowledgementService=v(O);router=v(h);route=v(k);currentStage=y(1);ngOnInit(){this.configService.isSystemInitialized()||this.configService.fetchConfig()}releaseAgreementContent(){return this.configService.releaseAgreementContent()?.content??""}returnInstructionsContent(){return this.configService.returnInstructions()?.content??""}mediaPolicyContent(){return this.configService.mediaPolicyContent()?.content??""}nextStage(){this.currentStage()<3&&this.currentStage.update(r=>r+1)}previousStage(){this.currentStage()>1&&this.currentStage.update(r=>r-1)}goBack(){this.router.navigate(["/"])}completeAcknowledgement(){let r=this.seasonService.selectedSeason();if(!r){console.error("No season selected"),this.router.navigate(["/"]);return}this.acknowledgementService.saveAcknowledgement(r.id);let e=this.route.snapshot.queryParamMap.get("students"),a=e?e.split(",").map(w=>w.trim()).filter(w=>w.length>0):[];a.length>0&&this.acknowledgementService.saveReservationAcknowledgementForStudents(r.id,a);let c=this.route.snapshot.queryParamMap.get("redirect");if(c&&c.startsWith("/")){this.router.navigateByUrl(c);return}this.router.navigate(["/ledger"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-acknowledgement-flow"]],decls:22,vars:17,consts:[[1,"acknowledgement-flow"],[1,"progress-indicator"],[1,"step"],[1,"step-number"],[1,"step-label"],[1,"step-connector"],[1,"stage-content"],[1,"stage-header"],[1,"subtitle"],[1,"content-card"],[1,"loading"],[3,"content"],[1,"empty-content"],[1,"stage-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"spinner"],[1,"note"],[1,"btn-primary","btn-confirm",3,"click","disabled"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),o(4,"1"),i(),t(5,"span",4),o(6,"Liability Release"),i()(),s(7,"div",5),t(8,"div",2)(9,"span",3),o(10,"2"),i(),t(11,"span",4),o(12,"Financial Terms"),i()(),s(13,"div",5),t(14,"div",2)(15,"span",3),o(16,"3"),i(),t(17,"span",4),o(18,"Media Policy"),i()()(),p(19,I,15,2,"div",6),p(20,B,15,2,"div",6),p(21,q,15,2,"div",6),i()),e&2&&(l(2),f("active",a.currentStage()===1)("completed",a.currentStage()>1),l(5),f("completed",a.currentStage()>1),l(),f("active",a.currentStage()===2)("completed",a.currentStage()>2),l(5),f("completed",a.currentStage()>2),l(),f("active",a.currentStage()===3),l(5),u(a.currentStage()===1?19:-1),l(),u(a.currentStage()===2?20:-1),l(),u(a.currentStage()===3?21:-1))},dependencies:[S,A],styles:[".acknowledgement-flow[_ngcontent-%COMP%]{min-height:100vh;background:var(--sys-surface, #fafafa);padding:2rem 1rem}.progress-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:2rem;padding:0 2rem}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--sys-outline, #e0e0e0);color:var(--sys-on-surface-variant, #666);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;transition:all .3s ease}.step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:var(--sys-primary, #c62828);color:#fff;box-shadow:0 2px 8px #c628284d}.step.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:var(--sys-tertiary, #2e7d32);color:#fff}.step-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #666);white-space:nowrap}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);font-weight:600}.step-connector[_ngcontent-%COMP%]{width:80px;height:3px;background:var(--sys-outline, #e0e0e0);margin:0 1rem 1.5rem;transition:background .3s ease}.step-connector.completed[_ngcontent-%COMP%]{background:var(--sys-tertiary, #2e7d32)}.stage-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.stage-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.stage-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.75rem;color:var(--sys-on-surface, #212121)}.stage-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--sys-on-surface-variant, #666);font-size:1rem}.content-card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:16px;padding:2rem;margin-bottom:1.5rem;max-height:60vh;overflow-y:auto;box-shadow:0 2px 8px #0000000d}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:2rem;color:var(--sys-on-surface-variant, #666)}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid var(--sys-outline, #e0e0e0);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--sys-on-surface-variant, #666)}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.empty-content[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #999)}.stage-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.btn-primary[_ngcontent-%COMP%]{background:var(--sys-primary, #c62828);color:#fff;flex:1}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-primary-dark, #a51c1c);box-shadow:0 4px 12px #c628284d}.btn-primary[_ngcontent-%COMP%]:disabled{background:var(--sys-outline, #e0e0e0);color:var(--sys-on-surface-variant, #999);cursor:not-allowed}.btn-primary.btn-confirm[_ngcontent-%COMP%]{background:var(--sys-tertiary, #2e7d32)}.btn-primary.btn-confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#1b5e20;box-shadow:0 4px 12px #2e7d324d}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:var(--sys-on-surface-variant, #666);border:1px solid var(--sys-outline, #e0e0e0)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--sys-surface-variant, #f5f5f5)}@media(max-width:600px){.acknowledgement-flow[_ngcontent-%COMP%]{padding:1rem}.progress-indicator[_ngcontent-%COMP%]{padding:0}.step-connector[_ngcontent-%COMP%]{width:40px}.step-label[_ngcontent-%COMP%]{font-size:.75rem}.content-card[_ngcontent-%COMP%]{padding:1rem;max-height:50vh}.stage-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}"]})};export{E as AcknowledgementFlowComponent};
