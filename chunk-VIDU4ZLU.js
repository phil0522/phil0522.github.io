import{a as re}from"./chunk-KZ27A6Z5.js";import{b as te,c as ne,f as oe,q as ie}from"./chunk-V2VFN32H.js";import{c as Y,d as ee}from"./chunk-RYIKU5Y3.js";import{h as E,v as K,w as Q,x as X}from"./chunk-VLJ2ITPR.js";import{F as J}from"./chunk-UYHN5VVP.js";import{$a as l,Ba as A,Bb as O,Cb as B,Db as r,Ea as o,Eb as y,Fb as u,Gb as H,Jb as q,Kb as W,Lb as Z,N as R,Qa as I,S as g,T as _,Tb as k,U as L,Vb as v,Wb as p,ab as m,da as D,db as M,ea as U,eb as w,fb as S,gb as a,hb as i,ib as P,jb as f,kb as C,lb as V,ob as h,pb as $,qb as x,rb as N,sb as c}from"./chunk-5O64VQN5.js";function ae(t){return{returning_family:"family_restroom",returning_student:"school",sibling:"groups",multi_session:"event",coupon:"confirmation_number",manual:"edit",early_bird:"celebration",referral:"handshake"}[t]??"savings"}var de=(t,n)=>n.id,le=(t,n)=>n.key,me=(t,n)=>n.status;function pe(t,n){if(t&1){let e=h();a(0,"div",1)(1,"h3"),r(2,"Admin Actions"),i(),a(3,"div",5)(4,"button",6),x("click",function(){g(e);let s=c();return _(s.recordPaymentClick.emit())}),r(5," Record Payment "),i(),a(6,"button",7),x("click",function(){g(e);let s=c();return _(s.addAdjustmentClick.emit())}),r(7," Add Credit/Fee "),i()()()}}function ue(t,n){if(t&1){let e=h();a(0,"div",2)(1,"h3"),r(2,"Payment Options"),i(),a(3,"div",8)(4,"label",9),x("click",function(){g(e);let s=c();return _(s.selectOption("zelle"))}),P(5,"input",10),a(6,"div",11)(7,"span",12),r(8,"Zelle"),i()()()()()}}function ge(t,n){t&1&&P(0,"span",16)}function _e(t,n){t&1&&r(0," Add ")}function Ce(t,n){if(t&1&&(a(0,"div",17),r(1),i()),t&2){let e=c(2);o(),y(e.couponError())}}function fe(t,n){if(t&1&&(a(0,"div",18),r(1),i()),t&2){let e=c(2);o(),y(e.couponSuccess())}}function be(t,n){t&1&&(a(0,"div",19),r(1,"Loading coupons..."),i())}function xe(t,n){if(t&1&&(a(0,"div",23)(1,"div",25)(2,"span",26),r(3),i(),a(4,"span",27),r(5,"Auto-applied"),i()(),a(6,"span",28),r(7),i()()),t&2){let e=n.$implicit,d=c(4);o(3),y(e.name),o(4),u("$",d.formatPrice(e.maxCreditCents))}}function ve(t,n){t&1&&(a(0,"span",27),r(1,"Per student"),i())}function he(t,n){if(t&1){let e=h();a(0,"label",29)(1,"input",30),x("change",function(){let s=g(e).$implicit,b=c(4);return _(b.toggleCouponClick.emit(s.id))}),i(),a(2,"div",25)(3,"span",26),r(4),i(),l(5,ve,2,0,"span",27),i(),a(6,"span",28),r(7),i()()}if(t&2){let e=n.$implicit,d=c(4);O("selected",d.isCouponSelected(e.id)),o(),S("checked",d.isCouponSelected(e.id)),o(3),y(e.name),o(),m(e.coupon_type==="student_credit"?5:-1),o(2),u("$",d.formatPrice(e.maxCreditCents))}}function ye(t,n){if(t&1&&(a(0,"div",21),M(1,xe,8,2,"div",23,de),M(3,he,8,6,"label",24,de),i()),t&2){let e=c(3);o(),w(e.seasonCoupons()),o(2),w(e.userCoupons())}}function Se(t,n){t&1&&(a(0,"div",22),r(1,"No coupons available yet."),i())}function Pe(t,n){if(t&1&&l(0,ye,5,0,"div",21)(1,Se,2,0,"div",22),t&2){let e=c(2);m(e.seasonCoupons().length>0||e.userCoupons().length>0?0:1)}}function Me(t,n){if(t&1&&(a(0,"div",20)(1,"span"),r(2,"Total Coupon Credit"),i(),a(3,"strong"),r(4),i()()),t&2){let e=c(2);o(4),u("$",e.formatPrice(e.totalCouponCredit()))}}function we(t,n){if(t&1){let e=h();a(0,"div",3)(1,"h3"),r(2,"Coupons & Credits"),i(),a(3,"div",13)(4,"input",14),Z("ngModelChange",function(s){g(e);let b=c();return W(b.couponCode,s)||(b.couponCode=s),_(s)}),x("keydown.enter",function(){g(e);let s=c();return _(s.onAddCoupon())}),i(),a(5,"button",15),x("click",function(){g(e);let s=c();return _(s.onAddCoupon())}),l(6,ge,1,0,"span",16)(7,_e,1,0),i()(),l(8,Ce,2,1,"div",17),l(9,fe,2,1,"div",18),l(10,be,2,0,"div",19)(11,Pe,2,1),l(12,Me,5,1,"div",20),i()}if(t&2){let e=c();o(4),q("ngModel",e.couponCode),S("disabled",e.couponsValidating()),o(),S("disabled",!e.couponCode.trim()||e.couponsValidating()),o(),m(e.couponsValidating()?6:7),o(2),m(e.couponError()?8:-1),o(),m(e.couponSuccess()?9:-1),o(),m(e.couponsLoading()?10:11),o(2),m(e.totalCouponCredit()>0?12:-1)}}function ke(t,n){if(t&1&&(a(0,"span",35),r(1),i()),t&2){let e=c(2);o(),u("Due by ",e.paymentDueDate())}}function Oe(t,n){if(t&1&&(a(0,"div",48)(1,"span",49),r(2),i(),a(3,"span",50),r(4),i()()),t&2){let e=c().$implicit,d=c(3);B(e.status),o(2),H("",e.label," (",e.count,")"),o(2),u("$",d.formatPrice(e.total))}}function Ie(t,n){if(t&1&&l(0,Oe,5,5,"div",47),t&2){let e=n.$implicit;m(e.count>0?0:-1)}}function Ee(t,n){if(t&1&&(a(0,"div",36),M(1,Ie,1,1,null,null,me),i()),t&2){let e=c();o(),w(e.statusCounts)}}function De(t,n){if(t&1&&(a(0,"div",41)(1,"span",39)(2,"span",51),r(3),i(),r(4),i(),a(5,"span",40),r(6),i()()),t&2){let e=n.$implicit,d=c(2);o(3),y(d.getDiscountIcon(e.type)),o(),u(" ",e.label," "),o(),O("discount-value",e.amount<0)("fee-value",e.amount>0),o(),u(" ",d.formatSignedPrice(e.amount)," ")}}function Te(t,n){if(t&1&&(a(0,"div",42)(1,"span",39),r(2,"Total Paid"),i(),a(3,"span",52),r(4),i()()),t&2){let e=c(),d=c();o(4),u("-$",d.formatPrice(e.totalPaid))}}function Le(t,n){t&1&&(a(0,"div",45)(1,"span",51),r(2,"check_circle"),i(),r(3," All Items Paid "),i())}function Ve(t,n){if(t&1){let e=h();a(0,"div",46)(1,"div",53)(2,"span",54),r(3,"Due via Zelle"),i(),a(4,"span",55),r(5),i()(),a(6,"button",56),x("click",function(){g(e);let s=c(2);return _(s.onSubmit())}),r(7," Submit Now "),i()()}if(t&2){let e=c(2);o(5),u("$",e.formatPrice(e.immediatelyDue()))}}function Ne(t,n){if(t&1&&(a(0,"div",4)(1,"div",31)(2,"span",32),r(3,"Remaining Balance"),i(),a(4,"span",33),r(5),a(6,"span",34),r(7),i()(),l(8,ke,2,1,"span",35),i(),l(9,Ee,3,0,"div",36),a(10,"div",37)(11,"div",38)(12,"span",39),r(13,"Total Order Value"),i(),a(14,"span",40),r(15),i()(),M(16,De,7,7,"div",41,le),l(18,Te,5,1,"div",42),P(19,"div",43),a(20,"div",44)(21,"span",39),r(22),i(),a(23,"span",40),r(24),i()(),l(25,Le,4,0,"div",45),i(),l(26,Ve,8,1,"div",46),i()),t&2){let e=n,d=c();o(5),u(" $",d.formatWholeDollars(e.amountDue)),o(2),u(".",d.formatCents(e.amountDue)),o(),m(d.paymentDueDate()?8:-1),o(),m(e.statusCounts.length>0?9:-1),o(6),u("$",d.formatPrice(e.subtotal)),o(),w(e.discounts),o(2),m(e.totalPaid>0?18:-1),o(4),y(e.amountDue<0?"Credit Balance":"Remaining Balance"),o(),O("refund",e.amountDue<0)("paid-full",e.amountDue===0&&!d.hasLockedItems()),o(),u(" $",d.formatPrice(d.Math.abs(e.amountDue))," "),o(),m(e.amountDue===0&&e.totalPaid>0&&!d.hasLockedItems()?25:-1),o(),m(!d.isAdmin()&&d.hasLockedItems()?26:-1)}}var se=class t{isAdmin=p(!1);lockedItemsTotal=p(0);lockedSessionCount=p(0);lockedDepositAmount=p(0);lockedItemsDueNow=p(0);lockedItemsDiscount=p(0);hasLockedItems=p(!1);hasSecuredItems=p(!1);showCouponSection=p(!1);selectedOption=p("zelle");seasonCoupons=p([]);userCoupons=p([]);selectedCouponIds=p([]);couponsLoading=p(!1);couponsValidating=p(!1);couponError=p(null);couponSuccess=p(null);orderSummary=p(null);paymentDueDate=p(null);optionChange=v();submitClick=v();toggleCouponClick=v();addCouponClick=v();recordPaymentClick=v();addAdjustmentClick=v();Math=Math;getDiscountIcon=ae;couponCode="";totalCouponCredit=k(()=>{let n=this.seasonCoupons().reduce((d,s)=>d+s.maxCreditCents,0),e=this.userCoupons().filter(d=>this.selectedCouponIds().includes(d.id)).reduce((d,s)=>d+s.maxCreditCents,0);return n+e});immediatelyDue=k(()=>this.lockedItemsDueNow());formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}formatSignedPrice(n){let e=this.formatPrice(Math.abs(n));return n<0?`-$${e}`:`$${e}`}formatLargePrice(n){let e=n/100;return n%100===0?e.toLocaleString("en-US",{minimumFractionDigits:0}):e.toLocaleString("en-US",{minimumFractionDigits:2})}formatWholeDollars(n){let e=Math.abs(n);return Math.floor(e/100).toLocaleString("en-US")}formatCents(n){let e=Math.abs(n);return String(e%100).padStart(2,"0")}selectOption(n){this.optionChange.emit(n)}onSubmit(){this.submitClick.emit()}isCouponSelected(n){return this.selectedCouponIds().includes(n)}onAddCoupon(){let n=this.couponCode.trim();n&&(this.addCouponClick.emit(n),this.couponCode="")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-settlement-sidebar"]],inputs:{isAdmin:[1,"isAdmin"],lockedItemsTotal:[1,"lockedItemsTotal"],lockedSessionCount:[1,"lockedSessionCount"],lockedDepositAmount:[1,"lockedDepositAmount"],lockedItemsDueNow:[1,"lockedItemsDueNow"],lockedItemsDiscount:[1,"lockedItemsDiscount"],hasLockedItems:[1,"hasLockedItems"],hasSecuredItems:[1,"hasSecuredItems"],showCouponSection:[1,"showCouponSection"],selectedOption:[1,"selectedOption"],seasonCoupons:[1,"seasonCoupons"],userCoupons:[1,"userCoupons"],selectedCouponIds:[1,"selectedCouponIds"],couponsLoading:[1,"couponsLoading"],couponsValidating:[1,"couponsValidating"],couponError:[1,"couponError"],couponSuccess:[1,"couponSuccess"],orderSummary:[1,"orderSummary"],paymentDueDate:[1,"paymentDueDate"]},outputs:{optionChange:"optionChange",submitClick:"submitClick",toggleCouponClick:"toggleCouponClick",addCouponClick:"addCouponClick",recordPaymentClick:"recordPaymentClick",addAdjustmentClick:"addAdjustmentClick"},decls:5,vars:4,consts:[[1,"settlement-sidebar"],[1,"admin-actions-section"],[1,"payment-section"],[1,"coupon-section"],[1,"order-summary-section"],[1,"admin-buttons"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"payment-options"],[1,"payment-option","selected",3,"click"],["type","radio","name","paymentOption","value","zelle","checked",""],[1,"option-content"],[1,"option-title"],[1,"coupon-input-row"],["type","text","placeholder","Enter coupon code",1,"coupon-input",3,"ngModelChange","keydown.enter","ngModel","disabled"],["type","button",1,"btn-add-coupon",3,"click","disabled"],[1,"spinner-small"],[1,"coupon-error"],[1,"coupon-success"],[1,"coupon-loading"],[1,"coupon-total-row"],[1,"coupon-list"],[1,"coupon-empty"],[1,"coupon-item","season-coupon"],[1,"coupon-item","user-coupon",3,"selected"],[1,"coupon-main"],[1,"coupon-name"],[1,"coupon-desc"],[1,"coupon-credit"],[1,"coupon-item","user-coupon"],["type","checkbox",3,"change","checked"],[1,"balance-header"],[1,"balance-title"],[1,"balance-amount"],[1,"balance-cents"],[1,"due-date"],[1,"status-breakdown"],[1,"order-summary"],[1,"summary-row"],[1,"summary-label"],[1,"summary-value"],[1,"summary-row","discount"],[1,"summary-row","paid"],[1,"divider"],[1,"summary-row","amount-due"],[1,"paid-badge"],[1,"zelle-due-section"],[1,"status-row",3,"class"],[1,"status-row"],[1,"status-label"],[1,"status-value"],["aria-hidden","true",1,"material-symbols-rounded","icon-sm"],[1,"summary-value","paid-value"],[1,"zelle-due-row"],[1,"zelle-due-label"],[1,"zelle-due-value"],[1,"btn-submit",3,"click"]],template:function(e,d){if(e&1&&(a(0,"div",0),l(1,pe,8,0,"div",1),l(2,ue,9,0,"div",2),l(3,we,13,8,"div",3),l(4,Ne,27,14,"div",4),i()),e&2){let s;o(),m(d.isAdmin()?1:-1),o(),m(!d.isAdmin()&&d.hasLockedItems()?2:-1),o(),m(!d.isAdmin()&&d.showCouponSection()?3:-1),o(),m((s=d.orderSummary())?4:-1,s)}},dependencies:[E,ie,te,ne,oe],styles:['@charset "UTF-8";.settlement-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.payment-section[_ngcontent-%COMP%], .coupon-section[_ngcontent-%COMP%], .order-summary-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem}h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:600;color:var(--sys-on-surface, #212121)}.balance-header[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#f97316,#e11d48);color:#fff;padding:1.25rem;border-radius:12px;margin-bottom:1rem;text-align:left;border:none}.balance-title[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.25rem;color:#fff7ed}.balance-amount[_ngcontent-%COMP%]{display:block;font-size:2.25rem;font-weight:700;margin-bottom:.25rem;color:#fff}.balance-cents[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;vertical-align:super}.due-date[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#ffedd5}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.25rem}.coupon-input-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.coupon-input[_ngcontent-%COMP%]{flex:1;padding:.625rem .75rem;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;font-size:.875rem}.coupon-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--sys-primary, #c62828)}.btn-add-coupon[_ngcontent-%COMP%]{min-width:64px;border:none;border-radius:8px;background:var(--sys-primary, #c62828);color:#fff;font-weight:600;padding:.625rem .75rem;cursor:pointer}.btn-add-coupon[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.35);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}.coupon-error[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem .625rem;border-radius:8px;background:var(--sys-error-container, #ffebee);color:var(--sys-error, #c62828);font-size:.8125rem}.coupon-success[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem .625rem;border-radius:8px;background:var(--sys-secondary-container, #e8f5e9);color:var(--sys-secondary, #2e7d32);font-size:.8125rem}.coupon-loading[_ngcontent-%COMP%], .coupon-empty[_ngcontent-%COMP%]{margin-top:.75rem;color:var(--sys-on-surface-variant, #666);font-size:.8125rem}.coupon-list[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;flex-direction:column;gap:.5rem}.coupon-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.5rem;padding:.625rem .75rem;border-radius:8px;border:1px solid var(--sys-outline-variant, #e0e0e0)}.coupon-item.user-coupon[_ngcontent-%COMP%]{cursor:pointer}.coupon-item.user-coupon.selected[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);background:var(--sys-primary-container, #ffebee)}.coupon-item.user-coupon[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.coupon-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.coupon-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--sys-on-surface, #212121)}.coupon-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--sys-on-surface-variant, #666)}.coupon-credit[_ngcontent-%COMP%]{font-weight:700;color:var(--sys-secondary, #2e7d32);font-size:.875rem;white-space:nowrap}.coupon-total-row[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px dashed var(--sys-outline-variant, #e0e0e0);display:flex;align-items:center;justify-content:space-between;font-size:.875rem}.payment-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.875rem;border:2px solid var(--sys-outline-variant, #e0e0e0);border-radius:10px;cursor:pointer;transition:all .2s}.payment-option[_ngcontent-%COMP%]:hover{border-color:var(--sys-primary, #c62828)}.payment-option.selected[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);background:var(--sys-primary-container, #ffebee)}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-top:.125rem;accent-color:var(--sys-primary, #c62828)}.option-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.option-title[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--sys-on-surface, #212121)}.draft-summary[_ngcontent-%COMP%], .order-summary[_ngcontent-%COMP%]{border-top:1px solid var(--sys-outline-variant, #e0e0e0);padding-top:1rem;margin-bottom:1rem}.order-summary[_ngcontent-%COMP%]{border-top:none;padding-top:0;margin-bottom:0}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.9rem}.summary-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.summary-value[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.summary-row.discount[_ngcontent-%COMP%]   .discount-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.summary-row.discount[_ngcontent-%COMP%]   .fee-value[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828)}.summary-row.paid[_ngcontent-%COMP%]   .paid-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.summary-row.total[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #e0e0e0);margin-top:.5rem}.summary-row.total[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%], .summary-row.total[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:700;color:var(--sys-primary, #c62828)}.summary-row.amount-due[_ngcontent-%COMP%]{font-size:1rem}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--sys-primary, #c62828)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value.refund[_ngcontent-%COMP%]{color:var(--sys-tertiary, #1565c0)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value.paid-full[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.status-breakdown[_ngcontent-%COMP%]{background:var(--sys-surface-container, #f8f9fa);border-radius:8px;padding:.75rem;margin-bottom:1rem}.status-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.375rem 0;font-size:.85rem}.status-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--sys-outline-variant, #eee)}.status-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-label[_ngcontent-%COMP%]:before{content:"\\25cf";font-size:.625rem}.status-row.locked[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-tertiary, #e65100)}.status-row.submitted[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-secondary, #1976d2)}.status-row.secured[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:#7b1fa2}.status-row.paid[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-tertiary, #2e7d32)}.status-value[_ngcontent-%COMP%]{font-weight:500;color:var(--sys-on-surface, #333)}.summary-note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #888);text-align:right;font-style:italic}.divider[_ngcontent-%COMP%]{height:1px;background:var(--sys-outline, #e0e0e0);margin:.5rem 0}.paid-badge[_ngcontent-%COMP%]{background:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20);padding:.5rem .75rem;border-radius:8px;font-size:.875rem;display:inline-flex;align-items:center;justify-content:center;gap:.35rem;font-weight:600;margin-top:.5rem}.zelle-due-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--sys-outline-variant, #e0e0e0)}.zelle-due-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;padding:.75rem;background:var(--sys-primary-container, #ffebee);border-radius:8px}.zelle-due-label[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-primary, #c62828)}.zelle-due-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--sys-primary, #c62828)}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .2s}.btn-submit[_ngcontent-%COMP%]:hover{background:var(--sys-primary-dark, #a51c1c)}.admin-actions-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem}.admin-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}']})};function ze(t,n){if(t&1){let e=h();f(0,"div",0)(1,"div",2)(2,"div",3)(3,"span",4),r(4,"event"),C(),f(5,"div",5)(6,"span",6),r(7),C(),f(8,"span",7),r(9),C()()(),f(10,"div",8),r(11),C()(),f(12,"div",9)(13,"div",10)(14,"span",11),r(15,"Base Price"),C(),f(16,"span",12),r(17),C()(),f(18,"div",13)(19,"label",14)(20,"span",15),V(21,"span",16),C(),f(22,"input",17),N("change",function(s){g(e);let b=c();return _(b.onLunchToggle(s))}),C(),f(23,"span",18),r(24,"Lunch"),C(),f(25,"span",19),r(26),C()(),f(27,"label",14)(28,"span",15),V(29,"span",16),C(),f(30,"input",17),N("change",function(s){g(e);let b=c();return _(b.onExtendedCareToggle(s))}),C(),f(31,"span",18),r(32,"Extended Care"),C(),f(33,"span",19),r(34),C()()(),f(35,"div",20)(36,"span",11),r(37,"Item Total"),C(),f(38,"span",12),r(39),C()()(),f(40,"button",21),N("click",function(s){g(e);let b=c();return _(b.onDeleteClick(s))}),L(),f(41,"svg",22),V(42,"path",23),C()()()}if(t&2){let e=c();o(7),y(e.item().className),o(2),y(e.formatDateRange(e.item().startDate,e.item().endDate)),o(2),y(e.item().studentName),o(6),u("$",e.formatPrice(e.item().pricing.basePrice)),o(2),O("active",e.item().options.lunch),o(3),$("checked",e.item().options.lunch),o(4),u("+$",e.formatPrice(e.item().pricing.lunchPrice)),o(),O("active",e.item().options.extendedCare),o(3),$("checked",e.item().options.extendedCare),o(4),u("+$",e.formatPrice(e.item().pricing.extendedCarePrice)),o(5),u("$",e.formatPrice(e.item().pricing.itemTotal))}}function je(t,n){t&1&&(f(0,"span",33)(1,"span",34),r(2,"lunch_dining"),C(),r(3," Lunch "),C())}function Ae(t,n){t&1&&(f(0,"span",33)(1,"span",34),r(2,"schedule"),C(),r(3," Extended Care "),C())}function $e(t,n){if(t&1&&(f(0,"span",31),r(1,"\xB7"),C(),f(2,"span",32),l(3,je,4,0,"span",33),l(4,Ae,4,0,"span",33),C()),t&2){let e=c(2);o(3),m(e.item().options.lunch?3:-1),o(),m(e.item().options.extendedCare?4:-1)}}function Fe(t,n){if(t&1&&(f(0,"div",1)(1,"div",24)(2,"span",25),r(3,"event"),C(),f(4,"span",26),r(5),C(),f(6,"span",27),r(7),C()(),f(8,"div",28)(9,"span",29),r(10),C(),l(11,$e,5,2),f(12,"span",30),r(13),C()()()),t&2){let e=c();o(5),y(e.item().className),o(2),u("(",e.formatDateRange(e.item().startDate,e.item().endDate),")"),o(3),y(e.formatStudentName(e.item().studentName)),o(),m(e.item().options.lunch||e.item().options.extendedCare?11:-1),o(2),u("$",e.formatPrice(e.item().pricing.itemTotal))}}var T=class t{item=p.required();editable=p(!1);deleteClick=v();addonToggle=v();formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}formatDateRange(n,e){return ee(n,e).replace("-","\u2013")}formatStudentName(n){return n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}onDeleteClick(n){n.stopPropagation(),this.deleteClick.emit()}onLunchToggle(n){n.stopPropagation();let e=n.target;this.addonToggle.emit({item:this.item(),addon:"lunch",value:e.checked})}onExtendedCareToggle(n){n.stopPropagation();let e=n.target;this.addonToggle.emit({item:this.item(),addon:"extendedCare",value:e.checked})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-item-card"]],inputs:{item:[1,"item"],editable:[1,"editable"]},outputs:{deleteClick:"deleteClick",addonToggle:"addonToggle"},decls:2,vars:1,consts:[[1,"item-card","editable"],[1,"item-card","compact"],[1,"item-header"],[1,"item-info"],["aria-hidden","true",1,"item-icon","material-symbols-rounded"],[1,"item-details"],[1,"class-name"],[1,"date-range"],[1,"student-badge"],[1,"pricing-breakdown"],[1,"price-row"],[1,"price-label"],[1,"price-value"],[1,"addons-row"],[1,"addon-toggle"],[1,"toggle-track"],[1,"toggle-thumb"],["type","checkbox",3,"change","checked"],[1,"addon-label"],[1,"addon-price"],[1,"price-row","total"],["aria-label","Release reservation",1,"btn-delete",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"compact-row-1"],["aria-hidden","true",1,"compact-icon","material-symbols-rounded"],[1,"compact-class"],[1,"compact-date"],[1,"compact-row-2"],[1,"compact-student"],[1,"compact-price"],[1,"compact-separator"],[1,"compact-addons"],[1,"addon-tag"],["aria-hidden","true",1,"material-symbols-rounded","icon-sm"]],template:function(e,d){e&1&&l(0,ze,43,13,"div",0)(1,Fe,14,5,"div",1),e&2&&m(d.editable()?0:1)},dependencies:[E],styles:[".item-card.editable[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:10px;padding:1rem;position:relative}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem;padding-right:2.5rem}.item-info[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:flex-start}.item-icon[_ngcontent-%COMP%]{font-size:1.25rem}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.class-name[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121);font-size:.95rem}.date-range[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #666)}.student-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;background:var(--sys-surface-variant, #f0f0f0);border-radius:12px;font-size:.75rem;font-weight:500;color:var(--sys-on-surface-variant, #666);text-transform:uppercase;letter-spacing:.02em}.pricing-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:.75rem;background:var(--sys-surface-container, #fafafa);border-radius:8px;border:1px solid var(--sys-outline-variant, #eee)}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.85rem}.price-label[_ngcontent-%COMP%]{color:var(--sys-on-surface, #333)}.price-value[_ngcontent-%COMP%]{font-weight:500;color:var(--sys-on-surface, #333)}.addons-row[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.25rem 0}.addon-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.85rem}.addon-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.toggle-track[_ngcontent-%COMP%]{position:relative;width:32px;height:18px;background:#d0d0d0;border-radius:9px;transition:all .2s ease;flex-shrink:0}.toggle-thumb[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;width:14px;height:14px;background:#fff;border-radius:50%;transition:all .2s ease;box-shadow:0 1px 2px #00000026}.addon-toggle.active[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]{background:#4caf50}.addon-toggle.active[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{left:16px}.addon-toggle.active[_ngcontent-%COMP%]   .addon-price[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);font-weight:500}.addon-label[_ngcontent-%COMP%]{color:var(--sys-on-surface, #333)}.addon-price[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #888);font-size:.85rem}.price-row.total[_ngcontent-%COMP%]{border-top:1px solid var(--sys-outline-variant, #e0e0e0);padding-top:.5rem;margin-top:.25rem}.price-row.total[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{font-weight:600}.price-row.total[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:var(--sys-primary, #c62828)}.btn-delete[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;width:32px;height:32px;border-radius:50%;border:none;background:transparent;color:var(--sys-on-surface-variant, #999);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--sys-error-container, #ffebee);color:var(--sys-error, #c62828)}.item-card.compact[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid var(--sys-outline-variant, #eee)}.item-card.compact[_ngcontent-%COMP%]:last-child{border-bottom:none}.compact-row-1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.compact-icon[_ngcontent-%COMP%]{font-size:1rem}.compact-class[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121);font-size:.9rem}.compact-date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #666)}.compact-row-2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding-left:1.5rem;font-size:.8rem}.compact-student[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #555)}.compact-separator[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #999)}.compact-addons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.addon-tag[_ngcontent-%COMP%]{font-size:.75rem;color:var(--sys-on-surface-variant, #666)}.compact-price[_ngcontent-%COMP%]{margin-left:auto;font-weight:600;color:var(--sys-on-surface, #333);font-size:.9rem}"]})};var Ge=(t,n)=>n.sessionId+n.studentId;function Re(t,n){t&1&&(a(0,"div",3),r(1,"Loading..."),i())}function Ue(t,n){if(t&1&&P(0,"img",4),t&2){let e=c();S("src",e.imageUrl(),A)}}function Be(t,n){t&1&&(a(0,"div",5),r(1,"Failed to load"),i())}function He(t,n){if(t&1&&(a(0,"span",11),r(1),i()),t&2){let e=c();o(),u("+",e.formatCurrency(e.group().screenshot.claimedAmountCents))}}function qe(t,n){t&1&&P(0,"span",20)}function We(t,n){t&1&&r(0," Confirm ")}function Ze(t,n){t&1&&P(0,"span",22)}function Je(t,n){t&1&&r(0," Reject ")}function Ke(t,n){if(t&1){let e=h();a(0,"div",14)(1,"button",19),x("click",function(s){g(e);let b=c();return _(b.onConfirm(s))}),l(2,qe,1,0,"span",20)(3,We,1,0),i(),a(4,"button",21),x("click",function(s){g(e);let b=c();return _(b.onReject(s))}),l(5,Ze,1,0,"span",22)(6,Je,1,0),i()()}if(t&2){let e=c();o(),S("disabled",e.confirming()||e.rejecting()),o(),m(e.confirming()?2:3),o(2),S("disabled",e.confirming()||e.rejecting()),o(),m(e.rejecting()?5:6)}}function Qe(t,n){t&1&&P(0,"span",24)}function Xe(t,n){t&1&&(L(),a(0,"svg",25),P(1,"path",26),i())}function Ye(t,n){if(t&1){let e=h();a(0,"button",23),x("click",function(s){g(e);let b=c();return _(b.onDelete(s))}),l(1,Qe,1,0,"span",24)(2,Xe,2,0,":svg:svg",25),i()}if(t&2){let e=c();S("disabled",e.deleting()),o(),m(e.deleting()?1:2)}}function et(t,n){if(t&1&&P(0,"app-ledger-item-card",17),t&2){let e=n.$implicit;S("item",e)("editable",!1)}}function tt(t,n){if(t&1){let e=h();a(0,"div",27),x("click",function(){g(e);let s=c();return _(s.closeLightbox())}),a(1,"div",28),x("click",function(s){return g(e),_(s.stopPropagation())}),a(2,"button",29),x("click",function(){g(e);let s=c();return _(s.closeLightbox())}),r(3,"\xD7"),i(),P(4,"img",30),i()()}if(t&2){let e=c();o(4),S("src",e.imageUrl(),A)}}var z=class t{confirmDialog=R(re);group=p.required();showDelete=p(!0);showConfirm=p(!1);deleteClick=v();confirmClick=v();rejectClick=v();imageUrl=D(null);loading=D(!0);deleting=D(!1);confirming=D(!1);rejecting=D(!1);showLightbox=D(!1);storage=X(J());constructor(){U(()=>{let n=this.group().screenshot;this.resolveUrl(n.storagePath)})}async resolveUrl(n){this.loading.set(!0);try{let e=Q(this.storage,n),d=await K(e);this.imageUrl.set(d)}catch{this.imageUrl.set(null)}finally{this.loading.set(!1)}}formatCurrency(n){return"$"+(n/100).toFixed(2)}formatDate(n){return Y(n,{month:"short",day:"numeric"})}formatTransactionId(n){if(!n)return"#----";let e=n.toUpperCase(),d=e.slice(0,4),s=e.slice(-2);return`#${d}-${s}`}openLightbox(){this.imageUrl()&&this.showLightbox.set(!0)}closeLightbox(){this.showLightbox.set(!1)}async onDelete(n){n.stopPropagation(),await this.confirmDialog.confirm({title:"Delete Receipt?",message:"Delete this receipt? Items will be moved back to draft.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"danger"})&&this.deleteClick.emit(this.group().screenshot.id)}onConfirm(n){n.stopPropagation(),this.confirmClick.emit(this.group().screenshot.id)}onReject(n){n.stopPropagation(),this.rejectClick.emit(this.group().screenshot.id)}setDeleting(n){this.deleting.set(n)}setConfirming(n){this.confirming.set(n)}setRejecting(n){this.rejecting.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-screenshot-group"]],inputs:{group:[1,"group"],showDelete:[1,"showDelete"],showConfirm:[1,"showConfirm"]},outputs:{deleteClick:"deleteClick",confirmClick:"confirmClick",rejectClick:"rejectClick"},decls:25,vars:10,consts:[[1,"screenshot-group"],[1,"screenshot-header"],[1,"screenshot-preview",3,"click"],[1,"screenshot-loading"],["alt","Payment receipt",1,"screenshot-thumb",3,"src"],[1,"screenshot-error"],[1,"screenshot-info"],[1,"screenshot-header-row"],[1,"payment-info"],[1,"payment-badge"],[1,"review-badge"],[1,"claimed-amount"],[1,"screenshot-meta-row"],[1,"meta-item"],[1,"admin-actions"],["type","button","title","Delete screenshot and move items back to draft",1,"delete-btn",3,"disabled"],[1,"items-container"],[3,"item","editable"],[1,"lightbox-overlay"],["type","button","title","Confirm payment for this receipt",1,"confirm-btn",3,"click","disabled"],[1,"confirm-spinner"],["type","button","title","Reject receipt and revert items to awaiting payment",1,"reject-btn",3,"click","disabled"],[1,"reject-spinner"],["type","button","title","Delete screenshot and move items back to draft",1,"delete-btn",3,"click","disabled"],[1,"delete-spinner"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"lightbox-overlay",3,"click"],[1,"lightbox-content",3,"click"],["type","button",1,"lightbox-close",3,"click"],["alt","Payment receipt",1,"lightbox-img",3,"src"]],template:function(e,d){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),x("click",function(){return d.openLightbox()}),l(3,Re,2,0,"div",3)(4,Ue,1,1,"img",4)(5,Be,2,0,"div",5),i(),a(6,"div",6)(7,"div",7)(8,"div",8)(9,"span",9),r(10),i(),a(11,"span",10),r(12,"In Review"),i()(),l(13,He,2,1,"span",11),i(),a(14,"div",12)(15,"span",13),r(16),i(),a(17,"span",13),r(18),i()()(),l(19,Ke,7,4,"div",14),l(20,Ye,3,2,"button",15),i(),a(21,"div",16),M(22,et,1,2,"app-ledger-item-card",17,Ge),i()(),l(24,tt,5,1,"div",18)),e&2&&(o(3),m(d.loading()?3:d.imageUrl()?4:5),o(6),O("cash",d.group().screenshot.paymentOption==="cash_deposit"),o(),u(" ",d.group().screenshot.paymentOption==="cash_deposit"?"Cash":"Zelle"," "),o(3),m(d.group().screenshot.claimedAmountCents!==void 0?13:-1),o(3),u("Submitted ",d.formatDate(d.group().screenshot.uploadedAt)),o(2),u("ID: ",d.formatTransactionId(d.group().screenshot.id)),o(),m(d.showConfirm()?19:-1),o(),m(d.showDelete()?20:-1),o(2),w(d.group().items),o(2),m(d.showLightbox()&&d.imageUrl()?24:-1))},dependencies:[E,T],styles:['@charset "UTF-8";.screenshot-group[_ngcontent-%COMP%]{background:var(--sys-surface, #fff);border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;overflow:hidden}.screenshot-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:var(--sys-surface-container, #f8f9fa);border-bottom:1px solid var(--sys-outline-variant, #eee)}.screenshot-preview[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:6px;overflow:hidden;cursor:pointer;flex-shrink:0;border:1px solid var(--sys-outline-variant, #ddd)}.screenshot-thumb[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.screenshot-loading[_ngcontent-%COMP%], .screenshot-error[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.625rem;color:var(--sys-on-surface-variant, #999);background:var(--sys-surface-variant, #f0f0f0)}.screenshot-info[_ngcontent-%COMP%]{flex:1;min-width:0}.screenshot-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.25rem}.payment-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem}.payment-badge[_ngcontent-%COMP%]{display:inline-block;padding:.125rem .5rem;background:#e3f2fd;color:#1565c0;border-radius:4px;font-size:.6875rem;font-weight:600;text-transform:uppercase}.payment-badge.cash[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.review-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.125rem .5rem;background:#fff8e1;color:#f57c00;border:1px solid #ffcc02;border-radius:4px;font-size:.625rem;font-weight:600;text-transform:uppercase}.review-badge[_ngcontent-%COMP%]:before{content:"\\23f1";font-size:.75rem}.claimed-amount[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-secondary, #2e7d32);font-weight:600}.screenshot-meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.7rem;color:var(--sys-on-surface-variant, #888)}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.admin-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.confirm-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:6px;border:1px solid #2e7d32;background:#2e7d32;color:#fff;cursor:pointer;font-size:.75rem;font-weight:600;transition:all .2s}.confirm-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1b5e20;border-color:#1b5e20}.confirm-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirm-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.reject-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:6px;border:1px solid #c62828;background:#fff;color:#c62828;cursor:pointer;font-size:.75rem;font-weight:600;transition:all .2s}.reject-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#c62828;color:#fff}.reject-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.reject-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:2px solid rgba(198,40,40,.3);border-top-color:#c62828;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.delete-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:1px solid var(--sys-outline-variant, #ddd);background:#fff;color:var(--sys-on-surface-variant, #666);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-error-container, #ffebee);border-color:var(--sys-error, #c62828);color:var(--sys-error, #c62828)}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.delete-spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid var(--sys-outline, #ddd);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.lightbox-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:2000}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh}.lightbox-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:transparent;border:none;color:#fff;font-size:32px;cursor:pointer;line-height:1;padding:4px 8px}.lightbox-img[_ngcontent-%COMP%]{max-width:90vw;max-height:85vh;object-fit:contain;border-radius:4px}']})};var j=(t,n)=>n.sessionId+n.studentId,nt=(t,n)=>n.screenshot.id;function ot(t,n){if(t&1){let e=h();a(0,"button",13),x("click",function(){g(e);let s=c(2);return _(s.cancelItemsClick.emit())}),r(1," Cancel Items "),i()}}function it(t,n){if(t&1){let e=h();a(0,"app-ledger-item-card",14),x("deleteClick",function(){let s=g(e).$implicit,b=c(2);return _(b.deleteItem.emit(s))})("addonToggle",function(s){g(e);let b=c(2);return _(b.addonToggle.emit(s))}),i()}if(t&2){let e=n.$implicit,d=c(2);S("item",e)("editable",d.editable())}}function rt(t,n){if(t&1&&(a(0,"section",0)(1,"div",4)(2,"h2",5)(3,"span",6),r(4,"\u25CF"),i(),r(5," Awaiting Payment "),a(6,"span",7),r(7),i()(),l(8,ot,2,0,"button",8),i(),a(9,"p",9),r(10),i(),a(11,"div",10),M(12,it,1,2,"app-ledger-item-card",11,j),i(),a(14,"div",12)(15,"span"),r(16,"Section Total"),i(),a(17,"span"),r(18),i()()()),t&2){let e=c();o(7),y(e.lockedItems().length),o(),m(e.isAdmin()&&e.lockedItems().length>0?8:-1),o(2),y(e.isAdmin()?"Spots locked, awaiting payment screenshot":"Review your selections and submit payment to secure your spots"),o(2),w(e.lockedItems()),o(6),u("$",e.formatPrice(e.lockedItemsTotal()))}}function at(t,n){if(t&1){let e=h();a(0,"button",13),x("click",function(){g(e);let s=c(2);return _(s.cancelItemsClick.emit())}),r(1," Cancel Items "),i()}}function dt(t,n){if(t&1){let e=h();a(0,"app-ledger-screenshot-group",18),x("deleteClick",function(s){g(e);let b=c(3);return _(b.deleteScreenshot.emit(s))})("confirmClick",function(s){g(e);let b=c(3);return _(b.confirmScreenshot.emit(s))})("rejectClick",function(s){g(e);let b=c(3);return _(b.rejectScreenshot.emit(s))}),i()}if(t&2){let e=n.$implicit,d=c(3);S("group",e)("showDelete",!d.isAdmin())("showConfirm",d.isAdmin())}}function st(t,n){if(t&1&&(a(0,"div",16),M(1,dt,1,3,"app-ledger-screenshot-group",17,nt),i()),t&2){let e=c(2);o(),w(e.screenshotGroups())}}function ct(t,n){if(t&1&&P(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;S("item",e)("editable",!1)}}function lt(t,n){if(t&1&&(a(0,"div",10),M(1,ct,1,2,"app-ledger-item-card",11,j),i()),t&2){let e=c(2);o(),w(e.submittedItems())}}function mt(t,n){if(t&1&&(a(0,"section",1)(1,"div",4)(2,"h2",5)(3,"span",15),r(4,"\u25CF"),i(),r(5," Pending Verification "),a(6,"span",7),r(7),i()(),l(8,at,2,0,"button",8),i(),a(9,"p",9),r(10,"Receipts submitted, awaiting admin confirmation"),i(),l(11,st,3,0,"div",16)(12,lt,3,0,"div",10),a(13,"div",12)(14,"span"),r(15,"Section Total"),i(),a(16,"span"),r(17),i()()()),t&2){let e=c();o(7),y(e.submittedItems().length),o(),m(e.isAdmin()&&e.submittedItems().length>0?8:-1),o(3),m(e.screenshotGroups().length>0?11:12),o(6),u("$",e.formatPrice(e.submittedItemsTotal()))}}function pt(t,n){if(t&1){let e=h();a(0,"button",13),x("click",function(){g(e);let s=c(2);return _(s.cancelItemsClick.emit())}),r(1," Cancel Items "),i()}}function ut(t,n){if(t&1){let e=h();a(0,"a",26),x("click",function(){g(e);let s=c(2);return _(s.showCashInstructions.emit())}),a(1,"span",27),r(2,"payments"),i(),r(3," View Cash Payment Instructions "),i()}}function gt(t,n){if(t&1&&P(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;S("item",e)("editable",!1)}}function _t(t,n){if(t&1&&(a(0,"section",2)(1,"div",4)(2,"h2",5)(3,"span",19),r(4,"\u25CF"),i(),r(5," Registration Fee Received "),a(6,"span",7),r(7),i()(),l(8,pt,2,0,"button",8),i(),a(9,"p",9),r(10," Spot secured \u2013 awaiting cash balance "),l(11,ut,4,0,"a",20),i(),a(12,"div",21),M(13,gt,1,2,"app-ledger-item-card",11,j),i(),a(15,"div",22)(16,"div",23)(17,"span"),r(18,"Section Total"),i(),a(19,"span"),r(20),i()(),a(21,"div",24)(22,"span"),r(23,"Registration Fee Paid"),i(),a(24,"span",25),r(25),i()()()()),t&2){let e=c();o(7),y(e.securedItems().length),o(),m(e.isAdmin()&&e.securedItems().length>0?8:-1),o(3),m(e.isAdmin()?-1:11),o(2),w(e.securedItems()),o(7),u("$",e.formatPrice(e.securedItemsTotal())),o(5),u("$",e.formatPrice(e.securedDepositPaid()))}}function Ct(t,n){if(t&1){let e=h();a(0,"button",13),x("click",function(){g(e);let s=c(2);return _(s.cancelItemsClick.emit())}),r(1," Cancel Items "),i()}}function ft(t,n){if(t&1&&P(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;S("item",e)("editable",!1)}}function bt(t,n){if(t&1&&(a(0,"section",3)(1,"div",4)(2,"h2",5)(3,"span",28),r(4,"\u25CF"),i(),r(5," Payment Confirmed "),a(6,"span",7),r(7),i()(),l(8,Ct,2,0,"button",8),i(),a(9,"p",9),r(10,"Full payment received - registration complete"),i(),a(11,"div",21),M(12,ft,1,2,"app-ledger-item-card",11,j),i(),a(14,"div",12)(15,"span"),r(16,"Section Total"),i(),a(17,"span"),r(18),i()()()),t&2){let e=c();o(7),y(e.paidItems().length),o(),m(e.isAdmin()&&e.paidItems().length>0?8:-1),o(4),w(e.paidItems()),o(6),u("$",e.formatPrice(e.paidItemsTotal()))}}var ce=class t{lockedItems=p.required();submittedItems=p.required();securedItems=p.required();paidItems=p.required();editable=p(!1);isAdmin=p(!1);screenshotGroups=p([]);deleteItem=v();addonToggle=v();deleteScreenshot=v();confirmScreenshot=v();rejectScreenshot=v();cancelItemsClick=v();showCashInstructions=v();lockedItemsTotal=k(()=>this.lockedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));submittedItemsTotal=k(()=>this.submittedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));securedItemsTotal=k(()=>this.securedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));securedDepositPaid=k(()=>this.securedItems().length*5e3);paidItemsTotal=k(()=>this.paidItems().reduce((n,e)=>n+e.pricing.itemTotal,0));hasSubmittedItems=k(()=>this.submittedItems().length>0||this.screenshotGroups().length>0);formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-order-items"]],inputs:{lockedItems:[1,"lockedItems"],submittedItems:[1,"submittedItems"],securedItems:[1,"securedItems"],paidItems:[1,"paidItems"],editable:[1,"editable"],isAdmin:[1,"isAdmin"],screenshotGroups:[1,"screenshotGroups"]},outputs:{deleteItem:"deleteItem",addonToggle:"addonToggle",deleteScreenshot:"deleteScreenshot",confirmScreenshot:"confirmScreenshot",rejectScreenshot:"rejectScreenshot",cancelItemsClick:"cancelItemsClick",showCashInstructions:"showCashInstructions"},decls:4,vars:4,consts:[[1,"ledger-section","draft"],[1,"ledger-section","pending"],[1,"ledger-section","deposit-paid"],[1,"ledger-section","secured"],[1,"section-header"],[1,"section-title"],[1,"section-icon","draft"],[1,"section-count"],["type","button",1,"btn-admin","btn-danger-outline"],[1,"section-description"],[1,"items-list"],[3,"item","editable"],[1,"section-footer"],["type","button",1,"btn-admin","btn-danger-outline",3,"click"],[3,"deleteClick","addonToggle","item","editable"],[1,"section-icon","pending"],[1,"screenshot-groups"],[3,"group","showDelete","showConfirm"],[3,"deleteClick","confirmClick","rejectClick","group","showDelete","showConfirm"],[1,"section-icon","deposit-paid"],[1,"cash-instruction-link"],[1,"compact-items-container"],[1,"section-footer","multi-row"],[1,"footer-row"],[1,"footer-row","paid"],[1,"paid-amount"],[1,"cash-instruction-link",3,"click"],["aria-hidden","true",1,"material-symbols-rounded","icon-inline"],[1,"section-icon","secured"]],template:function(e,d){e&1&&(l(0,rt,19,4,"section",0),l(1,mt,18,4,"section",1),l(2,_t,26,5,"section",2),l(3,bt,19,3,"section",3)),e&2&&(m(d.lockedItems().length>0?0:-1),o(),m(d.hasSubmittedItems()?1:-1),o(),m(d.securedItems().length>0?2:-1),o(),m(d.paidItems().length>0?3:-1))},dependencies:[E,T,z],styles:[".ledger-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem;margin-bottom:1rem}.ledger-section.draft[_ngcontent-%COMP%]{border-left:4px solid var(--sys-tertiary, #e65100)}.ledger-section.pending[_ngcontent-%COMP%]{border-left:4px solid var(--sys-secondary, #1976d2)}.ledger-section.deposit-paid[_ngcontent-%COMP%]{border-left:4px solid #7b1fa2;background:linear-gradient(135deg,#faf5ff,#fff8e1)}.ledger-section.secured[_ngcontent-%COMP%]{border-left:4px solid var(--sys-tertiary, #2e7d32)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.25rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1rem;font-weight:600;color:var(--sys-on-surface, #212121)}.section-icon[_ngcontent-%COMP%]{font-size:.75rem}.section-icon.draft[_ngcontent-%COMP%]{color:var(--sys-tertiary, #e65100)}.section-icon.pending[_ngcontent-%COMP%]{color:var(--sys-secondary, #1976d2)}.section-icon.deposit-paid[_ngcontent-%COMP%]{color:#7b1fa2}.section-icon.secured[_ngcontent-%COMP%]{color:var(--sys-tertiary, #2e7d32)}.section-count[_ngcontent-%COMP%]{margin-left:auto;padding:.125rem .5rem;background:var(--sys-surface-variant, #f0f0f0);border-radius:10px;font-size:.75rem;font-weight:500;color:var(--sys-on-surface-variant, #666)}.section-description[_ngcontent-%COMP%]{margin:.25rem 0 1rem 1.25rem;font-size:.8rem;color:var(--sys-on-surface-variant, #888)}.items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.compact-items-container[_ngcontent-%COMP%]{background:var(--sys-surface, #fff);border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;overflow:hidden}.screenshot-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.section-footer[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem 1rem;background:var(--sys-surface-container, #f5f5f5);border-radius:8px;font-size:.875rem;display:flex;justify-content:space-between;align-items:center}.section-footer.multi-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.footer-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem 0;color:var(--sys-on-surface-variant, #666)}.footer-row.paid[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32);font-weight:500}.footer-row.paid[_ngcontent-%COMP%]   .paid-amount[_ngcontent-%COMP%]{font-weight:600}.footer-row.remaining[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #ddd);margin-top:.25rem;color:var(--sys-tertiary, #e65100);font-weight:500}.cash-instruction-link[_ngcontent-%COMP%]{display:inline-block;margin-left:.5rem;color:var(--sys-primary, #c62828);cursor:pointer;text-decoration:underline;font-style:normal}.cash-instruction-link[_ngcontent-%COMP%]:hover{color:var(--sys-primary-dark, #a51c1c)}.btn-admin[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s}.btn-danger-outline[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:1px solid #dc3545}.btn-danger-outline[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}"]})};export{se as a,ce as b};
