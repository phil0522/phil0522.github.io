import{b as I}from"./chunk-RYIKU5Y3.js";import{da as V,h as b,n as T}from"./chunk-BYFRXP3Z.js";import"./chunk-UYHN5VVP.js";import{$a as g,Db as t,Ea as s,Eb as D,Fb as y,N as w,Qa as C,S as d,T as m,Vb as R,Wb as M,ab as p,da as h,db as P,eb as O,fb as S,gb as a,hb as r,ib as E,jb as u,kb as f,ob as _,pb as k,qb as v,rb as W,sb as l}from"./chunk-5O64VQN5.js";import"./chunk-Q7L6LLAK.js";var x=class n{entry=M.required();loading=M(!1);remove=R();onRemove(){this.remove.emit()}formatDate(o){return I(o,{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-waitlist-entry-card"]],inputs:{entry:[1,"entry"],loading:[1,"loading"]},outputs:{remove:"remove"},decls:15,vars:3,consts:[[1,"waitlist-card"],[1,"card-header"],[1,"class-info"],[1,"class-name"],[1,"class-dates"],[1,"status-indicator"],[1,"info-section"],[1,"info-text"],[1,"card-actions"],[1,"btn-secondary",3,"click","disabled"]],template:function(e,i){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t(4),f(),u(5,"div",4),t(6),f()(),u(7,"div",5),t(8," On Waitlist "),f()(),u(9,"div",6)(10,"p",7),t(11,"You'll be notified when a spot opens up."),f()(),u(12,"div",8)(13,"button",9),W("click",function(){return i.onRemove()}),t(14," Leave Waitlist "),f()()()),e&2&&(s(4),y("Class ",i.entry().sessionId),s(2),y("Joined: ",i.formatDate(i.entry().joinedAt)),s(7),k("disabled",i.loading()))},dependencies:[b],styles:[".waitlist-card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline, #e0e0e0);border-radius:12px;padding:1.25rem;margin-bottom:1rem;transition:box-shadow .2s ease}.waitlist-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #00000014}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.class-info[_ngcontent-%COMP%]{flex:1}.class-name[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.1rem;color:var(--sys-on-surface, #212121)}.class-dates[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.status-indicator[_ngcontent-%COMP%]{background:var(--sys-surface-variant, #f5f5f5);color:var(--sys-on-surface-variant, #666);padding:.375rem .75rem;border-radius:16px;font-size:.875rem;font-weight:500}.info-section[_ngcontent-%COMP%]{margin-bottom:1rem}.info-text[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#fff;color:var(--sys-on-surface-variant, #666);border:1px solid var(--sys-outline, #e0e0e0);border-radius:8px;font-size:.95rem;cursor:pointer;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-surface-variant, #f5f5f5);border-color:var(--sys-on-surface-variant, #666)}.btn-secondary[_ngcontent-%COMP%]:disabled{color:var(--sys-outline, #ccc);cursor:not-allowed}"]})};var F=(n,o)=>o.sessionId;function Y(n,o){n&1&&(a(0,"div",3),E(1,"div",8),a(2,"p"),t(3,"Loading..."),r()())}function $(n,o){if(n&1){let e=_();a(0,"div",4)(1,"div",9),t(2,"!"),r(),a(3,"p"),t(4),r(),a(5,"button",10),v("click",function(){d(e);let c=l();return m(c.orderService.clearError())}),t(6,"Retry"),r()()}if(n&2){let e=l();s(4),D(e.orderService.error())}}function q(n,o){if(n&1){let e=_();a(0,"div",5)(1,"div",11),t(2,"assignment"),r(),a(3,"h2"),t(4,"No Waitlist Entries"),r(),a(5,"p"),t(6,"You haven't joined the waitlist for any classes yet"),r(),a(7,"button",12),v("click",function(){d(e);let c=l();return m(c.goToCatalog())}),t(8,"Browse Classes"),r()()}}function A(n,o){if(n&1){let e=_();a(0,"app-waitlist-entry-card",16),v("remove",function(){let c=d(e).$implicit,N=l(2);return m(N.onRemove(c))}),r()}if(n&2){let e=o.$implicit,i=l(2);S("entry",e)("loading",i.orderService.loading())}}function B(n,o){if(n&1&&(a(0,"div",6)(1,"div",13)(2,"span",14),t(3),r()(),P(4,A,1,2,"app-waitlist-entry-card",15,F),r()),n&2){let e=l();s(3),y(" ",e.orderService.waitlistCount()," on waitlist "),s(),O(e.orderService.waitlistEntries())}}function J(n,o){if(n&1){let e=_();a(0,"div",7)(1,"div",17)(2,"h3"),t(3,"Leave Waitlist"),r(),a(4,"p"),t(5,"Are you sure you want to leave the waitlist?"),r(),a(6,"p",18),t(7,"You will lose your current position in the queue."),r(),a(8,"div",19)(9,"button",20),v("click",function(){d(e);let c=l();return m(c.closeRemoveDialog())}),t(10,"Cancel"),r(),a(11,"button",21),v("click",function(){d(e);let c=l();return m(c.confirmRemove())}),t(12,"Leave Waitlist"),r()()()()}}var z=class n{orderService=w(V);router=w(T);_showRemoveDialog=h(!1);_selectedEntry=h(null);showRemoveDialog=this._showRemoveDialog.asReadonly();goToCatalog(){this.router.navigate(["/catalog"])}onRemove(o){this._selectedEntry.set(o),this._showRemoveDialog.set(!0)}closeRemoveDialog(){this._showRemoveDialog.set(!1),this._selectedEntry.set(null)}async confirmRemove(){let o=this._selectedEntry();if(o){this.closeRemoveDialog();try{await this.orderService.leaveWaitlist(o.sessionId)}catch{}}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-waitlist-status"]],decls:11,vars:5,consts:[[1,"waitlist-page"],[1,"page-header"],[1,"subtitle"],[1,"loading-container"],[1,"error-container"],[1,"empty-container"],[1,"entries-section"],[1,"dialog-overlay"],[1,"spinner"],[1,"error-icon"],[1,"btn-retry",3,"click"],["aria-hidden","true",1,"empty-icon","material-symbols-rounded"],[1,"btn-primary",3,"click"],[1,"summary-bar"],[1,"count"],[3,"entry","loading"],[3,"remove","entry","loading"],[1,"dialog"],[1,"dialog-warning"],[1,"dialog-actions"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"header",1)(2,"h1"),t(3,"Waitlist"),r(),a(4,"p",2),t(5,"View your waitlist entries"),r()(),g(6,Y,4,0,"div",3),g(7,$,7,1,"div",4),g(8,q,9,0,"div",5),g(9,B,6,1,"div",6),g(10,J,13,0,"div",7),r()),e&2&&(s(6),p(i.orderService.loading()?6:-1),s(),p(i.orderService.error()?7:-1),s(),p(!i.orderService.loading()&&!i.orderService.error()&&i.orderService.waitlistCount()===0?8:-1),s(),p(i.orderService.waitlistCount()>0?9:-1),s(),p(i.showRemoveDialog()?10:-1))},dependencies:[b,x],styles:[".waitlist-page[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:1.5rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.75rem;color:var(--sys-on-surface, #212121)}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--sys-on-surface-variant, #666)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:var(--sys-on-surface-variant, #666)}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--sys-outline, #e0e0e0);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;background:var(--sys-error-container, #ffebee);border-radius:12px}.error-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--sys-error, #c62828);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;margin:0 auto 1rem}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--sys-on-error-container, #b71c1c);margin-bottom:1rem}.btn-retry[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background:var(--sys-error, #c62828);color:#fff;border:none;border-radius:6px;cursor:pointer}.empty-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.empty-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--sys-on-surface, #212121)}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666);margin-bottom:1.5rem}.entries-section[_ngcontent-%COMP%]{margin-top:1rem}.summary-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--sys-surface-variant, #f5f5f5);border-radius:8px;margin-bottom:1.5rem}.count[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--sys-primary-dark, #a51c1c)}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.dialog[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;max-width:400px;width:100%;box-shadow:0 8px 32px #0003}.dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--sys-on-surface, #212121)}.dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .75rem;color:var(--sys-on-surface-variant, #666)}.dialog-warning[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-error, #c62828)}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.btn-secondary[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;background:#fff;color:var(--sys-on-surface-variant, #666);border:1px solid var(--sys-outline, #e0e0e0);border-radius:8px;font-size:.95rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--sys-surface-variant, #f5f5f5)}.btn-danger[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;background:var(--sys-error, #c62828);color:#fff;border:none;border-radius:8px;font-size:.95rem;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background:#a51c1c}"]})};export{z as WaitlistStatusComponent};
