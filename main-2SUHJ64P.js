import{a as $e}from"./chunk-XAPD7MPD.js";import{q as He}from"./chunk-XIJRF2JE.js";import{a as Ve}from"./chunk-3VINFBT4.js";import{a as Be}from"./chunk-FP65VJKV.js";import{$ as Re,W as X,X as Le,Z as $,_ as ze,aa as G,ba as Ne,c as Se,d as T,da as K,e as Oe,ea as Fe,g as we,i as ke,j as Y,k as Te,l as De,n as Q,p as Ae,v as Ie}from"./chunk-EKBBOZY4.js";import"./chunk-UYHN5VVP.js";import{Ab as x,Bb as S,Da as A,Ea as r,I as B,Ib as W,Lb as me,Mb as z,N as f,Nb as R,Pa as E,Pb as h,S as _,T as v,X as he,Ya as ce,Za as g,_a as u,ab as be,bb as I,cb as L,da as C,db as q,ea as xe,eb as m,fb as p,gb as w,hb as c,ib as l,ja as Ce,kb as y,lb as k,mb as P,n as _e,nb as b,ob as d,pb as ye,qb as Me,sb as Pe,tb as de,u as ve,ub as pe,wb as Ee,xb as O,yb as U,zb as a}from"./chunk-5NVNCA6J.js";import{a as ue,b as fe}from"./chunk-Q7L6LLAK.js";var We=(i,t)=>t.id;function Ye(i,t){if(i&1){let e=y();c(0,"label",8)(1,"input",13),b("change",function(){let o=_(e).$implicit,s=d(3);return v(s.toggleSection(o.id))}),l(),c(2,"span",14),a(3),l()()}if(i&2){let e=t.$implicit;r(),k("checked",e.enabled),r(2),x(e.label)}}function Qe(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"settings"),l(),a(4," Global Config "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.configData()))}}function Xe(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"event"),l(),a(4," Selected Season "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.seasonData()))}}function Ge(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"menu_book"),l(),a(4),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(4),S(" Classes (",e.classesData().length,") "),r(2),x(R(7,2,e.classesData()))}}function Ke(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"edit_note"),l(),a(4," Registration (Enrollment + Vacancy Holds) "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.registrationData()))}}function Je(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"receipt_long"),l(),a(4," User Order "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.orderData()))}}function Ze(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"person"),l(),a(4," User Profile "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.profileData()))}}function et(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"savings"),l(),a(4," Pricing (Order) "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.pricingData()))}}function tt(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"bar_chart"),l(),a(4," Enrollment Status "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.enrollmentData()))}}function nt(i,t){if(i&1&&(c(0,"div",12)(1,"h4",15)(2,"span",16),a(3,"hourglass_top"),l(),a(4," Waitlist "),l(),c(5,"pre",17),a(6),z(7,"json"),l()()),i&2){let e=d(3);r(6),x(R(7,1,e.waitlistData()))}}function it(i,t){if(i&1){let e=y();c(0,"div",6)(1,"div",7),I(2,Ye,4,2,"label",8,We),c(4,"button",9),b("click",function(){_(e);let o=d(2);return v(o.copyToClipboard())}),c(5,"span",10),a(6),l(),a(7),l()(),c(8,"div",11),g(9,Qe,8,3,"div",12),g(10,Xe,8,3,"div",12),g(11,Ge,8,4,"div",12),g(12,Ke,8,3,"div",12),g(13,Je,8,3,"div",12),g(14,Ze,8,3,"div",12),g(15,et,8,3,"div",12),g(16,tt,8,3,"div",12),g(17,nt,8,3,"div",12),l()()}if(i&2){let e=d(2);r(2),L(e.sections()),r(2),O("copied",e.copySuccess()),r(2),S(" ",e.copySuccess()?"check_circle":"content_copy"," "),r(),S(" ",e.copySuccess()?"Copied!":"Copy"," "),r(2),u(e.isSectionEnabled("config")?9:-1),r(),u(e.isSectionEnabled("season")?10:-1),r(),u(e.isSectionEnabled("classes")?11:-1),r(),u(e.isSectionEnabled("registration")?12:-1),r(),u(e.isSectionEnabled("order")?13:-1),r(),u(e.isSectionEnabled("profile")?14:-1),r(),u(e.isSectionEnabled("pricing")?15:-1),r(),u(e.isSectionEnabled("enrollment")?16:-1),r(),u(e.isSectionEnabled("waitlist")?17:-1)}}function ot(i,t){if(i&1){let e=y();c(0,"div",1)(1,"button",2),b("click",function(){_(e);let o=d();return v(o.toggleCollapse())}),c(2,"span",3),a(3,"bug_report"),l(),c(4,"span",4),a(5,"Debug Panel"),l(),c(6,"span",5),a(7),l()(),g(8,it,18,13,"div",6),l()}if(i&2){let e=d();O("collapsed",e.isCollapsed()),r(7),x(e.isCollapsed()?"\u25B2":"\u25BC"),r(),u(e.isCollapsed()?-1:8)}}var at=!1,J=class i{configService=f($);seasonService=f(ze);registrationService=f(Ve);orderService=f(Re);userService=f(G);isCollapsed=C(!0);copySuccess=C(!1);_sections=C([{id:"config",label:"Config",enabled:!1},{id:"season",label:"Season",enabled:!0},{id:"classes",label:"Classes",enabled:!1},{id:"registration",label:"Registration",enabled:!0},{id:"order",label:"Order",enabled:!0},{id:"profile",label:"Profile",enabled:!1},{id:"pricing",label:"Pricing",enabled:!1},{id:"enrollment",label:"Enrollment",enabled:!1},{id:"waitlist",label:"Waitlist",enabled:!1}]);sections=this._sections.asReadonly();isDevMode=h(()=>at);configData=h(()=>{let t=this.configService.config();return{activeYear:2026,currentDate:t.currentDate,currentTime:t.currentTime,systemSwitch:t.systemSwitch}});seasonData=h(()=>{let t=this.seasonService.selectedSeason();return t?{id:t.id,name:t.name,year:t.year,isActive:t.isActive,siblingDiscountPerWeek:t.siblingDiscountPerWeek,multiSessionDiscounts:t.multiSessionDiscounts,refundProcessingFee:t.deprecatedRefundProcessingFee}:null});classesData=h(()=>this.seasonService.classes().map(e=>({id:e.id,name:e.name,startDate:e.startDate,endDate:e.endDate,capacity:e.capacity,enrolledCount:this.registrationService.getEnrolledCount(e.id),basePrice:e.basePrice,isActive:e.isActive})));registrationData=h(()=>{let t=this.orderService.registration();return t?{seasonId:t.seasonId,classes:t.classes}:null});orderData=h(()=>{let t=this.orderService.order();return t?{userId:t.userDisplayId,seasonId:t.seasonId,itemCount:t.items?.length??0,items:t.items?.map(e=>({sessionId:e.sessionId,studentId:e.studentId,status:e.status,options:e.options})),totalPaid:t.totalPaid,lockExpiresAt:t.lockExpiresAt,waitlistCount:t.waitlist?.length??0}:null});profileData=h(()=>{let t=this.userService.currentUser();return t?{uid:t.uid,email:t.email,displayId:t.displayId,studentCount:t.students?.length??0,students:t.students?.map(e=>({id:e.id,name:`${e.firstName} ${e.lastName}`.trim(),dob:e.dob,gender:e.gender})),isProfileComplete:this.userService.isProfileComplete()}:null});pricingData=h(()=>{let t=this.orderService.pricing();return{order:t?{subtotal:t.subtotal,discounts:t.discounts,total:this.orderService.totalDue(),amountDue:this.orderService.amountDue(),totalPaid:this.orderService.totalPaid()}:null}});enrollmentData=h(()=>this.registrationService.classesWithEnrollment().map(e=>({id:e.id,name:e.name,capacity:e.capacity,enrolled:e.enrolledCount,available:e.available,status:this.registrationService.getEnrollmentStatus(e),canEnroll:e.available>0})));waitlistData=h(()=>this.orderService.waitlistEntries().map(e=>({sessionId:e.sessionId,joinedAt:e.joinedAt})));toggleCollapse(){this.isCollapsed.update(t=>!t)}toggleSection(t){this._sections.update(e=>e.map(n=>n.id===t?fe(ue({},n),{enabled:!n.enabled}):n))}isSectionEnabled(t){return this._sections().find(e=>e.id===t)?.enabled??!1}async copyToClipboard(){let t=this._sections().filter(o=>o.enabled),e={config:()=>this.configData(),season:()=>this.seasonData(),classes:()=>this.classesData(),registration:()=>this.registrationData(),order:()=>this.orderData(),profile:()=>this.profileData(),pricing:()=>this.pricingData(),enrollment:()=>this.enrollmentData(),waitlist:()=>this.waitlistData()},n={};for(let o of t){let s=e[o.id];s&&(n[o.id]=s())}try{await navigator.clipboard.writeText(JSON.stringify(n,null,2)),this.copySuccess.set(!0),setTimeout(()=>this.copySuccess.set(!1),2e3)}catch(o){console.error("Failed to copy to clipboard:",o)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-debug-panel"]],decls:1,vars:1,consts:[[1,"debug-panel",3,"collapsed"],[1,"debug-panel"],[1,"toggle-bar",3,"click"],["aria-hidden","true",1,"toggle-icon","material-symbols-rounded"],[1,"toggle-label"],[1,"toggle-arrow"],[1,"panel-content"],[1,"section-toggles"],[1,"toggle-checkbox"],[1,"copy-btn",3,"click"],["aria-hidden","true",1,"material-symbols-rounded","copy-icon"],[1,"data-sections"],[1,"data-section"],["type","checkbox",3,"change","checked"],[1,"checkbox-label"],[1,"section-header"],["aria-hidden","true",1,"section-icon","material-symbols-rounded"],[1,"data-content"]],template:function(e,n){e&1&&g(0,ot,9,4,"div",0),e&2&&u(n.isDevMode()?0:-1)},dependencies:[T,Se],styles:[".debug-panel[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#1e1e1e;color:#d4d4d4;font-family:Fira Code,Consolas,monospace;font-size:12px;z-index:9999;max-height:50vh;overflow:hidden;display:flex;flex-direction:column;border-top:2px solid #007acc}.debug-panel.collapsed[_ngcontent-%COMP%]{max-height:36px}.toggle-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#252526;border:none;color:#d4d4d4;cursor:pointer;font-size:12px;font-family:inherit;text-align:left;flex-shrink:0}.toggle-bar[_ngcontent-%COMP%]:hover{background:#2d2d2d}.toggle-icon[_ngcontent-%COMP%]{font-size:16px}.toggle-label[_ngcontent-%COMP%]{font-weight:600;flex:1}.toggle-arrow[_ngcontent-%COMP%]{font-size:10px;opacity:.7}.panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px 16px}.section-toggles[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;padding-bottom:12px;border-bottom:1px solid #3c3c3c;margin-bottom:12px;align-items:center}.copy-btn[_ngcontent-%COMP%]{margin-left:auto;padding:4px 12px;background:#0e639c;border:none;border-radius:4px;color:#fff;font-size:12px;font-family:inherit;cursor:pointer;transition:background .2s ease;display:inline-flex;align-items:center;gap:6px}.copy-btn[_ngcontent-%COMP%]:hover{background:#17b}.copy-btn.copied[_ngcontent-%COMP%]{background:#388a34}.toggle-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;cursor:pointer;-webkit-user-select:none;user-select:none}.toggle-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:#007acc}.checkbox-label[_ngcontent-%COMP%]{color:#9cdcfe}.data-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.data-section[_ngcontent-%COMP%]{background:#252526;border-radius:4px;overflow:hidden}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;padding:8px 12px;background:#333;font-size:12px;font-weight:600;color:#4ec9b0}.section-icon[_ngcontent-%COMP%]{font-size:16px}.copy-icon[_ngcontent-%COMP%]{font-size:16px;line-height:1}.data-content[_ngcontent-%COMP%]{margin:0;padding:12px;overflow-x:auto;white-space:pre-wrap;word-break:break-word;max-height:300px;overflow-y:auto;color:#ce9178}"]})};var N=class i{_panelWidth=C(400);_isPanelCollapsed=C(!1);_activeTab=C("common-tools");_isExecuting=C(!1);_currentOperation=C(null);_executionLog=C([]);_lastResult=C(null);panelWidth=this._panelWidth.asReadonly();isPanelCollapsed=this._isPanelCollapsed.asReadonly();activeTab=this._activeTab.asReadonly();isExecuting=this._isExecuting.asReadonly();currentOperation=this._currentOperation.asReadonly();executionLog=this._executionLog.asReadonly();lastResult=this._lastResult.asReadonly();isTestingMode=h(()=>this.checkIfEmulatorMode());constructor(){let t=localStorage.getItem("testing-panel-width");if(t){let e=parseInt(t,10);isNaN(e)||this._panelWidth.set(e)}}setPanelWidth(t){let e=Math.max(300,Math.min(t,window.innerWidth/2));this._panelWidth.set(e),localStorage.setItem("testing-panel-width",e.toString())}togglePanel(){this._isPanelCollapsed.update(t=>!t)}collapsePanel(){this._isPanelCollapsed.set(!0)}expandPanel(){this._isPanelCollapsed.set(!1)}setActiveTab(t){this._activeTab.set(t)}startOperation(t){this._isExecuting.set(!0),this._currentOperation.set(t),this._lastResult.set(null),this.addLogEntry({type:"info",message:`Started: ${t}`,timestamp:new Date})}completeOperation(t,e){this._isExecuting.set(!1),this._currentOperation.set(null),this._lastResult.set({success:t,message:e}),this.addLogEntry({type:t?"success":"error",message:e,timestamp:new Date})}addLogEntry(t){this._executionLog.update(e=>{let n=[...e,t];return n.length>50&&n.shift(),n})}clearLog(){this._executionLog.set([])}checkIfEmulatorMode(){try{return Ae().config.emulator?.url?.includes("localhost")??!1}catch{return!1}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var Z=class i{functions=f(Le);_loading=C(!1);_error=C(null);loading=this._loading.asReadonly();error=this._error.asReadonly();async resetDatabase(){return this.wrapCall("testingResetDatabase",{})}async seedTestData(){return this.wrapCall("testingSeedTestData",{})}async executeSimplifiedScenario(t){return this.wrapCall("testingExecuteSimplifiedScenario",t)}async executeMidTestAction(t){return this.wrapCall("testingExecuteMidTestAction",t)}clearError(){this._error.set(null)}async wrapCall(t,e){this._loading.set(!0),this._error.set(null);try{return await this.functions.call(t,e)}catch(n){let o=n instanceof Error?n.message:String(n);throw this._error.set(o),n}finally{this._loading.set(!1)}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var ee=class i{testingRpc=f(Z);helperService=f(N);router=f(Y);configService=f($);async resetDatabase(){this.helperService.startOperation("Resetting database");try{let t=await this.testingRpc.resetDatabase();this.helperService.completeOperation(!0,`Success: ${t.message}`)}catch(t){let e=t instanceof Error?t.message:String(t);throw this.helperService.completeOperation(!1,`Reset failed: ${e}`),t}}async seedTestData(){this.helperService.startOperation("Seeding test data");try{let t=await this.testingRpc.seedTestData();this.helperService.completeOperation(!0,`Seeded: ${t.createdData.classes.length} classes, ${t.createdData.users.length} users`)}catch(t){let e=t instanceof Error?t.message:String(t);throw this.helperService.completeOperation(!1,`Seed failed: ${e}`),t}}async executeSimplifiedScenario(t,e,n){this.helperService.startOperation(`Executing ${t}: ${e}`);try{let o={scenario:n},s=await this.testingRpc.executeSimplifiedScenario(o);await this.configService.fetchConfig(),s.loginAs&&await this.signInTestUser(s.loginAs.email,s.loginAs.password),s.navigateTo&&await this.router.navigateByUrl(s.navigateTo),this.helperService.completeOperation(!0,`Success: ${s.message}`)}catch(o){let s=o instanceof Error?o.message:String(o);throw this.helperService.completeOperation(!1,`Scenario failed: ${s}`),o}}async executeMidTestAction(t){this.helperService.startOperation(`Executing: ${t.label}`);try{let e={action:t.action,targetClass:t.targetClass},n=await this.testingRpc.executeMidTestAction(e);this.helperService.completeOperation(!0,`Success: ${n.message}`)}catch(e){let n=e instanceof Error?e.message:String(e);throw this.helperService.completeOperation(!1,`Action failed: ${n}`),e}}async executeOperation(t,e){this.helperService.startOperation(t);try{let n=await e();return this.helperService.completeOperation(!0,`${t} completed`),n}catch(n){let o=n instanceof Error?n.message:String(n);return this.helperService.completeOperation(!1,`${o}`),console.error(`Testing Helper Error (${t}):`,n),null}}async signInTestUser(t,e){try{await Q(K,t,e),console.log(`Signed in as ${t}`)}catch(n){throw console.error("Failed to sign in test user:",n),n}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})};var te=class i{testExecution=f(ee);helperService=f(N);isExecuting=this.helperService.isExecuting;async quickLogin(t,e){this.helperService.startOperation(`Logging in as ${e}`);try{await Q(K,t,"testpassword123"),this.helperService.completeOperation(!0,`Logged in as ${e} (${t})`)}catch(n){let o=n instanceof Error?n.message:String(n);this.helperService.completeOperation(!1,`Login failed: ${o}`),console.error("Quick login failed:",n)}}async resetDatabase(){try{await this.testExecution.resetDatabase()}catch(t){console.error("Reset database failed:",t)}}async seedTestData(){try{await this.testExecution.seedTestData()}catch(t){console.error("Seed test data failed:",t)}}fillFormWithRandomValues(){this.helperService.startOperation("Filling form fields...");try{let t=0;document.querySelectorAll("main input, main select, main textarea, .content input, .content select, .content textarea, app-root input, app-root select, app-root textarea").forEach(n=>{if(n.type==="hidden"||n.disabled||n.readOnly||n.closest(".testing-helper-panel"))return;let s=this.getLabelForInput(n).toLowerCase(),M=this.generateValueForField(n,s);M!==null&&(this.setInputValue(n,M),t++)}),this.helperService.completeOperation(!0,`Filled ${t} form fields`)}catch(t){let e=t instanceof Error?t.message:String(t);this.helperService.completeOperation(!1,`Fill failed: ${e}`)}}getLabelForInput(t){if(t.getAttribute("aria-label"))return t.getAttribute("aria-label")||"";if(t.id){let n=document.querySelector(`label[for="${t.id}"]`);if(n)return n.textContent?.trim()||""}let e=t.closest("label");return e?e.textContent?.trim()||"":"placeholder"in t&&t.placeholder?t.placeholder:t.name?t.name.replace(/([A-Z])/g," $1").trim():""}generateValueForField(t,e){let n=t.type||t.tagName.toLowerCase();if(t.tagName==="SELECT"){let s=Array.from(t.options).filter(M=>M.value&&!M.disabled);if(s.length>0){let M=Math.floor(Math.random()*s.length);return s[M].value}return null}if(n==="checkbox")return Math.random()>.5?"true":"false";if(n==="date"||e.includes("date")||e.includes("birth")||e.includes("dob")){let o=new Date,s=5+Math.floor(Math.random()*8),M=o.getFullYear()-s,V=Math.floor(Math.random()*12)+1,F=Math.floor(Math.random()*28)+1;return`${M}-${String(V).padStart(2,"0")}-${String(F).padStart(2,"0")}`}if(n==="email"||e.includes("email"))return`testuser${Math.floor(Math.random()*1e4)}@example.com`;if(n==="tel"||e.includes("phone")||e.includes("tel")){let o=Math.floor(Math.random()*900)+100,s=Math.floor(Math.random()*900)+100,M=Math.floor(Math.random()*9e3)+1e3;return`(${o}) ${s}-${M}`}if(e.includes("name")||e.includes("\u59D3\u540D")){let o=["Emma","Liam","Olivia","Noah","Ava","Ethan","Sophia","Mason"],s=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller"],M=o[Math.floor(Math.random()*o.length)],V=s[Math.floor(Math.random()*s.length)];return`${M} ${V}`}if(e.includes("street")||e.includes("address")){let o=Math.floor(Math.random()*9e3)+100,s=["Main St","Oak Ave","Park Blvd","Elm St","Cedar Ln","Maple Dr"];return`${o} ${s[Math.floor(Math.random()*s.length)]}`}if(e.includes("city")){let o=["San Francisco","Los Angeles","San Jose","Oakland","Palo Alto","Sunnyvale"];return o[Math.floor(Math.random()*o.length)]}if(e.includes("state"))return"CA";if(e.includes("zip")||e.includes("postal"))return String(9e4+Math.floor(Math.random()*1e4));if(e.includes("allerg")){let o=["None","Peanuts","Dairy","Gluten","Shellfish"];return o[Math.floor(Math.random()*o.length)]}if(e.includes("relationship")){let o=["Parent","Guardian","Grandparent","Aunt","Uncle"];return o[Math.floor(Math.random()*o.length)]}if(e.includes("wechat")||e.includes("\u5FAE\u4FE1"))return`wx_user_${Math.floor(Math.random()*1e4)}`;if(e.includes("note")||e.includes("comment")||e.includes("\u5907\u6CE8"))return"Test notes - generated by testing helper";if(n==="text"||n==="textarea")return`Test Value ${Math.floor(Math.random()*1e3)}`;if(n==="number"){let o=parseFloat(t.min)||1,s=parseFloat(t.max)||100;return String(Math.floor(Math.random()*(s-o+1))+o)}return null}setInputValue(t,e){t.type==="checkbox"?t.checked=e==="true":t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),t.dispatchEvent(new Event("blur",{bubbles:!0}))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-common-tools-section"]],hostAttrs:[2,"display","flex","flex-direction","column","height","100%","overflow","hidden"],decls:43,vars:6,consts:[[1,"common-tools-section",2,"display","flex","flex-direction","column","height","100%","overflow","hidden"],[1,"sticky-toolbar"],[1,"tool-btn","fill-btn","primary-action",3,"click"],["aria-hidden","true",1,"material-symbols-rounded","tool-icon"],[1,"tool-hint"],[1,"scrollable-content"],[1,"tool-group"],[1,"section-header"],[1,"tool-group-content"],[1,"tool-btn","login-btn",3,"click","disabled"],[1,"tool-btn","login-btn","admin-btn",3,"click","disabled"],[1,"tool-btn","reset-btn",3,"click","disabled"],[1,"tool-btn","seed-btn",3,"click","disabled"]],template:function(e,n){e&1&&(c(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.fillFormWithRandomValues()}),c(3,"span",3),a(4,"casino"),l(),a(5," Fill Form with Random Values "),l(),c(6,"p",4),a(7,"Auto-fills all visible form fields based on labels"),l()(),c(8,"div",5)(9,"section",6)(10,"h3",7),a(11,"Quick Login (Predefined Users)"),l(),c(12,"div",8)(13,"button",9),b("click",function(){return n.quickLogin("xx@gmail.com","XX User")}),c(14,"span",3),a(15,"person"),l(),a(16," Login as XX User "),l(),c(17,"button",9),b("click",function(){return n.quickLogin("yy@gmail.com","YY User")}),c(18,"span",3),a(19,"person"),l(),a(20," Login as YY User "),l(),c(21,"button",9),b("click",function(){return n.quickLogin("zz@gmail.com","ZZ User")}),c(22,"span",3),a(23,"person"),l(),a(24," Login as ZZ User "),l(),c(25,"button",10),b("click",function(){return n.quickLogin("cambrianexplorer@gmail.com","Admin")}),c(26,"span",3),a(27,"admin_panel_settings"),l(),a(28," Login as Admin "),l(),c(29,"p",4),a(30,"Password: testpassword123 for all users"),l()()(),c(31,"section",6)(32,"h3",7),a(33,"Database Operations"),l(),c(34,"div",8)(35,"button",11),b("click",function(){return n.resetDatabase()}),c(36,"span",3),a(37,"delete"),l(),a(38," Reset Database "),l(),c(39,"button",12),b("click",function(){return n.seedTestData()}),c(40,"span",3),a(41,"eco"),l(),a(42," Seed Test Data "),l()()()()()),e&2&&(r(13),k("disabled",n.isExecuting()),r(4),k("disabled",n.isExecuting()),r(4),k("disabled",n.isExecuting()),r(4),k("disabled",n.isExecuting()),r(10),k("disabled",n.isExecuting()),r(4),k("disabled",n.isExecuting()))},dependencies:[T,He],styles:[".common-tools-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.sticky-toolbar[_ngcontent-%COMP%]{flex-shrink:0;z-index:10;background:#1e1e1e;padding:12px 16px;border-bottom:1px solid #333}.sticky-toolbar[_ngcontent-%COMP%]   .primary-action[_ngcontent-%COMP%]{background:#9c27b0!important;border-color:#9c27b0!important;color:#fff!important;font-weight:600}.sticky-toolbar[_ngcontent-%COMP%]   .primary-action[_ngcontent-%COMP%]:hover:not(:disabled){background:#7b1fa2!important}.sticky-toolbar[_ngcontent-%COMP%]   .tool-hint[_ngcontent-%COMP%]{margin-top:6px}.scrollable-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.tool-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;padding:0 16px}.section-header[_ngcontent-%COMP%]{background:#1e1e1e;padding:8px 16px;margin:0 -16px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#858585;border-bottom:1px solid #333}.tool-group-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px 0}.tool-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:10px 12px;background:#2d2d30;border:1px solid #3e3e42;color:#ccc;cursor:pointer;font-size:13px;border-radius:4px;text-align:left;transition:all .2s}.tool-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3e3e42;border-color:#007acc}.tool-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#007acc;color:#fff}.tool-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.tool-btn.reset-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#f44336}.tool-btn.seed-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#4caf50}.tool-btn.fill-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9c27b0}.tool-icon[_ngcontent-%COMP%]{font-size:16px;line-height:1}.tool-hint[_ngcontent-%COMP%]{font-size:11px;color:#858585;margin:4px 0 0;font-style:italic}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:10000}.dialog[_ngcontent-%COMP%]{background:#2d2d30;border:1px solid #3e3e42;border-radius:6px;padding:20px;min-width:400px;max-width:500px;box-shadow:0 4px 12px #00000080}.dialog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#ccc}.dialog[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#ccc;font-weight:500}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{padding:8px 10px;background:#1e1e1e;border:1px solid #3e3e42;color:#ccc;font-size:13px;border-radius:4px;outline:none}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus{border-color:#007acc}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:6px}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background:#2d2d30;border:1px solid #3e3e42;color:#ccc;cursor:pointer;font-size:13px;border-radius:4px;transition:all .2s}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#3e3e42}.dialog-actions[_ngcontent-%COMP%]   button.primary[_ngcontent-%COMP%]{background:#007acc;border-color:#007acc;color:#fff}.dialog-actions[_ngcontent-%COMP%]   button.primary[_ngcontent-%COMP%]:hover{background:#005a9e}"]})};function rt(i,t){if(i&1&&(m(0,"div",6),w(1,"span",9),m(2,"span",10),a(3),p()()),i&2){let e=d();r(3),x(e.currentOperation())}}function st(i,t){if(i&1&&(m(0,"div",11),a(1),p()),i&2){let e=t;O("success",e.success)("error",!e.success),r(),S(" ",e.message," ")}}function lt(i,t){i&1&&(m(0,"div",8),a(1," Ready "),p())}var ne=class i{helperService=f(N);isExecuting=this.helperService.isExecuting;currentOperation=this.helperService.currentOperation;lastResult=this.helperService.lastResult;togglePanel(){this.helperService.togglePanel()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-testing-helper-panel"]],hostAttrs:[2,"display","flex","flex-direction","column","flex","1","min-height","0","overflow","hidden"],decls:14,vars:1,consts:[[1,"testing-helper-panel"],[1,"panel-header"],["aria-hidden","true",1,"material-symbols-rounded","icon-inline"],["title","Collapse panel",1,"collapse-btn",3,"click"],[1,"panel-content"],[1,"status-bar"],[1,"status-executing"],[1,"status-result",3,"success","error"],[1,"status-idle"],[1,"spinner"],[1,"status-text"],[1,"status-result"]],template:function(e,n){if(e&1&&(m(0,"div",0)(1,"header",1)(2,"h2")(3,"span",2),a(4,"science"),p(),a(5," Testing Helper "),p(),m(6,"button",3),P("click",function(){return n.togglePanel()}),a(7," \u2190 "),p()(),m(8,"div",4),w(9,"app-common-tools-section"),p(),m(10,"footer",5),g(11,rt,4,1,"div",6)(12,st,2,5,"div",7)(13,lt,2,0,"div",8),p()()),e&2){let o;r(11),u(n.isExecuting()?11:(o=n.lastResult())?12:13,o)}},dependencies:[T,te],styles:[".testing-helper-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#252526;border-bottom:1px solid #333;flex-shrink:0}.panel-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#ccc}.panel-header[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#ccc;cursor:pointer;padding:4px 8px;font-size:16px;border-radius:4px;transition:background .2s}.panel-header[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]:hover{background:#3e3e42}.panel-header[_ngcontent-%COMP%]   .collapse-btn[_ngcontent-%COMP%]:active{background:#4e4e52}.panel-content[_ngcontent-%COMP%]{flex:1;overflow:hidden;padding:0;min-height:0;display:flex;flex-direction:column}.status-bar[_ngcontent-%COMP%]{flex-shrink:0;padding:10px 16px;background:#252526;border-top:1px solid #333;font-size:12px;min-height:40px;display:flex;align-items:center}.status-executing[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#007acc}.status-executing[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid rgba(0,122,204,.3);border-top-color:#007acc;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.status-executing[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1}.status-result[_ngcontent-%COMP%]{width:100%}.status-result.success[_ngcontent-%COMP%]{color:#4caf50}.status-result.error[_ngcontent-%COMP%]{color:#f44336}.status-idle[_ngcontent-%COMP%]{color:#858585}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var ct=["*"];function dt(i,t){if(i&1){let e=y();m(0,"aside",2),w(1,"app-testing-helper-panel"),p(),m(2,"div",3),P("mousedown",function(o){_(e);let s=d();return v(s.startResize(o))}),p()}if(i&2){let e=d();O("collapsed",e.isPanelCollapsed()),r(2),O("active",e.isResizing())}}var ie=class i{helperService=f(N);isTestingMode=this.helperService.isTestingMode;panelWidth=this.helperService.panelWidth;isPanelCollapsed=this.helperService.isPanelCollapsed;isResizing=C(!1);resizeStartX=0;resizeStartWidth=0;effectivePanelWidth=h(()=>{let t=this.isPanelCollapsed(),e=this.panelWidth();return t?0:e});gridTemplateColumns=h(()=>this.isTestingMode()?`${this.effectivePanelWidth()}px 8px 1fr`:"1fr");startResize(t){t.preventDefault(),this.isResizing.set(!0),this.resizeStartX=t.clientX,this.resizeStartWidth=this.panelWidth()}onMouseMove(t){if(!this.isResizing())return;let e=t.clientX-this.resizeStartX,n=this.resizeStartWidth+e;this.helperService.setPanelWidth(n)}onMouseUp(){this.isResizing()&&this.isResizing.set(!1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-testing-helper-layout"]],hostBindings:function(e,n){e&1&&P("mousemove",function(s){return n.onMouseMove(s)},A)("mouseup",function(){return n.onMouseUp()},A)},ngContentSelectors:ct,decls:4,vars:5,consts:[[1,"testing-layout"],[1,"main-content"],[1,"testing-panel"],[1,"resize-handle",3,"mousedown"]],template:function(e,n){e&1&&(ye(),m(0,"div",0),g(1,dt,3,4),m(2,"main",1),Me(3),p()()),e&2&&(Ee("grid-template-columns",n.gridTemplateColumns()),O("testing-mode",n.isTestingMode()),r(),u(n.isTestingMode()?1:-1))},dependencies:[T,ne],styles:['@charset "UTF-8";.testing-layout[_ngcontent-%COMP%]{display:grid;width:100%;min-height:100vh}.testing-layout[_ngcontent-%COMP%]:not(.testing-mode){grid-template-columns:1fr}.testing-layout.testing-mode[_ngcontent-%COMP%]{height:100vh;overflow:hidden}.testing-panel[_ngcontent-%COMP%]{background:#1e1e1e;color:#d4d4d4;overflow:hidden;display:flex;flex-direction:column;transition:width .2s ease;border-right:1px solid #333}.testing-panel.collapsed[_ngcontent-%COMP%]{width:0!important;min-width:0!important;overflow:hidden;border-right:none}.testing-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.testing-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1e1e1e}.testing-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.testing-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#777}.resize-handle[_ngcontent-%COMP%]{background:#2d2d30;border-left:1px solid #3e3e42;border-right:1px solid #3e3e42;cursor:col-resize;transition:all .2s;position:relative;-webkit-user-select:none;user-select:none}.resize-handle[_ngcontent-%COMP%]:hover, .resize-handle.active[_ngcontent-%COMP%]{background:#3a3a3d;border-left-color:#007acc;border-right-color:#007acc}.resize-handle[_ngcontent-%COMP%]:before{content:"\\22ee";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#858585;font-size:18px;font-weight:700;line-height:1;pointer-events:none}.resize-handle[_ngcontent-%COMP%]:hover:before, .resize-handle.active[_ngcontent-%COMP%]:before{color:#007acc}.main-content[_ngcontent-%COMP%]{overflow-y:auto;background:#fff;min-width:0}.testing-layout[_ngcontent-%COMP%]:not(.testing-mode)   .main-content[_ngcontent-%COMP%]{overflow-y:visible;min-height:100vh}']})};function pt(i,t){if(i&1){let e=y();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),a(4,"person"),l(),c(5,"span",5),a(6,"Viewing as:"),l(),c(7,"span",6),a(8),l()(),c(9,"div",7)(10,"label",8)(11,"input",9),b("change",function(){_(e);let o=d();return v(o.onToggleAdminBypass())}),l(),c(12,"span",10),a(13,"Admin Bypass"),l()(),c(14,"button",11),b("click",function(){_(e);let o=d();return v(o.onExitClick())}),a(15," Exit Impersonation "),l()()()()}if(i&2){let e=d();O("bypass-mode",e.isBypassMode()),r(8),x(e.impersonatedEmail()),r(3),k("checked",e.adminBypassEnabled())}}var oe=class i{impersonationService=f(X);isVisible=h(()=>this.impersonationService.isImpersonating());impersonatedEmail=h(()=>this.impersonationService.impersonatedUser()?.email??"");adminBypassEnabled=h(()=>this.impersonationService.adminBypassEnabled());isBypassMode=h(()=>this.impersonationService.adminBypassEnabled());onExitClick(){this.impersonationService.stopImpersonation()}onToggleAdminBypass(){this.impersonationService.toggleAdminBypass()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-impersonation-banner"]],decls:1,vars:1,consts:[[1,"impersonation-banner",3,"bypass-mode"],[1,"impersonation-banner"],[1,"impersonation-banner-content"],[1,"impersonation-info"],["aria-hidden","true",1,"impersonation-icon","material-symbols-rounded"],[1,"impersonation-label"],[1,"impersonation-email"],[1,"impersonation-controls"],[1,"bypass-toggle"],["type","checkbox",3,"change","checked"],[1,"toggle-label"],["aria-label","Exit impersonation",1,"exit-btn",3,"click"]],template:function(e,n){e&1&&g(0,pt,16,4,"div",0),e&2&&u(n.isVisible()?0:-1)},dependencies:[T],styles:[".impersonation-banner[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:48px;background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;z-index:10000;box-shadow:0 2px 8px #00000026;font-family:system-ui,-apple-system,sans-serif}.impersonation-banner.bypass-mode[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c)}.impersonation-banner-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;height:100%;display:flex;align-items:center;justify-content:space-between;padding:0 16px;gap:16px}.impersonation-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.impersonation-icon[_ngcontent-%COMP%]{font-size:18px}.impersonation-label[_ngcontent-%COMP%]{font-size:13px;opacity:.9}.impersonation-email[_ngcontent-%COMP%]{font-size:14px;font-weight:600;background:#fff3;padding:2px 10px;border-radius:4px}.impersonation-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.bypass-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px}.bypass-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.toggle-label[_ngcontent-%COMP%]{white-space:nowrap}.exit-btn[_ngcontent-%COMP%]{padding:6px 14px;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s ease;background:#fff3;color:#fff}.exit-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}@media(max-width:600px){.impersonation-label[_ngcontent-%COMP%], .toggle-label[_ngcontent-%COMP%]{display:none}}"]})};var mt=(i,t)=>t.id;function gt(i,t){if(i&1){let e=y();c(0,"div",2),b("click",function(){let o=_(e).$implicit,s=d();return v(s.notificationService.dismiss(o.id))}),c(1,"span",3),a(2),l(),c(3,"span",4),a(4),l(),c(5,"button",5),b("click",function(o){let s=_(e).$implicit;return d().notificationService.dismiss(s.id),v(o.stopPropagation())}),c(6,"span",6),a(7,"close"),l()()()}if(i&2){let e=t.$implicit,n=d();U(W("notification notification-",e.type)),r(2),S(" ",n.getIcon(e.type)," "),r(2),x(e.message)}}var ae=class i{notificationService=f($e);getIcon(t){switch(t){case"info":return"info";case"success":return"check_circle";case"warning":return"warning";case"error":return"error"}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-notification-container"]],decls:3,vars:0,consts:[[1,"notification-container"],["role","alert",3,"class"],["role","alert",3,"click"],["aria-hidden","true",1,"notification-icon","material-symbols-rounded"],[1,"notification-message"],["aria-label","Dismiss",1,"notification-close",3,"click"],["aria-hidden","true",1,"material-symbols-rounded"]],template:function(e,n){e&1&&(c(0,"div",0),I(1,gt,8,5,"div",1,mt),l()),e&2&&(r(),L(n.notificationService.notifications()))},styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;z-index:10000;display:flex;flex-direction:column;gap:8px;max-width:400px;pointer-events:none}.notification[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #00000026;cursor:pointer;pointer-events:auto;animation:_ngcontent-%COMP%_slideIn .2s ease-out;font-size:14px;line-height:1.4}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.notification[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0003}.notification-info[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.notification-success[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.notification-warning[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.notification-error[_ngcontent-%COMP%]{border-left:4px solid #f44336}.notification-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.notification-message[_ngcontent-%COMP%]{flex:1;color:#333}.notification-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#999;cursor:pointer;padding:0 4px;line-height:1;flex-shrink:0;display:grid;place-items:center}.notification-close[_ngcontent-%COMP%]:hover{color:#333}@media(max-width:480px){.notification-container[_ngcontent-%COMP%]{left:16px;right:16px;max-width:none}}"]})};function ut(i,t){if(i&1){let e=y();c(0,"div",3)(1,"h3",4),a(2),l()(),c(3,"div",5)(4,"p",6),a(5),l()(),c(6,"div",7)(7,"button",8),b("click",function(){_(e);let o=d(2);return v(o.onCancel())}),a(8),l(),c(9,"button",9),b("click",function(){_(e);let o=d(2);return v(o.onConfirm())}),a(10),l()()}if(i&2){let e=t;r(2),x(e.title),r(3),x(e.message),r(3),S(" ",e.cancelText," "),r(),U(W("dialog-button dialog-button-",e.confirmButtonClass)),r(),S(" ",e.confirmText," ")}}function ft(i,t){if(i&1){let e=y();c(0,"div",1),b("click",function(o){_(e);let s=d();return v(s.onOverlayClick(o))}),c(1,"div",2),g(2,ut,11,7),l()()}if(i&2){let e,n=d();r(2),u((e=n.dialogService.options())?2:-1,e)}}var re=class i{dialogService=f(Be);onEscape(){this.dialogService.isOpen()&&this.onCancel()}onEnter(){this.dialogService.isOpen()&&this.onConfirm()}onOverlayClick(t){}onConfirm(){this.dialogService.respond(!0)}onCancel(){this.dialogService.respond(!1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-confirm-dialog"]],hostBindings:function(e,n){e&1&&P("keydown.escape",function(){return n.onEscape()},A)("keydown.enter",function(){return n.onEnter()},A)},decls:1,vars:1,consts:[[1,"dialog-overlay"],[1,"dialog-overlay",3,"click"],["role","dialog","aria-modal","true",1,"dialog-content"],[1,"dialog-header"],[1,"dialog-title"],[1,"dialog-body"],[1,"dialog-message"],[1,"dialog-footer"],[1,"dialog-button","dialog-button-cancel",3,"click"],[3,"click"]],template:function(e,n){e&1&&g(0,ft,3,1,"div",0),e&2&&u(n.dialogService.isOpen()?0:-1)},styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10001;animation:_ngcontent-%COMP%_fadeIn .15s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.dialog-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0003;max-width:420px;width:90%;animation:_ngcontent-%COMP%_slideUp .2s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.dialog-header[_ngcontent-%COMP%]{padding:20px 24px 0}.dialog-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.dialog-body[_ngcontent-%COMP%]{padding:16px 24px}.dialog-message[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:#555;white-space:pre-wrap}.dialog-footer[_ngcontent-%COMP%]{padding:16px 24px 20px;display:flex;justify-content:flex-end;gap:12px}.dialog-button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .15s ease;border:none}.dialog-button-cancel[_ngcontent-%COMP%]{background:#f0f0f0;color:#555}.dialog-button-cancel[_ngcontent-%COMP%]:hover{background:#e0e0e0}.dialog-button-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.dialog-button-primary[_ngcontent-%COMP%]:hover{background:#1976d2}.dialog-button-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.dialog-button-danger[_ngcontent-%COMP%]:hover{background:#d32f2f}"]})};var _t=["messageList"],vt=["questionInput"],ht=(i,t)=>t.id;function xt(i,t){if(i&1&&(c(0,"div",19),a(1),l()),i&2){let e=d().$implicit;r(),S("From ",e.source)}}function Ct(i,t){if(i&1&&(c(0,"div",17)(1,"div",18),a(2),l(),g(3,xt,2,1,"div",19),l()),i&2){let e=t.$implicit;O("user",e.role==="user")("bot",e.role==="assistant"),r(2),x(e.content),r(),u(e.source?3:-1)}}function bt(i,t){if(i&1){let e=y();c(0,"button",23),b("click",function(){let o=_(e).$implicit,s=d(3);return v(s.askSuggestion(o))}),a(1),l()}if(i&2){let e=t.$implicit;r(),S(" ",e," ")}}function yt(i,t){if(i&1&&(c(0,"div",13)(1,"div",20),a(2,"Suggested topics"),l(),c(3,"div",21),I(4,bt,2,1,"button",22,be),l()()),i&2){let e=d(2);r(4),L(e.suggestions())}}function Mt(i,t){if(i&1){let e=y();c(0,"section",3)(1,"header",6)(2,"div")(3,"div",7),a(4,"Berrybot"),l(),c(5,"div",8),a(6,"Answers from this page only"),l()(),c(7,"button",9),b("click",function(){_(e);let o=d();return v(o.close())}),c(8,"span",10),a(9,"close"),l()()(),c(10,"div",11,0),I(12,Ct,4,6,"div",12,ht),l(),g(14,yt,6,0,"div",13),c(15,"form",14),b("submit",function(o){_(e);let s=d();return v(s.submitQuestion(o))}),c(16,"textarea",15,1),b("input",function(o){_(e);let s=d();return v(s.onQuestionInput(o))})("keydown",function(o){_(e);let s=d();return v(s.onQuestionKeydown(o))}),l(),c(18,"button",16),a(19," Send "),l()()()}if(i&2){let e=d();r(12),L(e.messages()),r(2),u(e.suggestions().length>0?14:-1),r(2),k("value",e.question()),r(2),k("disabled",!e.canSend())}}var se=class i{document=f(he);messageId=C(0);messageList;questionInput;isOpen=C(!1);question=C("");messages=C([]);suggestions=C([]);sections=C([]);canSend=h(()=>this.question().trim().length>0);stopWords=new Set(["the","and","for","with","from","this","that","what","when","where","which","who","how","can","could","should","would","about","tell","me","you","your","our","are","is","was","were","be","to","in","on","of","a","an","as","at","by","it","we","i","please","info","information","details"]);constructor(){xe(()=>{this.messages(),queueMicrotask(()=>this.scrollToBottom())})}toggle(){this.isOpen.update(t=>!t),this.isOpen()&&(this.refreshContext(),this.messages().length===0&&this.pushMessage("assistant","Hi! Ask me about anything explained on this page."),this.focusInput())}close(){this.isOpen.set(!1)}askSuggestion(t){let e=`Tell me about ${t}.`;this.submitQuestion(void 0,e)}onQuestionInput(t){let e=t.target;this.question.set(e.value)}onQuestionKeydown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.submitQuestion())}submitQuestion(t,e){t&&t.preventDefault();let n=(e??this.question()).trim();if(!n)return;this.pushMessage("user",n),this.question.set(""),this.refreshContext();let o=this.buildAnswer(n);this.pushMessage("assistant",o.content,o.source)}onEscape(){this.isOpen()&&this.close()}pushMessage(t,e,n){let o=this.messageId()+1;this.messageId.set(o),this.messages.update(s=>[...s,{id:o,role:t,content:e,source:n}].slice(-12))}focusInput(){queueMicrotask(()=>this.questionInput?.nativeElement.focus())}scrollToBottom(){let t=this.messageList?.nativeElement;t&&(t.scrollTop=t.scrollHeight)}refreshContext(){let t=this.document.querySelector("main")??this.document.body;if(!t){this.sections.set([]),this.suggestions.set([]);return}let e=this.extractSections(t);this.sections.set(e),this.suggestions.set(this.buildSuggestions(e))}extractSections(t){let e=Array.from(t.querySelectorAll("h1, h2, h3"));if(e.length===0){let n=this.normalizeText(t.textContent??"");return n?[{heading:"This page",text:n}]:[]}return e.map((n,o)=>{let s=e[o+1]??null,M=this.extractTextBetween(n,s,t);return{heading:this.normalizeText(n.textContent??""),text:this.normalizeText(M)}}).filter(n=>n.heading.length>0||n.text.length>0)}extractTextBetween(t,e,n){let o=this.document.createRange();if(o.setStartAfter(t),e)return o.setEndBefore(e),o.toString();let s=n.lastChild;return!s||s===t?"":(o.setEndAfter(s),o.toString())}buildSuggestions(t){return t.map(e=>e.heading).filter(e=>e.length>0).slice(0,4)}buildAnswer(t){let e=this.isChinese(t),n=this.extractKeywords(t);if(n.length===0)return{content:e?"\u8BF7\u591A\u63D0\u4F9B\u4E00\u70B9\u7EC6\u8282\uFF0C\u6211\u624D\u80FD\u5728\u9875\u9762\u91CC\u5339\u914D\u5230\u7B54\u6848\u3002":"Try asking with a few more details so I can match it to this page."};let o=this.sections();if(o.length===0)return{content:e?"\u6211\u8FD8\u6CA1\u5728\u8FD9\u4E2A\u9875\u9762\u627E\u5230\u53EF\u8BFB\u5185\u5BB9\u3002":"I could not find readable content on this page yet."};let s=this.findBestSection(o,n);if(!s)return{content:this.buildNoMatchReply(e)};let M=this.extractSnippet(s.section.text,n),V=s.section.heading||"This page";return{content:M||(e?"\u6211\u627E\u5230\u4E86\u76F8\u5173\u90E8\u5206\uFF0C\u4F46\u76EE\u524D\u5185\u5BB9\u662F\u7A7A\u7684\u3002":"I found the section, but it is empty right now."),source:V}}buildNoMatchReply(t){let e=this.suggestions();return e.length>0?t?`\u6211\u5728\u8FD9\u4E2A\u9875\u9762\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9\u3002\u53EF\u4EE5\u8BD5\u8BD5\uFF1A${e.join("\u3001")}\u3002`:`I could not find that on this page. Try asking about: ${e.join(", ")}.`:t?"\u6211\u5728\u8FD9\u4E2A\u9875\u9762\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9\u3002\u8BD5\u8BD5\u8BE2\u95EE\u9875\u9762\u4E0A\u770B\u5230\u7684\u7248\u5757\u3002":"I could not find that on this page. Try asking about a section you see here."}findBestSection(t,e){let n=null;for(let o of t){let s=this.scoreSection(o,e);(!n||s>n.score)&&(n={section:o,score:s})}return!n||n.score===0?null:n}scoreSection(t,e){let n=`${t.heading} ${t.text}`.toLowerCase(),o=0;for(let s of e)n.includes(s)&&(o+=1);return o}extractSnippet(t,e){let n=t.split(/(?<=[.!?])\s+/).map(j=>j.trim()).filter(Boolean);if(n.length===0)return t.slice(0,280);let o=n[0],s=-1;for(let j of n){let ge=this.scoreSentence(j,e);ge>s&&(s=ge,o=j)}let M=n.indexOf(o),V=n[M+1],F=V?`${o} ${V}`:o;return F.length>280?`${F.slice(0,277)}...`:F}scoreSentence(t,e){let n=t.toLowerCase(),o=0;for(let s of e)n.includes(s)&&(o+=1);return o}extractKeywords(t){let e=t.toLowerCase().split(/[^a-z0-9]+/g).map(s=>s.trim()).filter(s=>s.length>2&&!this.stopWords.has(s)),n=t.match(/\d+/g)??[],o=this.extractCjkKeywords(t);return Array.from(new Set([...e,...n,...o]))}extractCjkKeywords(t){let e=t.match(/[\u4e00-\u9fff]+/g)??[],n=[];for(let o of e){if(o.length===1){n.push(o);continue}o.length<=8&&n.push(o);for(let s=0;s<=o.length-2;s+=1)n.push(o.slice(s,s+2));for(let s=0;s<=o.length-3;s+=1)n.push(o.slice(s,s+3))}return n}isChinese(t){return/[\u4e00-\u9fff]/.test(t)}normalizeText(t){return t.replace(/\s+/g," ").trim()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-page-assistant"]],viewQuery:function(e,n){if(e&1&&Pe(_t,5)(vt,5),e&2){let o;de(o=pe())&&(n.messageList=o.first),de(o=pe())&&(n.questionInput=o.first)}},hostBindings:function(e,n){e&1&&P("keydown.escape",function(){return n.onEscape()},A)},decls:5,vars:3,consts:[["messageList",""],["questionInput",""],[1,"assistant-shell"],["aria-live","polite","aria-label","Page assistant",1,"assistant-panel"],["type","button","aria-label","Open page assistant",1,"assistant-button",3,"click"],["aria-hidden","true",1,"assistant-icon","material-symbols-rounded"],[1,"assistant-header"],[1,"assistant-title"],[1,"assistant-subtitle"],["type","button","aria-label","Close assistant",1,"assistant-close",3,"click"],["aria-hidden","true",1,"material-symbols-rounded"],[1,"assistant-messages"],[1,"assistant-message",3,"user","bot"],[1,"assistant-suggestions"],[1,"assistant-input",3,"submit"],["placeholder","Ask a question about this page...","rows","2","aria-label","Ask a question",1,"assistant-textarea",3,"input","keydown","value"],["type","submit",1,"assistant-send",3,"disabled"],[1,"assistant-message"],[1,"message-text"],[1,"message-source"],[1,"suggestions-label"],[1,"suggestions-list"],["type","button",1,"suggestion-chip"],["type","button",1,"suggestion-chip",3,"click"]],template:function(e,n){e&1&&(c(0,"div",2),g(1,Mt,20,3,"section",3),c(2,"button",4),b("click",function(){return n.toggle()}),c(3,"span",5),a(4,"robot_2"),l()()()),e&2&&(O("open",n.isOpen()),r(),u(n.isOpen()?1:-1))},dependencies:[T],styles:["[_nghost-%COMP%]{position:fixed;right:var(--space-6);bottom:calc(var(--space-6) + env(safe-area-inset-bottom));z-index:2000;pointer-events:none;font-family:var(--font-family-base)}.assistant-shell[_ngcontent-%COMP%]{position:relative;pointer-events:auto}.assistant-button[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:var(--radius-full);border:1px solid var(--sys-outline);background:var(--sys-primary);color:var(--sys-on-primary);display:grid;place-items:center;cursor:pointer;transition:transform var(--transition-base);box-shadow:0 12px 24px -16px var(--sys-outline)}.assistant-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.assistant-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.assistant-icon[_ngcontent-%COMP%]{font-size:24px;line-height:1}.assistant-panel[_ngcontent-%COMP%]{position:absolute;right:0;bottom:calc(56px + var(--space-4));width:min(360px,100vw - var(--space-8));max-height:min(520px,100vh - 200px);background:var(--color-primary-container);color:var(--color-on-primary-container);border:1px solid var(--color-outline-variant);border-radius:var(--radius-xl);display:flex;flex-direction:column;overflow:hidden;box-shadow:0 16px 32px -24px var(--sys-outline);animation:_ngcontent-%COMP%_assistant-pop var(--transition-slow)}.assistant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--space-3) var(--space-4);background:linear-gradient(135deg,var(--sys-primary),var(--sys-tertiary));color:var(--sys-on-primary)}.assistant-title[_ngcontent-%COMP%]{font-size:var(--text-lg);font-weight:700}.assistant-subtitle[_ngcontent-%COMP%]{font-size:var(--text-sm);opacity:.9}.assistant-close[_ngcontent-%COMP%]{border:none;background:transparent;color:inherit;font-size:20px;cursor:pointer;padding:var(--space-1)}.assistant-messages[_ngcontent-%COMP%]{padding:var(--space-4);display:flex;flex-direction:column;gap:var(--space-3);overflow-y:auto}.assistant-message[_ngcontent-%COMP%]{max-width:85%;padding:var(--space-3) var(--space-4);border-radius:var(--radius-lg);border:1px solid var(--sys-outline-variant);background:var(--sys-surface-variant);color:var(--sys-on-surface);align-self:flex-start}.assistant-message.user[_ngcontent-%COMP%]{align-self:flex-end;background:var(--sys-primary-container);color:var(--sys-on-primary-container);border-color:var(--sys-primary)}.message-source[_ngcontent-%COMP%]{margin-top:var(--space-2);font-size:var(--text-xs);color:var(--sys-on-surface-variant)}.assistant-suggestions[_ngcontent-%COMP%]{padding:0 var(--space-4) var(--space-3);border-top:1px solid var(--color-outline-variant);background:var(--color-primary-container)}.suggestions-label[_ngcontent-%COMP%]{font-size:var(--text-xs);color:var(--sys-on-surface-variant);margin:var(--space-3) 0 var(--space-2);text-transform:uppercase;letter-spacing:.04em}.suggestions-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-2);padding-bottom:var(--space-2)}.suggestion-chip[_ngcontent-%COMP%]{border:1px solid var(--sys-outline);background:var(--sys-surface);color:var(--sys-on-surface);padding:var(--space-1) var(--space-3);border-radius:var(--radius-full);font-size:var(--text-sm);cursor:pointer}.assistant-input[_ngcontent-%COMP%]{display:flex;gap:var(--space-2);align-items:flex-end;padding:var(--space-3) var(--space-4);border-top:1px solid var(--color-outline-variant);background:var(--color-primary-container)}.assistant-textarea[_ngcontent-%COMP%]{flex:1;resize:none;border:1px solid var(--sys-outline);border-radius:var(--radius-md);padding:var(--space-2) var(--space-3);font-family:inherit;font-size:var(--text-sm);color:var(--sys-on-surface);background:var(--sys-surface);min-height:40px}.assistant-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--sys-primary);box-shadow:0 0 0 3px var(--sys-primary-container)}.assistant-send[_ngcontent-%COMP%]{border:none;border-radius:var(--radius-md);padding:var(--space-2) var(--space-3);background:var(--sys-primary);color:var(--sys-on-primary);font-size:var(--text-sm);cursor:pointer;min-width:72px}.assistant-send[_ngcontent-%COMP%]:disabled{cursor:not-allowed;background:var(--sys-outline-variant);color:var(--sys-on-surface-variant)}@keyframes _ngcontent-%COMP%_assistant-pop{0%{transform:translateY(12px) scale(.98);opacity:.7}to{transform:translateY(0) scale(1);opacity:1}}@media(max-width:600px){[_nghost-%COMP%]{right:var(--space-4);bottom:calc(var(--space-4) + env(safe-area-inset-bottom))}.assistant-panel[_ngcontent-%COMP%]{width:min(340px,100vw - var(--space-6));bottom:calc(56px + var(--space-3))}}"]})};var je=i=>({exact:i}),qe=(i,t)=>t.path;function Pt(i,t){if(i&1&&(m(0,"div",4)(1,"p")(2,"span",5),a(3,"warning"),p(),a(4," Initialization failed "),p(),m(5,"p",6),a(6),p()()),i&2){let e=d(2);r(6),x(e.configError())}}function Et(i,t){i&1&&(w(0,"div",7),m(1,"p",8),a(2,"Loading..."),p())}function St(i,t){if(i&1&&(m(0,"div",0)(1,"div",2),w(2,"img",3),m(3,"h1"),a(4,"Berryfun Summer Camp"),p(),g(5,Pt,7,1,"div",4)(6,Et,3,0),p()()),i&2){let e=d();r(5),u(e.configError()?5:6)}}function Ot(i,t){if(i&1){let e=y();m(0,"button",13),P("click",function(){_(e);let o=d(2);return v(o.logout())}),a(1,"Logout"),p()}}function wt(i,t){if(i&1&&(m(0,"div",1)(1,"div",9),w(2,"img",3),m(3,"h1"),a(4,"Under Maintenance"),p(),m(5,"p",10),a(6,"We're currently performing scheduled maintenance to improve your experience."),p(),m(7,"p",11),a(8,"Please check back soon. Thank you for your patience!"),p(),g(9,Ot,2,0,"button",12),p()()),i&2){let e=d();r(9),u(e.isAuthenticated()?9:-1)}}function kt(i,t){if(i&1&&(m(0,"a",31),a(1),p()),i&2){let e=t.$implicit;q("routerLink",e.path)("routerLinkActiveOptions",me(3,je,e.path==="/")),r(),S(" ",e.label," ")}}function Tt(i,t){i&1&&(m(0,"a",32),a(1," Admin Console "),p())}function Dt(i,t){if(i&1&&(m(0,"span",40),a(1),p()),i&2){let e=d(4);r(),x(e.userDisplayName())}}function At(i,t){if(i&1){let e=y();m(0,"div",42),P("click",function(){_(e);let o=d(4);return v(o.closeUserMenu())}),m(1,"button",43),P("click",function(){_(e);let o=d(4);return v(o.logout())}),m(2,"span",44),a(3,"logout"),p(),a(4," Logout "),p()()}}function It(i,t){if(i&1){let e=y();m(0,"div",34)(1,"button",38),P("click",function(){_(e);let o=d(3);return v(o.toggleUserMenu())}),m(2,"span",39),a(3),p(),g(4,Dt,2,1,"span",40),p(),g(5,At,5,0,"div",41),p()}if(i&2){let e=d(3);r(),ce("aria-expanded",e.userMenuOpen()),r(2),x(e.userInitials()),r(),u(e.userDisplayName()?4:-1),r(),u(e.userMenuOpen()?5:-1)}}function Lt(i,t){if(i&1&&(m(0,"a",46)(1,"span",49),a(2),p(),a(3),p()),i&2){let e=t.$implicit;q("routerLink",e.path)("routerLinkActiveOptions",me(4,je,e.path==="/")),r(2),x(e.icon),r(),S(" ",e.label," ")}}function zt(i,t){i&1&&(m(0,"a",47)(1,"span",49),a(2,"settings"),p(),a(3," Admin Console "),p())}function Rt(i,t){if(i&1){let e=y();m(0,"button",50),P("click",function(){_(e);let o=d(4);return v(o.logout())}),m(1,"span",49),a(2,"logout"),p(),a(3," Logout "),p()}}function Nt(i,t){if(i&1){let e=y();m(0,"nav",45),P("click",function(){_(e);let o=d(3);return v(o.closeMobileMenu())}),I(1,Lt,4,6,"a",46,qe),g(3,zt,4,0,"a",47),g(4,Rt,4,0,"button",48),p()}if(i&2){let e=d(3);r(),L(e.navItems),r(2),u(e.isAdmin()?3:-1),r(),u(e.isAuthenticated()?4:-1)}}function Vt(i,t){if(i&1){let e=y();m(0,"header",14)(1,"div",27)(2,"a",28),w(3,"img",21),m(4,"span",29),a(5,"Berryfun Summer Camp"),p()(),m(6,"nav",30),I(7,kt,2,5,"a",31,qe),g(9,Tt,2,0,"a",32),p(),m(10,"div",33),g(11,It,6,4,"div",34),m(12,"button",35),P("click",function(){_(e);let o=d(2);return v(o.toggleMobileMenu())}),w(13,"span",36),p()()(),g(14,Nt,5,2,"nav",37),p()}if(i&2){let e=d(2);r(7),L(e.navItems),r(2),u(e.isAdmin()?9:-1),r(2),u(e.isAuthenticated()?11:-1),r(),ce("aria-expanded",e.mobileMenuOpen()),r(),O("open",e.mobileMenuOpen()),r(),u(e.mobileMenuOpen()?14:-1)}}function Ht(i,t){if(i&1&&(m(0,"p",53),a(1),p()),i&2){let e=d(3);r(),x(e.authError())}}function Bt(i,t){i&1&&a(0," Signing in... ")}function $t(i,t){i&1&&a(0," Sign in with Google ")}function Ft(i,t){if(i&1){let e=y();m(0,"div",26)(1,"div",51)(2,"div",52)(3,"h2"),a(4,"Session Expired"),p(),m(5,"p"),a(6,"Your session has expired. Please sign in again to continue."),p(),g(7,Ht,2,1,"p",53),m(8,"button",54),P("click",function(){_(e);let o=d(2);return v(o.reauthenticate())}),g(9,Bt,1,0)(10,$t,1,0),p()()()()}if(i&2){let e=d(2);r(7),u(e.authError()?7:-1),r(),q("disabled",e.reauthLoading()),r(),u(e.reauthLoading()?9:10)}}function jt(i,t){if(i&1&&(w(0,"app-impersonation-banner"),m(1,"app-testing-helper-layout"),g(2,Vt,15,6,"header",14),m(3,"main",15),w(4,"router-outlet"),p(),m(5,"footer",16)(6,"div",17)(7,"div",18)(8,"div",19)(9,"div",20),w(10,"img",21),m(11,"span"),a(12,"Berryfun Summer Camp"),p()()(),m(13,"div",22)(14,"h4"),a(15,"Quick Links"),p(),m(16,"ul")(17,"li")(18,"a",23),a(19,"Release and Agreement"),p()(),m(20,"li")(21,"a",23),a(22,"Refund & Cancellation Policy"),p()()()(),m(23,"div",24)(24,"h4"),a(25,"Contact Us"),p(),m(26,"ul")(27,"li")(28,"span",5),a(29,"mail"),p(),a(30," cambrianexplorer@gmail.com "),p(),m(31,"li")(32,"span",5),a(33,"call"),p(),a(34," +1 (650) 224 8330 "),p()()()(),m(35,"div",25)(36,"p"),a(37),p()()()(),w(38,"app-page-assistant")(39,"app-debug-panel"),p(),w(40,"app-notification-container")(41,"app-confirm-dialog"),g(42,Ft,11,3,"div",26)),i&2){let e=d();r(),O("impersonation-active",e.isImpersonating()),r(),u(e.showHeader()?2:-1),r(35),S("\xA9 ",e.currentYear()," Berryfun Summer Camp. All rights reserved."),r(5),u(e.reauthRequired()?42:-1)}}var le=class i{router=f(Y);authService=f(Ne);configService=f($);userService=f(G);impersonationService=f(X);elementRef=f(Ce);currentUrl=Ie(this.router.events.pipe(ve(t=>t instanceof we),_e(t=>t.urlAfterRedirects)),{initialValue:this.router.url});showHeader=h(()=>this.isAuthenticated()||this.currentUrl()!=="/");currentYear=h(()=>this.configService.activeYear());mobileMenuOpen=C(!1);authStateReady=this.authService.authStateReady;authLoading=this.authService.loading;configLoading=this.configService.loading;configError=this.configService.error;isSystemInitialized=this.configService.isSystemInitialized;systemSwitch=this.configService.systemSwitch;showMaintenancePage=h(()=>{let t=this.systemSwitch(),e=this.isAdmin();return t.maintenanceMode&&!e});appReady=h(()=>this.authStateReady()?this.isAuthenticated()?this.isSystemInitialized():!0:!1);isAdmin=this.userService.isAdmin;isAuthenticated=this.userService.isAuthenticated;userDisplayName=h(()=>this.userService.currentUser()?.displayName??null);userInitials=h(()=>{let t=this.userDisplayName();if(!t)return"";let e=t.trim().split(/\s+/);return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():t.slice(0,2).toUpperCase()});userMenuOpen=C(!1);isImpersonating=this.impersonationService.isImpersonating;reauthRequired=this.authService.reauthRequired;authError=this.authService.error;navItems=[{path:"/",label:"Catalog",icon:"menu_book"},{path:"/ledger",label:"My Ledger",icon:"receipt_long"},{path:"/waitlist",label:"Waitlist",icon:"hourglass_top"},{path:"/forms",label:"Forms",icon:"description"},{path:"/profile",label:"Profile",icon:"person"}];async ngOnInit(){await this.authService.waitForAuthState()}toggleMobileMenu(){this.mobileMenuOpen.update(t=>!t)}closeMobileMenu(){this.mobileMenuOpen.set(!1)}toggleUserMenu(){this.userMenuOpen.update(t=>!t)}closeUserMenu(){this.userMenuOpen.set(!1)}onDocumentClick(t){let e=this.elementRef.nativeElement.querySelector(".user-menu-container");e&&!e.contains(t.target)&&this.closeUserMenu()}async logout(){try{await this.authService.signOutUser(),this.closeMobileMenu(),this.closeUserMenu(),this.router.navigate(["/login"])}catch(t){console.error("Logout failed:",t)}}reauthLoading=C(!1);async reauthenticate(){this.reauthLoading.set(!0),this.authService.clearError();try{await this.authService.signInWithGoogle()}catch(t){console.error("Re-authentication failed:",t)}finally{this.reauthLoading.set(!1)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-root"]],hostBindings:function(e,n){e&1&&P("click",function(s){return n.onDocumentClick(s)},A)},decls:3,vars:1,consts:[[1,"initialization-screen"],[1,"maintenance-screen"],[1,"initialization-content"],["src","berryfun.png","alt","Berryfun",1,"logo-large"],[1,"error-message"],["aria-hidden","true",1,"material-symbols-rounded","icon-inline"],[1,"error-details"],[1,"loading-spinner"],[1,"loading-message"],[1,"maintenance-content"],[1,"maintenance-message"],[1,"maintenance-submessage"],[1,"logout-button"],[1,"logout-button",3,"click"],[1,"site-header"],[1,"site-main"],[1,"site-footer"],[1,"footer-container"],[1,"footer-content"],[1,"footer-brand"],[1,"footer-logo"],["src","berryfun.png","alt","Berryfun",1,"logo-icon"],[1,"footer-links"],["routerLink","/release-agreement"],[1,"footer-contact"],[1,"footer-bottom"],[1,"reauth-modal-overlay"],[1,"header-container"],["routerLink","/",1,"logo"],[1,"logo-text"],[1,"desktop-nav"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["routerLink","/admin","routerLinkActive","active",1,"nav-link","nav-link-admin"],[1,"header-actions"],[1,"user-menu-container"],["aria-label","Menu",1,"mobile-menu-toggle",3,"click"],[1,"hamburger"],[1,"mobile-nav"],["aria-label","User menu",1,"user-avatar-button",3,"click"],[1,"user-avatar"],[1,"user-name"],[1,"user-menu-dropdown"],[1,"user-menu-dropdown",3,"click"],[1,"user-menu-item","user-menu-logout",3,"click"],["aria-hidden","true",1,"menu-icon","material-symbols-rounded","icon-inline"],[1,"mobile-nav",3,"click"],["routerLinkActive","active",1,"mobile-nav-link",3,"routerLink","routerLinkActiveOptions"],["routerLink","/admin",1,"mobile-nav-link","mobile-nav-admin"],[1,"mobile-nav-link","mobile-nav-logout"],["aria-hidden","true",1,"nav-icon","material-symbols-rounded"],[1,"mobile-nav-link","mobile-nav-logout",3,"click"],[1,"reauth-modal"],[1,"reauth-modal-content"],[1,"reauth-error"],[1,"reauth-button",3,"click","disabled"]],template:function(e,n){e&1&&g(0,St,7,1,"div",0)(1,wt,10,1,"div",1)(2,jt,43,5),e&2&&u(n.appReady()?n.showMaintenancePage()?1:2:0)},dependencies:[ke,Te,De,J,ie,oe,ae,re,se],styles:['.initialization-screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--color-primary-container) 0%,var(--color-surface) 100%);z-index:9999}.initialization-content[_ngcontent-%COMP%]{text-align:center;padding:var(--space-8);max-width:500px}.logo-large[_ngcontent-%COMP%]{width:71px;height:80px;margin-bottom:var(--space-6);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.9}}.initialization-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-3xl);color:var(--color-primary);margin-bottom:var(--space-8);font-weight:700}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto var(--space-4);border:4px solid var(--color-outline-variant);border-top-color:var(--color-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-message[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--color-on-surface-variant);margin:0}.error-message[_ngcontent-%COMP%]{padding:var(--space-6);background-color:var(--color-error-container);border-radius:var(--radius-lg);color:var(--color-on-error-container)}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--space-2) 0}.error-message[_ngcontent-%COMP%]   .error-details[_ngcontent-%COMP%]{font-size:var(--text-sm);font-family:var(--font-mono, monospace);color:var(--color-error)}.maintenance-screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--color-tertiary-container) 0%,var(--color-surface) 100%);z-index:9999}.maintenance-content[_ngcontent-%COMP%]{text-align:center;padding:var(--space-8);max-width:500px}.maintenance-content[_ngcontent-%COMP%]   .logo-large[_ngcontent-%COMP%]{animation:none}.maintenance-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--text-3xl);color:var(--color-tertiary);margin-bottom:var(--space-4);font-weight:700}.maintenance-content[_ngcontent-%COMP%]   .maintenance-message[_ngcontent-%COMP%]{font-size:var(--text-lg);color:var(--color-on-surface);margin-bottom:var(--space-2)}.maintenance-content[_ngcontent-%COMP%]   .maintenance-submessage[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--color-on-surface-variant);margin-bottom:var(--space-6)}.maintenance-content[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{padding:var(--space-3) var(--space-6);background-color:var(--color-surface-variant);color:var(--color-on-surface-variant);border:1px solid var(--color-outline);border-radius:var(--radius-md);font-size:var(--text-base);cursor:pointer;transition:background-color .2s}.maintenance-content[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]:hover{background-color:var(--color-outline-variant)}.impersonation-active[_ngcontent-%COMP%]   .site-header[_ngcontent-%COMP%]{top:48px;margin-top:48px}.site-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:900;background-color:#fffffff2;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(0,0,0,.05);box-shadow:0 1px 3px #00000005}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;max-width:var(--max-width);height:var(--header-height);margin:0 auto;padding:0 var(--content-padding)}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);font-size:var(--text-lg);font-weight:700;color:var(--color-primary);text-decoration:none;transition:transform var(--transition-fast);border-radius:var(--radius-sm);white-space:nowrap}.logo[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-primary);outline-offset:4px}.logo[_ngcontent-%COMP%]:hover{transform:scale(1.02);color:var(--color-primary)}.logo-icon[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}.logo-text[_ngcontent-%COMP%]{letter-spacing:-.01em}@media(max-width:640px){.logo-text[_ngcontent-%COMP%]{display:none}}.desktop-nav[_ngcontent-%COMP%]{display:none;gap:var(--space-1)}@media(min-width:1288px){.desktop-nav[_ngcontent-%COMP%]{display:flex}}.nav-link[_ngcontent-%COMP%]{padding:var(--space-2) var(--space-4);font-size:var(--text-sm);font-weight:500;color:var(--color-on-surface-variant);text-decoration:none;border-radius:var(--radius-lg);transition:all var(--transition-fast)}.nav-link[_ngcontent-%COMP%]:hover{color:var(--color-primary);background-color:var(--color-primary-container)}.nav-link[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-primary);outline-offset:2px}.nav-link.active[_ngcontent-%COMP%]{color:var(--color-primary);background-color:var(--color-primary-container)}.nav-link-admin[_ngcontent-%COMP%]{color:var(--color-secondary);border:1px solid var(--color-secondary)}.nav-link-admin[_ngcontent-%COMP%]:hover, .nav-link-admin.active[_ngcontent-%COMP%]{color:var(--color-on-secondary);background-color:var(--color-secondary)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2)}.user-menu-container[_ngcontent-%COMP%]{position:relative;display:none}@media(min-width:1288px){.user-menu-container[_ngcontent-%COMP%]{display:block}}.user-avatar-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);padding:var(--space-1);background-color:transparent;border:none;border-radius:var(--radius-full);cursor:pointer;transition:all var(--transition-fast)}.user-avatar-button[_ngcontent-%COMP%]:hover{background-color:var(--color-surface-variant)}.user-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark, #5a4fcf));color:var(--color-on-primary);font-weight:600;font-size:var(--text-sm)}.user-name[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:500;color:var(--color-on-surface);max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-menu-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:var(--space-1);min-width:160px;background-color:var(--color-surface);border:1px solid var(--color-outline-variant);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);overflow:hidden;animation:_ngcontent-%COMP%_fadeIn var(--transition-fast);z-index:200}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.user-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);width:100%;padding:var(--space-3) var(--space-4);font-size:var(--text-sm);font-weight:500;color:var(--color-on-surface);background-color:transparent;border:none;cursor:pointer;text-align:left;font-family:inherit;transition:all var(--transition-fast)}.user-menu-item[_ngcontent-%COMP%]:hover{background-color:var(--color-surface-variant)}.user-menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{font-size:var(--text-base)}.user-menu-logout[_ngcontent-%COMP%]{color:var(--color-error)}.user-menu-logout[_ngcontent-%COMP%]:hover{background-color:var(--color-error-container)}.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;background-color:transparent;border:none;cursor:pointer}@media(min-width:1288px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:none}}.hamburger[_ngcontent-%COMP%]{position:relative;width:24px;height:2px;background-color:var(--color-on-surface);transition:all var(--transition-fast)}.hamburger[_ngcontent-%COMP%]:before, .hamburger[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;width:24px;height:2px;background-color:var(--color-on-surface);transition:all var(--transition-fast)}.hamburger[_ngcontent-%COMP%]:before{top:-7px}.hamburger[_ngcontent-%COMP%]:after{top:7px}.hamburger.open[_ngcontent-%COMP%]{background-color:transparent}.hamburger.open[_ngcontent-%COMP%]:before{top:0;transform:rotate(45deg)}.hamburger.open[_ngcontent-%COMP%]:after{top:0;transform:rotate(-45deg)}.mobile-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:var(--space-4);background-color:var(--color-surface);border-top:1px solid var(--color-outline-variant);animation:_ngcontent-%COMP%_slideDown var(--transition-base)}@media(min-width:1288px){.mobile-nav[_ngcontent-%COMP%]{display:none}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.mobile-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);padding:var(--space-3) var(--space-4);font-size:var(--text-base);font-weight:500;color:var(--color-on-surface);text-decoration:none;border-radius:var(--radius-lg);transition:all var(--transition-fast)}.mobile-nav-link[_ngcontent-%COMP%]:hover, .mobile-nav-link.active[_ngcontent-%COMP%]{color:var(--color-primary);background-color:var(--color-primary-container)}.mobile-nav-admin[_ngcontent-%COMP%]{margin-top:var(--space-2);border-top:1px solid var(--color-outline-variant);padding-top:var(--space-4);color:var(--color-secondary)}.mobile-nav-admin[_ngcontent-%COMP%]:hover, .mobile-nav-admin.active[_ngcontent-%COMP%]{color:var(--color-on-secondary);background-color:var(--color-secondary)}.mobile-nav-logout[_ngcontent-%COMP%]{width:100%;margin-top:var(--space-2);border:none;border-top:1px solid var(--color-outline-variant);padding-top:var(--space-4);color:var(--color-error);background-color:transparent;font-family:inherit;cursor:pointer;text-align:left}.mobile-nav-logout[_ngcontent-%COMP%]:hover{color:var(--color-on-error);background-color:var(--color-error)}.nav-icon[_ngcontent-%COMP%]{font-size:var(--text-lg)}.site-main[_ngcontent-%COMP%]{min-height:calc(100vh - var(--header-height) - 300px);padding-bottom:var(--space-12)}.site-footer[_ngcontent-%COMP%]{background-color:var(--color-on-surface);color:var(--color-surface)}.footer-container[_ngcontent-%COMP%]{max-width:var(--max-width);margin:0 auto;padding:var(--space-12) var(--content-padding)}.footer-content[_ngcontent-%COMP%]{display:grid;gap:var(--space-8);margin-bottom:var(--space-8)}@media(min-width:768px){.footer-content[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr 1fr;gap:var(--space-12)}}.footer-brand[_ngcontent-%COMP%]{max-width:300px}.footer-logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);font-size:var(--text-xl);font-weight:700;margin-bottom:var(--space-3)}.footer-tagline[_ngcontent-%COMP%]{color:var(--color-outline);font-size:var(--text-sm);line-height:1.6;margin:0}.footer-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:var(--space-4);color:var(--color-outline)}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:var(--space-2)}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-surface);font-size:var(--text-sm);text-decoration:none;transition:color var(--transition-fast)}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .footer-contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-primary-light)}.footer-contact[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--color-outline)}.footer-bottom[_ngcontent-%COMP%]{padding-top:var(--space-6);border-top:1px solid rgba(255,255,255,.1);text-align:center}.footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--color-outline);margin:0}.reauth-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000;animation:_ngcontent-%COMP%_fadeIn var(--transition-fast)}.reauth-modal[_ngcontent-%COMP%]{background-color:var(--color-surface);border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);max-width:400px;width:90%;overflow:hidden}.reauth-modal-content[_ngcontent-%COMP%]{padding:var(--space-8);text-align:center}.reauth-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--text-xl);font-weight:700;color:var(--color-on-surface);margin:0 0 var(--space-3)}.reauth-modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--color-on-surface-variant);margin:0 0 var(--space-6);line-height:1.5}.reauth-error[_ngcontent-%COMP%]{padding:var(--space-3);margin:0 0 var(--space-4);background-color:var(--color-error-container);color:var(--color-on-error-container);border-radius:var(--radius-md);font-size:var(--text-sm)}.reauth-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-2);width:100%;padding:var(--space-3) var(--space-6);font-size:var(--text-base);font-weight:600;color:var(--color-on-primary);background-color:var(--color-primary);border:none;border-radius:var(--radius-lg);cursor:pointer;transition:all var(--transition-fast);font-family:inherit}.reauth-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-primary-dark, #5a4fcf);transform:translateY(-1px)}.reauth-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.reauth-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}']})};Oe(le,Fe).catch(i=>console.error(i));
