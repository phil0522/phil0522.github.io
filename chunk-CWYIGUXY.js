import{a as z,c as A,f as R,q as Y}from"./chunk-XNB53OLS.js";import{a as j}from"./chunk-RYIKU5Y3.js";import{a as W}from"./chunk-OAQGRW2R.js";import{ca as N,ea as F,h as V,n as L,o as B}from"./chunk-L4WRK3FW.js";import"./chunk-CIPCES67.js";import{$a as d,Ab as O,Cb as k,Db as n,Ea as l,Eb as p,Fb as v,Hb as T,Jb as h,Kb as P,Lb as S,N as x,Qa as w,S as C,T as u,Tb as b,Wb as I,ab as m,db as E,ea as M,eb as D,gb as i,hb as t,ib as y,ob as g,qb as f,sb as c}from"./chunk-CNMR2ZL6.js";import"./chunk-Q7L6LLAK.js";var U=(a,o)=>o.deadline;function q(a,o){a&1&&(i(0,"div",1),n(1,"Loading..."),t())}function G(a,o){if(a&1){let e=g();i(0,"div",2)(1,"strong"),n(2,"Error:"),t(),n(3),i(4,"button",3),f("click",function(){C(e);let s=c();return u(s.seasonService.clearError())}),n(5,"Close"),t()()}if(a&2){let e=c();l(3),v(" ",e.seasonService.error()," ")}}function H(a,o){if(a&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),S("ngModelChange",function(s){C(e);let _=c(2);return P(_.includeLunch,s)||(_.includeLunch=s),u(s)}),f("change",function(){C(e);let s=c(2);return u(s.updateTotal())}),t(),n(3," Lunch Service "),t(),i(4,"span",17),n(5),t()()}if(a&2){let e=c(),r=c();l(2),h("ngModel",r.includeLunch),l(3),p(r.seasonService.formatPrice(e.lunchPrice))}}function K(a,o){if(a&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),S("ngModelChange",function(s){C(e);let _=c(2);return P(_.includeExtendedCare,s)||(_.includeExtendedCare=s),u(s)}),f("change",function(){C(e);let s=c(2);return u(s.updateTotal())}),t(),n(3," Extended Care "),t(),i(4,"span",17),n(5),t()()}if(a&2){let e=c(),r=c();l(2),h("ngModel",r.includeExtendedCare),l(3),p(r.seasonService.formatPrice(e.extendedCarePrice))}}function Q(a,o){a&1&&(i(0,"div",21)(1,"span",25),n(2,"celebration"),t(),n(3," You're getting the early bird price! "),t())}function X(a,o){if(a&1&&(i(0,"div",26)(1,"span"),n(2),t(),i(3,"span",27),n(4),t()()),a&2){let e=o.$implicit,r=c(3);l(2),v("Before ",r.formatDate(e.deadline)),l(2),p(r.seasonService.formatPrice(e.price))}}function Z(a,o){if(a&1&&(i(0,"section",7)(1,"h3"),n(2,"Early Bird Pricing"),t(),E(3,X,5,2,"div",26,U),i(5,"div",26)(6,"span"),n(7,"Regular Price"),t(),i(8,"span",27),n(9),t()()()),a&2){let e=c(),r=c();l(3),D(e.earlyBirdTiers),l(6),p(r.seasonService.formatPrice(e.basePrice))}}function $(a,o){a&1&&(i(0,"button",29),n(1,"Add Student to Enroll"),t(),i(2,"p",30)(3,"a",31),n(4,"Add a student"),t(),n(5," to enroll "),t())}function ee(a,o){a&1&&(i(0,"button",29),n(1,"Complete Profile to Enroll"),t(),i(2,"p",30)(3,"a",31),n(4,"Complete your profile"),t(),n(5," to enroll "),t())}function te(a,o){if(a&1){let e=g();i(0,"button",32),f("click",function(){C(e);let s=c(3);return u(s.onEnrollClick())}),n(1,"Enroll Now"),t()}}function ne(a,o){if(a&1&&d(0,$,6,0)(1,ee,6,0)(2,te,2,0,"button",28),a&2){let e=c(2);m(e.hasStudents()?e.isProfileComplete()?2:1:0)}}function ie(a,o){if(a&1){let e=g();i(0,"button",33),f("click",function(){C(e);let s=c(2);return u(s.onWaitlistClick())}),n(1," Join Waitlist "),t()}}function ae(a,o){if(a&1&&(i(0,"div",4)(1,"h2"),n(2),t(),i(3,"div",5),n(4),t()(),i(5,"div",6)(6,"section",7)(7,"h3"),n(8,"Session Information"),t(),i(9,"div",8)(10,"span",9),n(11,"Start Date:"),t(),i(12,"span",10),n(13),t()(),i(14,"div",8)(15,"span",9),n(16,"End Date:"),t(),i(17,"span",10),n(18),t()(),i(19,"div",8)(20,"span",9),n(21,"Duration:"),t(),i(22,"span",10),n(23),t()()(),i(24,"section",7)(25,"h3"),n(26,"Availability"),t(),i(27,"div",11),y(28,"div",12),t(),i(29,"div",13),n(30),t()(),i(31,"section",14)(32,"h3"),n(33,"Pricing Calculator"),t(),i(34,"div",15)(35,"label"),y(36,"input",16),n(37," Base Fee "),t(),i(38,"span",17),n(39),t()(),d(40,H,6,2,"div",15),d(41,K,6,2,"div",15),i(42,"div",18)(43,"span",19),n(44,"Total:"),t(),i(45,"span",20),n(46),t()(),d(47,Q,4,0,"div",21),t(),d(48,Z,10,1,"section",7),i(49,"section",22),d(50,ne,3,1)(51,ie,2,0,"button",23),t()()),a&2){let e=o,r=c();l(2),p(e.name),l(),k("status-"+r.statusClass),l(),v(" ",r.registrationService.getStatusMessage(e)," "),l(9),p(r.formatDate(e.startDate)),l(5),p(r.formatDate(e.endDate)),l(5),v("",r.calculateDuration(e.startDate,e.endDate)," days"),l(5),O("width",e.enrolledCount/e.capacity*100,"%"),l(2),T(" Enrolled: ",e.enrolledCount," / ",e.capacity," (",e.available," spots remaining) "),l(9),p(r.seasonService.formatPrice(r.basePrice)),l(),m(e.lunchPrice>0?40:-1),l(),m(e.extendedCarePrice>0?41:-1),l(5),p(r.totalPriceFormatted),l(),m(r.showEarlyBird?47:-1),l(),m(e.earlyBirdTiers.length>0?48:-1),l(2),m(r.registrationService.isFullForPublic(e)?r.statusClass==="full"?51:-1:50)}}var J=class a{seasonService=x(N);registrationService=x(W);router=x(L);userService=x(F);sessionId=I();includeLunch=!1;includeExtendedCare=!1;totalPrice=0;totalPriceFormatted="$0.00";basePrice=0;showEarlyBird=!1;statusClass="available";staticClassData=b(()=>this.seasonService.selectedClass());classData=b(()=>{let o=this.staticClassData();return o?this.registrationService.createViewType(o):null});isProfileComplete=b(()=>this.userService.isProfileComplete());hasStudents=b(()=>this.userService.hasStudents());constructor(){M(()=>{let o=this.sessionId();o&&this.loadClassData(o)})}async loadClassData(o){await this.seasonService.loadClass(o),this.updateTotal()}updateTotal(){let o=this.classData();if(!o)return;this.totalPrice=this.seasonService.calculatePrice(o,{includeLunch:this.includeLunch,includeExtendedCare:this.includeExtendedCare}),this.basePrice=this.seasonService.calculatePrice(o,{includeLunch:!1,includeExtendedCare:!1}),this.totalPriceFormatted=this.seasonService.formatPrice(this.totalPrice),this.showEarlyBird=this.basePrice<o.basePrice;let e=this.registrationService.getEnrollmentStatus(o);this.statusClass=e==="open"?"available":"full"}formatDate(o){return j(o,{year:"numeric",month:"long",day:"numeric"})}calculateDuration(o,e){let r=new Date(o),s=new Date(e),_=Math.abs(s.getTime()-r.getTime());return Math.ceil(_/(1e3*60*60*24))+1}onEnrollClick(){this.router.navigate(["/"])}onWaitlistClick(){this.router.navigate(["/waitlist"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=w({type:a,selectors:[["app-class-details"]],inputs:{sessionId:[1,"sessionId"]},decls:4,vars:3,consts:[[1,"class-details"],[1,"loading"],[1,"error-message"],[3,"click"],[1,"details-header"],[1,"status-badge"],[1,"details-content"],[1,"info-section"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"capacity-bar"],[1,"capacity-fill"],[1,"capacity-text"],[1,"pricing-section"],[1,"price-item"],["type","checkbox","disabled","","checked",""],[1,"price"],[1,"price-total"],[1,"total-label"],[1,"total-value"],[1,"early-bird-notice"],[1,"action-section"],[1,"btn-secondary","btn-large"],["type","checkbox",3,"ngModelChange","change","ngModel"],["aria-hidden","true",1,"material-symbols-rounded","icon-sm"],[1,"tier-row"],[1,"tier-price"],[1,"btn-primary","btn-large"],["disabled","",1,"btn-disabled","btn-large"],[1,"profile-note"],["routerLink","/profile"],[1,"btn-primary","btn-large",3,"click"],[1,"btn-secondary","btn-large",3,"click"]],template:function(e,r){if(e&1&&(i(0,"div",0),d(1,q,2,0,"div",1),d(2,G,6,1,"div",2),d(3,ae,52,19),t()),e&2){let s;l(),m(r.seasonService.loading()?1:-1),l(),m(r.seasonService.error()?2:-1),l(),m((s=r.classData())?3:-1,s)}},dependencies:[V,Y,z,A,R,B],styles:[".class-details[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--sys-on-surface-variant, #666)}.error-message[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c);padding:1rem;border-radius:8px;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--sys-primary, #c62828)}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.875rem}.status-available[_ngcontent-%COMP%]{background-color:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20)}.status-full[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c)}.details-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.info-section[_ngcontent-%COMP%], .pricing-section[_ngcontent-%COMP%], .action-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline, #e0e0e0);border-radius:12px;padding:1.5rem}h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--sys-on-surface, #212121);font-size:1.125rem}.info-row[_ngcontent-%COMP%], .tier-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.info-row[_ngcontent-%COMP%]:last-child, .tier-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.info-value[_ngcontent-%COMP%], .tier-price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.capacity-bar[_ngcontent-%COMP%]{width:100%;height:8px;background-color:var(--sys-surface-variant, #f5f5f5);border-radius:4px;overflow:hidden;margin-bottom:.5rem}.capacity-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--sys-primary, #c62828);transition:width .3s ease}.capacity-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.price-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.price-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 0 0;margin-top:.5rem;border-top:2px solid var(--sys-outline, #e0e0e0)}.total-label[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.total-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--sys-primary, #c62828)}.early-bird-notice[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,orange);color:#333;padding:.75rem 1rem;border-radius:8px;font-weight:600;text-align:center;margin-top:1rem}.action-section[_ngcontent-%COMP%]{text-align:center}.btn-large[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:1rem 2rem;font-size:1.125rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--sys-primary-dark, #8e0000);transform:translateY(-2px);box-shadow:0 4px 12px #c628284d}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--sys-tertiary, #1976d2);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--sys-tertiary-dark, #0d47a1);transform:translateY(-2px);box-shadow:0 4px 12px #1976d24d}.btn-disabled[_ngcontent-%COMP%]{background-color:var(--sys-surface-variant, #f5f5f5);color:var(--sys-on-surface-variant, #666)}.btn-disabled[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.8}.profile-note[_ngcontent-%COMP%]{margin-top:.75rem;font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.profile-note[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);text-decoration:underline}"]})};export{J as ClassDetailsComponent};
