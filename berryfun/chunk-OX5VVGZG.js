import{b as le,c as me,f as pe,q as ge}from"./chunk-5TXADNO2.js";import{a as ce}from"./chunk-2ULUKUDZ.js";import{$ as de,I as V,J as z,K as W,R as j,S as U,X as oe,Y as ae,Z as re,_ as se,d as F,j as ne,k as ie}from"./chunk-E56DX7VV.js";import"./chunk-UYHN5VVP.js";import{$a as R,Ab as C,Bb as k,Cb as G,Ea as a,Eb as Q,Fb as X,Gb as Z,Hb as ee,N as I,Pa as $,Pb as h,S as v,Sb as te,T as b,Za as m,_a as p,bb as E,cb as O,da as w,db as y,eb as s,fb as r,gb as D,hb as g,ib as l,jb as L,kb as M,mb as P,ob as c,wb as S,xb as B,yb as o,zb as u}from"./chunk-DU5POHF6.js";import{a as q,b as A}from"./chunk-Q7L6LLAK.js";function ue(n){let t=n<0,i=`$${(Math.abs(n)/100).toFixed(2)}`;return t?`-${i}`:i}function _e(n){return{returning_family:"\u{1F3E0}",returning_student:"\u{1F393}",sibling:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",multi_session:"\u{1F4C5}",coupon:"\u{1F39F}\uFE0F",manual:"\u270F\uFE0F",early_bird:"\u{1F426}",referral:"\u{1F44B}"}[n]??"\u{1F4B0}"}var we=(n,t)=>t.sessionId,Y=(n,t)=>t.type;function Se(n,t){if(n&1&&(g(0,"div",17)(1,"span",18),o(2,"Lunch"),l(),g(3,"span",19),o(4),l()()),n&2){let e=c().$implicit,i=c(3);a(4),u(i.formatPrice(e.lunchPrice))}}function Ie(n,t){if(n&1&&(g(0,"div",17)(1,"span",18),o(2,"Extended Care"),l(),g(3,"span",19),o(4),l()()),n&2){let e=c().$implicit,i=c(3);a(4),u(i.formatPrice(e.extendedCarePrice))}}function ke(n,t){if(n&1&&(g(0,"span",2),o(1),l(),g(2,"span",3),o(3),l()),n&2){let e=c().$implicit,i=c(3);a(),k("",i.formatPrice(e.perStudentPrice)," \xD7 ",e.studentCount),a(2),u(i.formatPrice(e.sessionSubtotal))}}function De(n,t){if(n&1&&(L(0,"span",2),g(1,"span",3),o(2),l()),n&2){let e=c().$implicit,i=c(3);a(2),u(i.formatPrice(e.perStudentPrice))}}function Te(n,t){if(n&1&&(g(0,"div",4)(1,"span",2)(2,"span",21),o(3),l(),o(4),l(),g(5,"span",22),o(6),l()()),n&2){let e=t.$implicit,i=c(4);a(3),u(i.getDiscountIcon(e.type)),a(),C(" ",e.description," "),a(2),u(i.formatPrice(e.amount))}}function Re(n,t){if(n&1&&(g(0,"div",13)(1,"div",15),o(2),l(),g(3,"div",16)(4,"div",17)(5,"span",18),o(6,"Base"),l(),g(7,"span",19),o(8),l()(),m(9,Se,5,1,"div",17),m(10,Ie,5,1,"div",17),g(11,"div",20),m(12,ke,4,3)(13,De,3,1),l(),E(14,Te,7,3,"div",4,Y),l()()),n&2){let e=t.$implicit,i=c(3);a(2),u(e.sessionName),a(6),u(i.formatPrice(e.basePrice)),a(),p(e.lunchPrice>0?9:-1),a(),p(e.extendedCarePrice>0?10:-1),a(2),p(e.studentCount>1?12:13),a(2),O(e.discounts)}}function qe(n,t){if(n&1&&(g(0,"div",4)(1,"span",2)(2,"span",21),o(3),l(),o(4),l(),g(5,"span",22),o(6),l()()),n&2){let e=t.$implicit,i=c(4);a(3),u(i.getDiscountIcon(e.type)),a(),C(" ",e.description," "),a(2),u(i.formatPrice(e.amount))}}function $e(n,t){if(n&1&&(g(0,"div",14)(1,"div",23),o(2,"Discounts"),l(),E(3,qe,7,3,"div",4,Y),l()),n&2){let e=c(2);a(3),O(e.pricing.globalDiscounts)}}function Fe(n,t){if(n&1&&(E(0,Re,16,5,"div",13,we),m(2,$e,5,0,"div",14)),n&2){let e=c();O(e.pricing.sessionBreakdowns),a(2),p(e.pricing.globalDiscounts&&e.pricing.globalDiscounts.length>0?2:-1)}}function Ne(n,t){if(n&1&&(g(0,"div",4)(1,"span",2)(2,"span",21),o(3),l(),o(4),l(),g(5,"span",22),o(6),l()()),n&2){let e=t.$implicit,i=c(3);a(3),u(i.getDiscountIcon(e.type)),a(),C(" ",e.description," "),a(2),u(i.formatPrice(e.amount))}}function Ae(n,t){if(n&1&&(g(0,"div",24)(1,"span",2),o(2,"Subtotal"),l(),g(3,"span",3),o(4),l()(),E(5,Ne,7,3,"div",4,Y)),n&2){let e=c(),i=c();a(4),u(i.formatPrice(e.pricing.subtotal)),a(),O(e.pricing.discounts)}}function Le(n,t){if(n&1&&(g(0,"div",4)(1,"span",2)(2,"span",21),o(3,"\u{1F39F}\uFE0F"),l(),o(4," Coupon Credit "),l(),g(5,"span",22),o(6),l()()),n&2){let e=c(),i=c();a(6),C("-",i.formatPrice(e.couponCredit))}}function Be(n,t){if(n&1&&(g(0,"div",5)(1,"span",2),o(2,"Paid"),l(),g(3,"span",25),o(4),l()()),n&2){let e=c(),i=c();a(4),C("-",i.formatPrice(e.totalPaid))}}function Ve(n,t){if(n&1&&(g(0,"div",6)(1,"span",2),o(2,"Refunded"),l(),g(3,"span",26),o(4),l()()),n&2){let e=c(),i=c();a(4),C("+",i.formatPrice(e.totalRefunded))}}function ze(n,t){if(n&1&&(g(0,"div",24)(1,"span",2),o(2),l(),g(3,"span",3),o(4),l()()),n&2){let e=t.$implicit,i=c(3);S("fee",e.amount>0)("credit",e.amount<0),a(2),u(e.description),a(),S("fee-value",e.amount>0)("credit-value",e.amount<0),a(),k(" ",e.amount>=0?"+":"","",i.formatPrice(e.amount)," ")}}function We(n,t){if(n&1&&E(0,ze,5,11,"div",27,R),n&2){let e=c();O(e.processingFees)}}function je(n,t){if(n&1&&(g(0,"div",9)(1,"span",2)(2,"span",21),o(3,"\u{1F4B5}"),l(),o(4," Pay with Cash (3% off) "),l(),g(5,"span",28),o(6),l()()),n&2){let e=c(2);a(6),u(e.formatPrice(e.cashAmountDue()))}}function Ue(n,t){n&1&&(g(0,"div",10),o(1,"Paid in Full"),l())}function Ye(n,t){if(n&1&&(g(0,"div",11),o(1),l()),n&2){let e=c(),i=c();a(),C("Refund of ",i.formatPrice(i.Math.abs(e.amountDue))," due to customer")}}function Je(n,t){if(n&1&&(g(0,"div",12),o(1),l()),n&2){let e=c(2);a(),C("You saved ",e.formatPrice(e.totalSavings()),"!")}}function Ke(n,t){if(n&1&&(g(0,"div",0),m(1,Fe,3,1)(2,Ae,7,1),g(3,"div",1)(4,"span",2),o(5,"Order Total"),l(),g(6,"span",3),o(7),l()(),m(8,Le,7,1,"div",4),m(9,Be,5,1,"div",5),m(10,Ve,5,1,"div",6),m(11,We,2,0),L(12,"div",7),g(13,"div",8)(14,"span",2),o(15),l(),g(16,"span",3),o(17),l()(),m(18,je,7,1,"div",9),m(19,Ue,2,0,"div",10),m(20,Ye,2,1,"div",11),m(21,Je,2,1,"div",12),l()),n&2){let e=t,i=c();a(),p(i.hasBreakdowns()?1:2),a(6),u(i.formatPrice(i.orderTotal())),a(),p(e.couponCredit>0?8:-1),a(),p(e.totalPaid>0?9:-1),a(),p(e.totalRefunded>0?10:-1),a(),p(e.processingFees&&e.processingFees.length>0?11:-1),a(4),u(e.amountDue<0?"Refund Due":"Amount Due"),a(),S("paid-in-full",e.amountDue===0)("refund-due",e.amountDue<0),a(),C(" ",e.amountDue<0?i.formatPrice(i.Math.abs(e.amountDue)):i.formatPrice(e.amountDue)," "),a(),p(i.cashDiscount()>0?18:-1),a(),p(e.amountDue===0&&e.totalPaid>0?19:-1),a(),p(e.amountDue<0?20:-1),a(),p(i.totalSavings()>0?21:-1)}}var N=class n{formatPrice=ue;getDiscountIcon=_e;Math=Math;data=te(null);hasBreakdowns=h(()=>{let t=this.data();return!!t&&W(t.pricing.sessionBreakdowns)});orderTotal=h(()=>{let t=this.data();return t?V(t.pricing.subtotal,t.pricing.discounts):0});totalSavings=h(()=>{let t=this.data();return t?z(t.pricing.discounts,t.couponCredit):0});cashDiscount=h(()=>{let t=this.data();return!t||t.amountDue<=0?0:j(t.amountDue)});cashAmountDue=h(()=>{let t=this.data();return!t||t.amountDue<=0?0:U(t.amountDue)});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-price-breakdown"]],inputs:{data:[1,"data"]},decls:1,vars:1,consts:[[1,"price-breakdown"],[1,"price-row","subtotal"],[1,"label"],[1,"value"],[1,"price-row","discount"],[1,"price-row","paid"],[1,"price-row","refund"],[1,"divider"],[1,"price-row","total"],[1,"price-row","cash-discount"],[1,"paid-badge"],[1,"refund-badge"],[1,"savings-badge"],[1,"session-section"],[1,"global-discounts-section"],[1,"session-header"],[1,"session-details"],[1,"addon-row"],[1,"addon-label"],[1,"addon-value"],[1,"session-subtotal-row"],[1,"discount-badge"],[1,"value","discount-value"],[1,"section-header"],[1,"price-row"],[1,"value","paid-value"],[1,"value","refund-value"],[1,"price-row",3,"fee","credit"],[1,"value","cash-value"]],template:function(e,i){if(e&1&&m(0,Ke,22,16,"div",0),e&2){let d;p((d=i.data())?0:-1,d)}},dependencies:[F],styles:[".price-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.price-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666);display:flex;align-items:center;gap:.375rem}.price-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--sys-on-surface, #212121);font-weight:500}.price-row.discount[_ngcontent-%COMP%]   .discount-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.discount-badge[_ngcontent-%COMP%]{font-size:1rem}.price-row.subtotal[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #e0e0e0)}.price-row.paid[_ngcontent-%COMP%]   .paid-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.price-row.refund[_ngcontent-%COMP%]   .refund-value[_ngcontent-%COMP%], .price-row.fee[_ngcontent-%COMP%]   .fee-value[_ngcontent-%COMP%]{color:var(--sys-error, #c62828)}.price-row.credit[_ngcontent-%COMP%]   .credit-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.divider[_ngcontent-%COMP%]{height:1px;background:var(--sys-outline, #e0e0e0);margin:.25rem 0}.price-row.total[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.price-row.total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--sys-on-surface, #212121)}.price-row.total[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);font-size:1.25rem}.price-row.total[_ngcontent-%COMP%]   .value.paid-in-full[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.price-row.total[_ngcontent-%COMP%]   .value.refund-due[_ngcontent-%COMP%]{color:var(--sys-tertiary, #1565c0)}.price-row.cash-discount[_ngcontent-%COMP%]{background:#e8f5e9;padding:.5rem .75rem;border-radius:8px;margin-top:.25rem}.price-row.cash-discount[_ngcontent-%COMP%]   .cash-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32);font-weight:600;font-size:1.125rem}.savings-badge[_ngcontent-%COMP%], .paid-badge[_ngcontent-%COMP%], .refund-badge[_ngcontent-%COMP%]{background:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20);padding:.5rem .75rem;border-radius:8px;font-size:.875rem;text-align:center;font-weight:500}.paid-badge[_ngcontent-%COMP%]{font-weight:600}.refund-badge[_ngcontent-%COMP%]{background:var(--sys-tertiary-container, #e3f2fd);color:var(--sys-on-tertiary-container, #0d47a1);font-weight:600}.session-section[_ngcontent-%COMP%]{padding:.5rem 0}.session-section[_ngcontent-%COMP%] + .session-section[_ngcontent-%COMP%]{border-top:1px dashed var(--sys-outline-variant, #e0e0e0)}.session-header[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--sys-on-surface, #212121);margin-bottom:.25rem}.session-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding-left:.5rem}.addon-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.8125rem;color:var(--sys-on-surface-variant, #666)}.addon-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #888)}.addon-value[_ngcontent-%COMP%]{font-weight:400}.session-subtotal-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.875rem;font-weight:500;color:var(--sys-on-surface, #212121);padding-top:.25rem}.global-discounts-section[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #e0e0e0)}.section-header[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--sys-on-surface, #212121);margin-bottom:.25rem}"]})};function Ce(n){switch(n){case"locked":return"Awaiting Screenshot";case"submitted":return"Pending";case"paid":return"Paid";case"cancelled":return"Cancelled";case"refunded":return"Refunded";default:return n}}function xe(n){return`$${(n/100).toFixed(2)}`}function fe(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}function J(n,t){let e=new Date(n),i=new Date(t),d=e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=i.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${d} - ${_}`}var He=(n,t)=>t.sessionId+"-"+t.studentId,be=(n,t)=>t.id,Ge=(n,t)=>t.sessionId;function Qe(n,t){n&1&&(s(0,"div",4),D(1,"div",11),s(2,"p"),o(3,"Loading order..."),r()())}function Xe(n,t){if(n&1){let e=M();s(0,"div",5)(1,"div",12),o(2,"!"),r(),s(3,"p"),o(4),r(),s(5,"button",13),P("click",function(){v(e);let d=c();return b(d.loadOrder())}),o(6,"Retry"),r()()}if(n&2){let e=c();a(4),u(e.orderService.error())}}function Ze(n,t){n&1&&(s(0,"div",6)(1,"div",14),o(2,"\u{1F4CB}"),r(),s(3,"h2"),o(4,"No order found"),r(),s(5,"p"),o(6,"You don't have any items in your order yet."),r(),s(7,"a",15),o(8,"Browse Classes"),r()())}function et(n,t){n&1&&(s(0,"div",19)(1,"p"),o(2,"You have no active enrollments to modify."),r()())}function tt(n,t){n&1&&o(0," Marked for Removal ")}function nt(n,t){n&1&&o(0," Remove from Class ")}function it(n,t){n&1&&(s(0,"span",37),o(1,"Change Pending"),r())}function ot(n,t){if(n&1){let e=M();s(0,"div",25)(1,"div",26)(2,"div",27)(3,"span",28),o(4),r(),s(5,"span",29),o(6),r()(),s(7,"div",30),o(8),r()(),s(9,"div",31)(10,"label",32)(11,"input",33),P("change",function(){let d=v(e).$implicit,_=c(3);return b(_.toggleAddon(d,"lunch"))}),r(),s(12,"span",34),o(13),r()(),s(14,"label",32)(15,"input",33),P("change",function(){let d=v(e).$implicit,_=c(3);return b(_.toggleAddon(d,"extendedCare"))}),r(),s(16,"span",34),o(17),r()()(),s(18,"div",35)(19,"button",36),P("click",function(){let d=v(e).$implicit,_=c(3);return b(_.markForRemoval(d))}),m(20,tt,1,0)(21,nt,1,0),r(),m(22,it,2,0,"span",37),r()()}if(n&2){let e=t.$implicit,i=c(3);S("is-paid",e.status==="paid"),a(4),u(i.getClassName(e.sessionId)),a(),B("status-"+e.status),a(),C(" ",e.status==="paid"?"PAID":"SUBMITTED"," "),a(2),k(" ",i.getStudentName(e.studentId)," \u2022 ",i.getDateRange(e.sessionId)," "),a(3),y("checked",i.getItemOptionState(e,"lunch"))("disabled",i.isItemInPendingChange(e)),a(2),C(" Lunch (",i.formatCurrency(i.getLunchPrice(e.sessionId)),") "),a(2),y("checked",i.getItemOptionState(e,"extendedCare"))("disabled",i.isItemInPendingChange(e)),a(2),C(" Extended Care (",i.formatCurrency(i.getExtendedCarePrice(e.sessionId)),") "),a(2),y("disabled",i.isItemInPendingChange(e)||i.isMarkedForRemoval(e)),a(),p(i.isMarkedForRemoval(e)?20:21),a(2),p(i.isItemInPendingChange(e)?22:-1)}}function at(n,t){if(n&1){let e=M();s(0,"div",39)(1,"span",48),o(2),r(),s(3,"span",49),o(4),r(),s(5,"button",50),P("click",function(){let d=v(e).$index,_=c(4);return b(_.removePendingChange(d))}),o(6,"\xD7"),r()()}if(n&2){let e=t.$implicit,i=c(4);a(2),u(e.description),a(),S("credit",e.priceChange<0),a(),k(" ",e.priceChange<0?"-":"+","",i.formatCurrency(i.Math.abs(e.priceChange))," ")}}function rt(n,t){n&1&&(s(0,"div",43),o(1," Note: A processing fee may apply for class removals. "),r())}function st(n,t){n&1&&(D(0,"span",52),o(1," Applying... "))}function dt(n,t){n&1&&o(0," Apply Changes ")}function ct(n,t){if(n&1){let e=M();s(0,"button",51),P("click",function(){v(e);let d=c(4);return b(d.applySubmittedChanges())}),m(1,st,2,0)(2,dt,1,0),r()}if(n&2){let e=c(4);y("disabled",e.actionLoading()),a(),p(e.actionLoading()?1:2)}}function lt(n,t){if(n&1){let e=M();s(0,"button",53),P("click",function(){v(e);let d=c(4);return b(d.openRequestChangeDialog())}),o(1," Request Changes (Needs Approval) "),r()}if(n&2){let e=c(4);y("disabled",e.actionLoading())}}function mt(n,t){if(n&1){let e=M();s(0,"button",51),P("click",function(){v(e);let d=c(4);return b(d.applySubmittedChanges())}),o(1," Apply Submitted Changes "),r(),s(2,"button",53),P("click",function(){v(e);let d=c(4);return b(d.openRequestChangeDialog())}),o(3," Request Paid Changes "),r()}if(n&2){let e=c(4);y("disabled",e.actionLoading()),a(2),y("disabled",e.actionLoading())}}function pt(n,t){if(n&1){let e=M();s(0,"div",24)(1,"h3"),o(2,"Pending Changes"),r(),s(3,"div",38),E(4,at,7,5,"div",39,R),r(),s(6,"div",40)(7,"div",41)(8,"span"),o(9,"Total estimated change:"),r(),s(10,"span",42),o(11),r()(),m(12,rt,2,0,"div",43),r(),s(13,"div",44)(14,"button",45),P("click",function(){v(e);let d=c(3);return b(d.clearPendingChanges())}),o(15," Clear All "),r(),m(16,ct,3,2,"button",46)(17,lt,2,1,"button",47)(18,mt,4,2),r()()}if(n&2){let e=c(3);a(4),O(e.pendingChanges()),a(6),S("credit",e.totalPriceChange()<0),a(),G(" ",e.totalPriceChange()<0?"-":"+","",e.formatCurrency(e.Math.abs(e.totalPriceChange()))," ",e.totalPriceChange()<0?"(credit)":""," "),a(),p(e.hasRemovalChanges()&&e.hasPaidChanges()?12:-1),a(4),p(e.hasSubmittedChanges()&&!e.hasPaidChanges()?16:e.hasPaidChanges()&&!e.hasSubmittedChanges()?17:e.hasPaidChanges()&&e.hasSubmittedChanges()?18:-1)}}function gt(n,t){if(n&1&&(s(0,"div",19)(1,"p")(2,"strong"),o(3,"Submitted (unpaid) items:"),r(),o(4," Changes apply immediately."),D(5,"br"),s(6,"strong"),o(7,"Paid items:"),r(),o(8," Changes require admin approval. "),r()(),s(9,"div",22),E(10,ot,23,17,"div",23,He),r(),m(12,pt,19,7,"div",24)),n&2){let e=c(2);a(10),O(e.allActiveItems()),a(2),p(e.pendingChanges().length>0?12:-1)}}function ut(n,t){if(n&1&&(s(0,"div",60),o(1),r()),n&2){let e=t.$implicit,i=c(4);a(),C(" ",i.getActionDescriptionText(e)," ")}}function _t(n,t){if(n&1&&(s(0,"span"),o(1),r()),n&2){let e=c().$implicit,i=c(3);a(),C("Admin Adjustment: ",i.formatCurrency(e.adminAdjustment))}}function Ct(n,t){if(n&1&&(s(0,"div",62)(1,"strong"),o(2,"Reason:"),r(),o(3),r()),n&2){let e=c().$implicit;a(3),C(" ",e.reason," ")}}function xt(n,t){if(n&1&&(s(0,"div",63)(1,"strong"),o(2,"Admin Notes:"),r(),o(3),r()),n&2){let e=c().$implicit;a(3),C(" ",e.adminNotes," ")}}function ft(n,t){if(n&1&&(s(0,"div",55)(1,"div",56)(2,"span",57),o(3),r(),s(4,"span"),o(5),r()(),s(6,"div",58)(7,"div",59)(8,"strong"),o(9,"Changes:"),r(),E(10,ut,2,1,"div",60,R),r(),s(12,"div",61)(13,"span"),o(14),r(),m(15,_t,2,1,"span"),r(),m(16,Ct,4,1,"div",62),m(17,xt,4,1,"div",63),r()()),n&2){let e=t.$implicit,i=c(3);a(3),u(e.id),a(),B(ee("request-status status-",e.status)),a(),C(" ",i.getChangeRequestStatusLabel(e.status)," "),a(5),O(e.actions),a(4),C("Requested: ",i.formatDateTime(e.requestedAt)),a(),p(e.adminAdjustment!==0?15:-1),a(),p(e.reason?16:-1),a(),p(e.adminNotes?17:-1)}}function ht(n,t){if(n&1&&(s(0,"section",16)(1,"div",17)(2,"h2"),o(3,"Pending Change Requests"),r(),s(4,"p",18),o(5,"Your change requests awaiting admin approval"),r()(),s(6,"div",54),E(7,ft,18,9,"div",55,be),r()()),n&2){let e=c(2);a(7),O(e.pendingChangeRequests())}}function vt(n,t){if(n&1){let e=M();s(0,"div",65)(1,"div",66)(2,"div",67),o(3),r(),s(4,"div",68),o(5),r(),s(6,"div",69),o(7),r()(),s(8,"button",70),P("click",function(){let d=v(e).$implicit,_=c(3);return b(_.confirmLeaveWaitlist(d))}),o(9," Leave "),r()()}if(n&2){let e=t.$implicit,i=c(3);a(3),u(i.getClassName(e.sessionId)),a(2),C(" ",i.getDateRange(e.sessionId)," "),a(2),C(" Joined ",i.formatDateTime(e.joinedAt)," "),a(),y("disabled",i.actionLoading())}}function bt(n,t){if(n&1&&(s(0,"div",20)(1,"h3"),o(2,"Your Waitlists"),r(),s(3,"div",64),E(4,vt,10,4,"div",65,Ge),r()()),n&2){let e=c(2);a(4),O(e.currentWaitlists())}}function Pt(n,t){if(n&1){let e=M();s(0,"div",73)(1,"div",74)(2,"div",28),o(3),r(),s(4,"div",75),o(5),r(),s(6,"div",76),o(7),r()(),s(8,"button",77),P("click",function(){let d=v(e).$implicit,_=c(3);return b(_.confirmJoinWaitlist(d.id))}),o(9," Join Waitlist "),r()()}if(n&2){let e=t.$implicit,i=c(3);a(3),u(e.name),a(2),C(" ",i.formatDateRange(e.startDate,e.endDate)," "),a(2),k(" ",i.registrationService.getEnrolledCount(e.id),"/",e.capacity," enrolled "),a(),y("disabled",i.actionLoading())}}function yt(n,t){if(n&1&&(s(0,"div",20)(1,"h3"),o(2,"Join Waitlist"),r(),s(3,"p",71),o(4,"Full classes you can join the waitlist for:"),r(),s(5,"div",72),E(6,Pt,10,5,"div",73,be),r()()),n&2){let e=c(2);a(6),O(e.availableClassesForWaitlist())}}function Et(n,t){n&1&&(s(0,"div",19)(1,"p"),o(2,"No full classes available for waitlist at this time."),r()())}function Ot(n,t){if(n&1&&(s(0,"section",21)(1,"div",17)(2,"h2"),o(3,"Pricing Summary"),r()(),D(4,"app-price-breakdown",78),r()),n&2){let e=c(2);a(4),y("data",e.priceBreakdownData())}}function Mt(n,t){if(n&1&&(s(0,"div",7)(1,"section",16)(2,"div",17)(3,"h2"),o(4,"Modify Enrollments"),r(),s(5,"p",18),o(6,"Update options or remove classes"),r()(),m(7,et,3,0,"div",19)(8,gt,13,1),r(),m(9,ht,9,0,"section",16),s(10,"section",16)(11,"div",17)(12,"h2"),o(13,"Waitlist Management"),r(),s(14,"p",18),o(15,"Join or leave waitlists for full classes"),r()(),m(16,bt,6,0,"div",20),m(17,yt,8,0,"div",20)(18,Et,3,0,"div",19),r(),m(19,Ot,5,1,"section",21),r()),n&2){let e=c();a(7),p(e.allActiveItems().length===0?7:8),a(2),p(e.pendingChangeRequests().length>0?9:-1),a(7),p(e.currentWaitlists().length>0?16:-1),a(),p(e.availableClassesForWaitlist().length>0?17:e.currentWaitlists().length===0?18:-1),a(2),p(e.priceBreakdownData()?19:-1)}}function wt(n,t){if(n&1&&(s(0,"li"),o(1),r()),n&2){let e=t.$implicit;a(),u(e.description)}}function St(n,t){n&1&&(s(0,"div",83)(1,"div",89),o(2,"\u26A0\uFE0F"),r(),s(3,"div",90)(4,"strong"),o(5,"Processing Fee"),r(),s(6,"p"),o(7,"A processing fee may apply for class removals."),r()()())}function It(n,t){n&1&&(D(0,"span",52),o(1," Submitting... "))}function kt(n,t){n&1&&o(0," Submit Request ")}function Dt(n,t){if(n&1){let e=M();s(0,"div",8)(1,"div",79)(2,"h3"),o(3,"Request Order Changes"),r(),s(4,"div",80)(5,"p"),o(6,"You are requesting the following changes for paid items:"),r(),s(7,"ul",81),E(8,wt,2,1,"li",null,R),r(),s(10,"div",82)(11,"strong"),o(12,"Estimated Price Change:"),r(),s(13,"span"),o(14),r()(),m(15,St,8,0,"div",83),s(16,"div",84)(17,"label",85),o(18,"Reason (optional)"),r(),s(19,"textarea",86),Z("ngModelChange",function(d){v(e);let _=c();return X(_.changeRequestReason,d)||(_.changeRequestReason=d),b(d)}),r()()(),s(20,"div",87)(21,"button",88),P("click",function(){v(e);let d=c();return b(d.closeRequestChangeDialog())}),o(22," Cancel "),r(),s(23,"button",53),P("click",function(){v(e);let d=c();return b(d.submitChangeRequest())}),m(24,It,2,0)(25,kt,1,0),r()()()()}if(n&2){let e=c();a(8),O(e.paidPendingChanges()),a(5),S("credit",e.paidTotalPriceChange()<0),a(),k(" ",e.paidTotalPriceChange()<0?"-":"+","",e.formatCurrency(e.Math.abs(e.paidTotalPriceChange()))," "),a(),p(e.hasRemovalChanges()?15:-1),a(4),Q("ngModel",e.changeRequestReason),a(2),y("disabled",e.actionLoading()),a(2),y("disabled",e.actionLoading()),a(),p(e.actionLoading()?24:25)}}function Tt(n,t){n&1&&(D(0,"span",52),o(1," Processing... "))}function Rt(n,t){n&1&&o(0," Confirm ")}function qt(n,t){if(n&1){let e=M();s(0,"div",8)(1,"div",79)(2,"h3"),o(3),r(),s(4,"p"),o(5),r(),s(6,"div",87)(7,"button",88),P("click",function(){v(e);let d=c();return b(d.closeWaitlistDialog())}),o(8," Cancel "),r(),s(9,"button",51),P("click",function(){v(e);let d=c();return b(d.confirmWaitlistAction())}),m(10,Tt,2,0)(11,Rt,1,0),r()()()()}if(n&2){let e=c();a(3),u(e.waitlistDialogTitle()),a(2),u(e.waitlistDialogMessage()),a(2),y("disabled",e.actionLoading()),a(2),y("disabled",e.actionLoading()),a(),p(e.actionLoading()?10:11)}}function $t(n,t){if(n&1&&(s(0,"div",9),o(1),r()),n&2){let e=c();a(),C(" ",e.successMessage()," ")}}function Ft(n,t){if(n&1&&(s(0,"div",10),o(1),r()),n&2){let e=c();a(),C(" ",e.actionError()," ")}}var ve=class n{orderService=I(se);seasonService=I(re);userService=I(de);configService=I(ae);registrationService=I(ce);orderRpc=I(oe);router=I(ne);formatCurrency=xe;formatDateTime=fe;formatDateRange=J;getItemStatusLabel=Ce;Math=Math;_actionLoading=w(!1);_actionError=w(null);_successMessage=w(null);_pendingChanges=w([]);_modifiedOptions=w(new Map);_showRequestChangeDialog=w(!1);changeRequestReason="";_showWaitlistDialog=w(!1);_waitlistAction=w(null);_waitlistSessionId=w(null);actionLoading=this._actionLoading.asReadonly();actionError=this._actionError.asReadonly();successMessage=this._successMessage.asReadonly();pendingChanges=this._pendingChanges.asReadonly();showRequestChangeDialog=this._showRequestChangeDialog.asReadonly();showWaitlistDialog=this._showWaitlistDialog.asReadonly();allActiveItems=h(()=>[...this.orderService.submittedItems(),...this.orderService.paidItems()]);pendingChangeRequests=h(()=>{let t=this.orderService.order();return t?.changeRequests?t.changeRequests.filter(e=>e.status==="pending"):[]});totalPriceChange=h(()=>this._pendingChanges().reduce((t,e)=>t+e.priceChange,0));hasSubmittedChanges=h(()=>{let t=new Set(this.orderService.submittedItems().map(e=>`${e.sessionId}-${e.studentId}`));return this._pendingChanges().some(e=>{let i=`${e.action.target.sessionId}-${e.action.target.studentId}`;return t.has(i)})});hasPaidChanges=h(()=>{let t=new Set(this.orderService.paidItems().map(e=>`${e.sessionId}-${e.studentId}`));return this._pendingChanges().some(e=>{let i=`${e.action.target.sessionId}-${e.action.target.studentId}`;return t.has(i)})});hasRemovalChanges=h(()=>this._pendingChanges().some(t=>t.action.type==="remove_class"));paidPendingChanges=h(()=>{let t=new Set(this.orderService.paidItems().map(e=>`${e.sessionId}-${e.studentId}`));return this._pendingChanges().filter(e=>{let i=`${e.action.target.sessionId}-${e.action.target.studentId}`;return t.has(i)})});submittedPendingChanges=h(()=>{let t=new Set(this.orderService.submittedItems().map(e=>`${e.sessionId}-${e.studentId}`));return this._pendingChanges().filter(e=>{let i=`${e.action.target.sessionId}-${e.action.target.studentId}`;return t.has(i)})});paidTotalPriceChange=h(()=>this.paidPendingChanges().reduce((t,e)=>t+e.priceChange,0));priceBreakdownData=h(()=>{let t=this.orderService.order();if(!t?.pricing)return null;let e=(t.processingFees??[]).map(i=>({description:i.description,amount:i.amount}));return{pricing:t.pricing,couponCredit:t.couponDiscount??0,totalPaid:this.orderService.totalPaid(),totalRefunded:this.orderService.totalRefunded(),processingFees:e,amountDue:this.orderService.amountDue()}});currentWaitlists=h(()=>this.orderService.waitlistEntries());availableClassesForWaitlist=h(()=>{let t=this.seasonService.classes(),e=new Set(this.currentWaitlists().map(d=>d.sessionId)),i=new Set([...this.orderService.submittedItems(),...this.orderService.paidItems()].map(d=>d.sessionId));return t.filter(d=>this.registrationService.getEnrolledCount(d.id)>=d.capacity&&!e.has(d.id)&&!i.has(d.id))});waitlistDialogTitle=h(()=>{let t=this._waitlistAction();return t==="join"?"Join Waitlist":t==="leave"?"Leave Waitlist":""});waitlistDialogMessage=h(()=>{let t=this._waitlistAction(),e=this._waitlistSessionId();if(!e)return"";let i=this.getClassName(e);return t==="join"?`Are you sure you want to join the waitlist for ${i}? You'll be notified if a spot opens up.`:t==="leave"?`Are you sure you want to leave the waitlist for ${i}? You'll lose your position in the queue.`:""});async ngOnInit(){if(!this.userService.isAuthenticated()){this.router.navigate(["/login"]);return}await this.loadOrder()}async loadOrder(){try{await this.seasonService.loadClassesByYear()}catch(t){console.error("Failed to load classes:",t)}}getItemOptionState(t,e){let i=`${t.sessionId}-${t.studentId}`,d=this._modifiedOptions().get(i);return d?d[e]:t.options[e]}toggleAddon(t,e){let i=`${t.sessionId}-${t.studentId}`,d=this._modifiedOptions().get(i)??q({},t.options),_=t.options[e],x=!d[e],f=new Map(this._modifiedOptions());f.set(i,A(q({},d),{[e]:x})),this._modifiedOptions.set(f);let K=e==="lunch"?this.getLunchPrice(t.sessionId):this.getExtendedCarePrice(t.sessionId),H=this._pendingChanges().filter(T=>!(T.action.target.sessionId===t.sessionId&&T.action.target.studentId===t.studentId&&T.action.type!=="remove_class"&&"addon"in T.action&&T.action.addon===e));if(x!==_){let Pe={type:x?"add_addon":"remove_addon",target:{sessionId:t.sessionId,studentId:t.studentId},addon:e},ye=x?K:-K,Ee=`${x?"Add":"Remove"} ${e==="lunch"?"Lunch":"Extended Care"}: ${this.getClassName(t.sessionId)} - ${this.getStudentName(t.studentId)}`;H.push({action:Pe,description:Ee,priceChange:ye})}this._pendingChanges.set(H)}markForRemoval(t){if(this.isMarkedForRemoval(t))return;let e={type:"remove_class",target:{sessionId:t.sessionId,studentId:t.studentId}},i=t.snapshot,d=i?-i.priceSnapshot.itemTotal:0,_=`Remove from class: ${this.getClassName(t.sessionId)} - ${this.getStudentName(t.studentId)}`;this._pendingChanges.update(x=>[...x,{action:e,description:_,priceChange:d}])}isMarkedForRemoval(t){return this._pendingChanges().some(e=>e.action.type==="remove_class"&&e.action.target.sessionId===t.sessionId&&e.action.target.studentId===t.studentId)}isItemInPendingChange(t){let e=this.orderService.order();return e?.changeRequests?e.changeRequests.some(i=>i.status==="pending"&&i.actions.some(d=>d.target.sessionId===t.sessionId&&d.target.studentId===t.studentId)):!1}removePendingChange(t){let e=[...this._pendingChanges()],i=e.splice(t,1)[0];if(this._pendingChanges.set(e),i&&i.action.type!=="remove_class"){let d=`${i.action.target.sessionId}-${i.action.target.studentId}`,_=this.allActiveItems().find(x=>x.sessionId===i.action.target.sessionId&&x.studentId===i.action.target.studentId);if(_){let x=this._modifiedOptions().get(d);if(x&&"addon"in i.action){let f=new Map(this._modifiedOptions());f.set(d,A(q({},x),{[i.action.addon]:_.options[i.action.addon]})),this._modifiedOptions.set(f)}}}}clearPendingChanges(){this._pendingChanges.set([]),this._modifiedOptions.set(new Map)}async applySubmittedChanges(){let t=this.submittedPendingChanges();if(t.length===0)return;let e=this.orderService.order();if(e){this._actionLoading.set(!0),this._actionError.set(null);try{let i=t.map(f=>f.action);await this.orderRpc.applySubmittedChanges({year:2026,seasonId:e.seasonId,actions:i});let d=this.paidPendingChanges();this._pendingChanges.set(d);let _=new Set(this.orderService.submittedItems().map(f=>`${f.sessionId}-${f.studentId}`)),x=new Map(this._modifiedOptions());for(let f of x.keys())_.has(f)&&x.delete(f);this._modifiedOptions.set(x),this._successMessage.set(`Successfully applied ${t.length} change(s)`),setTimeout(()=>this._successMessage.set(null),5e3)}catch(i){let d=i instanceof Error?i.message:"Failed to apply changes";this._actionError.set(d),setTimeout(()=>this._actionError.set(null),5e3)}finally{this._actionLoading.set(!1)}}}openRequestChangeDialog(){this.paidPendingChanges().length!==0&&(this.changeRequestReason="",this._showRequestChangeDialog.set(!0))}closeRequestChangeDialog(){this._showRequestChangeDialog.set(!1),this.changeRequestReason=""}async submitChangeRequest(){let t=this.paidPendingChanges();if(t.length===0)return;let e=this.orderService.order();if(e){this._actionLoading.set(!0),this._actionError.set(null);try{let i=t.map(f=>f.action);await this.orderRpc.requestOrderChange({year:2026,seasonId:e.seasonId,actions:i,reason:this.changeRequestReason.trim()||null});let d=this.submittedPendingChanges();this._pendingChanges.set(d);let _=new Set(this.orderService.paidItems().map(f=>`${f.sessionId}-${f.studentId}`)),x=new Map(this._modifiedOptions());for(let f of x.keys())_.has(f)&&x.delete(f);this._modifiedOptions.set(x),this.closeRequestChangeDialog(),this._successMessage.set("Change request submitted. An admin will review your request."),setTimeout(()=>this._successMessage.set(null),5e3)}catch(i){let d=i instanceof Error?i.message:"Failed to submit change request";this._actionError.set(d),setTimeout(()=>this._actionError.set(null),5e3)}finally{this._actionLoading.set(!1)}}}confirmJoinWaitlist(t){this._waitlistAction.set("join"),this._waitlistSessionId.set(t),this._showWaitlistDialog.set(!0)}confirmLeaveWaitlist(t){this._waitlistAction.set("leave"),this._waitlistSessionId.set(t.sessionId),this._showWaitlistDialog.set(!0)}closeWaitlistDialog(){this._showWaitlistDialog.set(!1),this._waitlistAction.set(null),this._waitlistSessionId.set(null)}async confirmWaitlistAction(){let t=this._waitlistAction(),e=this._waitlistSessionId();if(!(!t||!e)){this._actionLoading.set(!0),this._actionError.set(null);try{t==="join"?(await this.orderService.joinWaitlist(e),this._successMessage.set("Successfully joined waitlist")):t==="leave"&&(await this.orderService.leaveWaitlist(e),this._successMessage.set("Successfully left waitlist")),this.closeWaitlistDialog(),setTimeout(()=>this._successMessage.set(null),5e3)}catch(i){let d=i instanceof Error?i.message:"Failed to update waitlist";this._actionError.set(d),setTimeout(()=>this._actionError.set(null),5e3)}finally{this._actionLoading.set(!1)}}}getClassName(t){return this.seasonService.classes().find(i=>i.id===t)?.name??"Unknown Class"}getDateRange(t){let e=this.seasonService.classes().find(i=>i.id===t);return e?J(e.startDate,e.endDate):""}getStudentName(t){let e=this.userService.students().find(i=>i.id===t);return e?`${e.firstName} ${e.lastName}`.trim():"Unknown Student"}getLunchPrice(t){return this.seasonService.classes().find(i=>i.id===t)?.lunchPrice??0}getExtendedCarePrice(t){return this.seasonService.classes().find(i=>i.id===t)?.extendedCarePrice??0}getChangeRequestStatusLabel(t){switch(t){case"pending":return"Pending Review";case"approved":return"Approved";case"denied":return"Denied";default:return t}}getActionDescriptionText(t){let e=this.getClassName(t.target.sessionId),i=this.getStudentName(t.target.studentId);switch(t.type){case"remove_class":return`Remove from class: ${e} - ${i}`;case"add_addon":return`Add ${t.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${i}`;case"remove_addon":return`Remove ${t.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${i}`}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-order-edit"]],decls:16,vars:8,consts:[[1,"order-edit"],[1,"page-header"],["routerLink","/ledger",1,"back-link"],[1,"subtitle"],[1,"loading-container"],[1,"error-container"],[1,"empty-container"],[1,"edit-sections"],[1,"dialog-overlay"],[1,"toast","toast-success"],[1,"toast","toast-error"],[1,"spinner"],[1,"error-icon"],[1,"btn-retry",3,"click"],[1,"empty-icon"],["routerLink","/classes",1,"btn-primary"],[1,"edit-section"],[1,"section-header"],[1,"section-subtitle"],[1,"info-message"],[1,"subsection"],[1,"edit-section","pricing-section"],[1,"enrollment-list"],[1,"enrollment-card",3,"is-paid"],[1,"pending-changes-section"],[1,"enrollment-card"],[1,"enrollment-header"],[1,"enrollment-info"],[1,"class-name"],[1,"item-status"],[1,"enrollment-meta"],[1,"enrollment-options"],[1,"option-toggle"],["type","checkbox",3,"change","checked","disabled"],[1,"option-label"],[1,"enrollment-actions"],[1,"btn-danger-outline","btn-small",3,"click","disabled"],[1,"pending-badge"],[1,"pending-changes-list"],[1,"pending-change-item"],[1,"changes-summary"],[1,"summary-row"],[1,"summary-amount"],[1,"summary-note"],[1,"changes-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"disabled"],[1,"btn-warning",3,"disabled"],[1,"change-description"],[1,"change-price"],[1,"btn-icon",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"spinner-small"],[1,"btn-warning",3,"click","disabled"],[1,"change-requests-list"],[1,"change-request-card"],[1,"request-header"],[1,"request-id"],[1,"request-details"],[1,"request-actions-list"],[1,"request-action"],[1,"request-meta"],[1,"request-reason"],[1,"request-admin-notes"],[1,"waitlist-items"],[1,"waitlist-item"],[1,"waitlist-details"],[1,"waitlist-name"],[1,"waitlist-meta"],[1,"waitlist-status"],[1,"btn-secondary","btn-small",3,"click","disabled"],[1,"help-text"],[1,"available-classes"],[1,"available-class"],[1,"class-details"],[1,"class-meta"],[1,"class-capacity"],[1,"btn-primary","btn-small",3,"click","disabled"],[3,"data"],[1,"dialog"],[1,"dialog-content"],[1,"changes-list"],[1,"change-info"],[1,"warning-message"],[1,"form-group"],["for","changeReason"],["id","changeReason","rows","3","placeholder","Provide a reason for your change request...",3,"ngModelChange","ngModel"],[1,"dialog-actions"],[1,"btn-secondary",3,"click","disabled"],[1,"warning-icon"],[1,"warning-content"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"header",1)(2,"a",2),o(3,"\u2190 Back to Ledger"),r(),s(4,"h1"),o(5,"Edit Order"),r(),s(6,"p",3),o(7,"Manage your enrollments and waitlists"),r()(),m(8,Qe,4,0,"div",4),m(9,Xe,7,1,"div",5),m(10,Ze,9,0,"div",6),m(11,Mt,20,5,"div",7),m(12,Dt,26,9,"div",8),m(13,qt,12,5,"div",8),m(14,$t,2,1,"div",9),m(15,Ft,2,1,"div",10),r()),e&2&&(a(8),p(i.orderService.loading()||i.seasonService.loading()?8:-1),a(),p(i.orderService.error()?9:-1),a(),p(!i.orderService.loading()&&!i.orderService.order()?10:-1),a(),p(!i.orderService.loading()&&i.orderService.order()?11:-1),a(),p(i.showRequestChangeDialog()?12:-1),a(),p(i.showWaitlistDialog()?13:-1),a(),p(i.successMessage()?14:-1),a(),p(i.actionError()?15:-1))},dependencies:[F,ge,le,me,pe,ie,N],styles:[".order-edit[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:20px}.page-header[_ngcontent-%COMP%]{margin-bottom:30px}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#666;text-decoration:none;margin-bottom:10px;font-size:14px}.back-link[_ngcontent-%COMP%]:hover{color:#333}h1[_ngcontent-%COMP%]{margin:0 0 5px;font-size:28px}.subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.edit-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.edit-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:24px}.section-header[_ngcontent-%COMP%]{margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 5px;font-size:20px}.section-subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.info-message[_ngcontent-%COMP%]{padding:16px;background:#e3f2fd;border-left:4px solid #2196f3;border-radius:4px;color:#1976d2;margin-bottom:16px}.info-message.info-success[_ngcontent-%COMP%]{background:#e8f5e9;border-left-color:#4caf50;color:#2e7d32}.warning-message[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#fff3e0;border-left:4px solid #ff9800;border-radius:4px;margin-bottom:20px}.warning-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.warning-content[_ngcontent-%COMP%]{flex:1}.warning-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#e65100}.warning-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ef6c00;font-size:14px}.item-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:20px}.item-checkbox[_ngcontent-%COMP%]{display:flex;align-items:start;gap:12px;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s}.item-checkbox[_ngcontent-%COMP%]:hover{border-color:#2196f3;background:#f5f5f5}.item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:4px;width:18px;height:18px;cursor:pointer}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.item-meta[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.item-price[_ngcontent-%COMP%]{font-weight:600;color:#2196f3}.item-status[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 8px;border-radius:4px;display:inline-block}.item-status.status-submitted[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.item-status.status-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.item-status.status-pending-refund[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.enrollment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}.enrollment-card[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:8px;padding:16px;background:#fff}.enrollment-card.is-paid[_ngcontent-%COMP%]{border-color:#4caf50;background:#f8fff8}.enrollment-header[_ngcontent-%COMP%]{margin-bottom:12px}.enrollment-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.enrollment-info[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.enrollment-meta[_ngcontent-%COMP%]{font-size:14px;color:#666}.enrollment-options[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:12px;padding:12px;background:#f5f5f5;border-radius:6px}.option-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.option-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.option-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.option-label[_ngcontent-%COMP%]{font-size:14px}.enrollment-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.pending-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#ff9800;background:#fff3e0;padding:4px 8px;border-radius:4px}.pending-changes-section[_ngcontent-%COMP%]{margin-top:24px;padding:20px;background:#e3f2fd;border-radius:8px;border:1px solid #2196f3}.pending-changes-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#1565c0}.pending-changes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.pending-change-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:#fff;border-radius:4px}.change-description[_ngcontent-%COMP%]{flex:1;font-size:14px}.change-price[_ngcontent-%COMP%]{font-weight:600;color:#f44336}.change-price.credit[_ngcontent-%COMP%]{color:#4caf50}.btn-icon[_ngcontent-%COMP%]{width:24px;height:24px;border:none;background:#f5f5f5;border-radius:50%;cursor:pointer;font-size:16px;color:#666;display:flex;align-items:center;justify-content:center}.btn-icon[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.changes-summary[_ngcontent-%COMP%]{padding:12px;background:#fff;border-radius:4px;margin-bottom:16px}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:16px}.summary-amount[_ngcontent-%COMP%]{font-weight:600}.summary-amount.credit[_ngcontent-%COMP%]{color:#4caf50}.summary-note[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:8px}.changes-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.change-requests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.change-request-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:16px;background:#fafafa}.request-actions-list[_ngcontent-%COMP%]{color:#333}.request-action[_ngcontent-%COMP%]{margin-left:16px;color:#666;padding:4px 0}.request-admin-notes[_ngcontent-%COMP%]{color:#1565c0;font-style:italic;margin-top:8px}.changes-list[_ngcontent-%COMP%]{margin:12px 0;padding-left:20px}.changes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.change-info[_ngcontent-%COMP%]{margin:16px 0;padding:12px;background:#f5f5f5;border-radius:4px;display:flex;justify-content:space-between}.change-info[_ngcontent-%COMP%]   .credit[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.section-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-danger-outline[_ngcontent-%COMP%]{background:#fff;color:#f44336;border:1px solid #f44336;padding:6px 12px;border-radius:4px;font-size:13px;font-weight:500;cursor:pointer}.btn-danger-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f44336;color:#fff}.btn-danger-outline[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.subsection[_ngcontent-%COMP%]{margin-bottom:30px}.subsection[_ngcontent-%COMP%]:last-child{margin-bottom:0}.subsection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px}.help-text[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:14px}.waitlist-items[_ngcontent-%COMP%], .available-classes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.waitlist-item[_ngcontent-%COMP%], .available-class[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;padding:16px;border:1px solid #e0e0e0;border-radius:8px}.waitlist-details[_ngcontent-%COMP%], .class-details[_ngcontent-%COMP%]{flex:1}.waitlist-name[_ngcontent-%COMP%], .class-name[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.waitlist-meta[_ngcontent-%COMP%], .class-meta[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.waitlist-status[_ngcontent-%COMP%], .class-capacity[_ngcontent-%COMP%]{font-size:13px;color:#999}.badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:600;margin-left:8px}.badge-success[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-retry[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f}.btn-warning[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover:not(:disabled){background:#f57c00}.btn-small[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.btn-retry[_ngcontent-%COMP%]{background:#2196f3;color:#fff;margin-top:10px}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px}.dialog-content[_ngcontent-%COMP%]{margin-bottom:20px}.cancel-items-list[_ngcontent-%COMP%]{margin:12px 0;padding-left:20px}.cancel-items-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.refund-info[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#f5f5f5;border-radius:6px}.refund-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:12px}.refund-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.refund-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.refund-total[_ngcontent-%COMP%]{padding-top:8px;border-top:2px solid #ddd;font-weight:600;font-size:16px}.form-group[_ngcontent-%COMP%]{margin-top:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600}.required[_ngcontent-%COMP%]{color:#f44336}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-family:inherit;font-size:14px;resize:vertical}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-container[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:8px;vertical-align:middle}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#f44336;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;margin:0 auto 20px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px}.toast[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;padding:16px 20px;border-radius:6px;color:#fff;font-weight:500;box-shadow:0 4px 12px #00000026;z-index:1001;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.toast-success[_ngcontent-%COMP%]{background:#4caf50}.toast-error[_ngcontent-%COMP%]{background:#f44336}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}.refund-requests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.refund-request-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:16px;background:#fafafa}.request-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.request-id[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#666}.request-status[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 10px;border-radius:12px;text-transform:uppercase}.request-status.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.request-status.status-approved[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.request-status.status-refunded[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.request-status.status-denied[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.request-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-size:14px}.request-items[_ngcontent-%COMP%]{color:#333}.request-item[_ngcontent-%COMP%]{margin-left:16px;color:#666}.request-meta[_ngcontent-%COMP%]{display:flex;gap:16px;color:#888;font-size:13px}.request-reason[_ngcontent-%COMP%]{color:#666;font-style:italic}@media(max-width:768px){.order-edit[_ngcontent-%COMP%], .edit-section[_ngcontent-%COMP%]{padding:16px}.waitlist-item[_ngcontent-%COMP%], .available-class[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.dialog[_ngcontent-%COMP%]{width:95%;padding:20px}.request-meta[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}"]})};export{ve as OrderEditComponent};
