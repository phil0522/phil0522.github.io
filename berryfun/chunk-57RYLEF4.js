import{a as $,b as H,c as G,f as J,h as K,i as Q,j as X,k as Z,m as ee,n as te,r as ne}from"./chunk-EQMCSFBV.js";import{b as Y}from"./chunk-JQOFVLIA.js";import{a as j}from"./chunk-XZULWM4O.js";import{a as R}from"./chunk-VYJPQB7B.js";import{a as U}from"./chunk-2RRSDDC6.js";import{d as z,j as N,k as q}from"./chunk-Z3TSPNBE.js";import{Ab as l,Bb as b,Cb as h,Db as k,Gb as p,Ha as s,Hb as u,Ib as f,Lb as F,R as E,Rb as L,Sa as W,W as m,X as _,ab as g,bb as C,cb as A,db as M,eb as P,fb as y,gb as o,ha as T,hb as i,ib as I,mb as S,ob as x,qb as c,yb as v}from"./chunk-EVJ2WVWM.js";function V(r){return`$${(r/100).toFixed(2)}`}function ie(r,n){let e=new Date(r),a=new Date(n),t=e.toLocaleDateString("en-US",{month:"short"}),d=a.toLocaleDateString("en-US",{month:"short"}),D=e.getDate(),w=a.getDate(),B=e.getFullYear();return t===d?`${t} ${D} - ${w}, ${B}`:`${t} ${D} - ${d} ${w}, ${B}`}var ae=()=>[],O=(r,n)=>n.id,re=(r,n)=>n.minSessions;function se(r,n){if(r&1&&(o(0,"option",19),l(1),i()),r&2){let e=n.$implicit;y("value",e.id),s(),b(e.name)}}function le(r,n){if(r&1){let e=S();o(0,"select",17),f("ngModelChange",function(t){m(e);let d=c();return u(d.selectedSeasonIdForFilter,t)||(d.selectedSeasonIdForFilter=t),_(t)}),o(1,"option",18),l(2,"All Seasons"),i(),M(3,se,2,2,"option",19,O),i()}if(r&2){let e=c();p("ngModel",e.selectedSeasonIdForFilter),s(3),P(e.seasonService.seasons())}}function de(r,n){r&1&&(o(0,"div",12),I(1,"div",20),o(2,"p"),l(3,"Loading catalog..."),i()())}function ce(r,n){if(r&1){let e=S();o(0,"div",13)(1,"div",21),l(2,"!"),i(),o(3,"p"),l(4),i(),o(5,"button",22),x("click",function(){m(e);let t=c();return _(t.loadCatalog())}),l(6,"Retry"),i()()}if(r&2){let e=c();s(4),b(e.seasonService.error())}}function me(r,n){if(r&1&&(o(0,"div",31),l(1),i()),r&2){let e=c().$implicit;s(),h(" ",e.description," ")}}function _e(r,n){if(r&1){let e=S();o(0,"div",25)(1,"div",26)(2,"div")(3,"h3"),l(4),i(),o(5,"p",27),l(6),i()(),o(7,"span",28),l(8),i()(),o(9,"div",29)(10,"div",30)(11,"span"),l(12,"Year:"),i(),o(13,"span"),l(14),i()(),o(15,"div",30)(16,"span"),l(17,"Classes:"),i(),o(18,"span"),l(19),i()(),g(20,me,2,1,"div",31),i(),o(21,"div",32)(22,"button",33),x("click",function(){let t=m(e).$implicit,d=c(2);return _(d.openEditSeasonDialog(t))}),l(23,"Edit"),i(),o(24,"button",34),x("click",function(){let t=m(e).$implicit,d=c(2);return _(d.toggleSeasonActive(t))}),l(25),i()()()}if(r&2){let e=n.$implicit,a=c(2);v("inactive",!e.isActive),s(4),b(e.name),s(2),h(" ",a.formatDateRange(e.startDate,e.endDate)," "),s(),v("active",e.isActive),s(),h(" ",e.isActive?"Active":"Inactive"," "),s(6),b(e.year),s(5),b(e.sessions.length),s(),C(e.description?20:-1),s(4),v("btn-activate",!e.isActive),y("disabled",a.seasonService.actionLoading()),s(),h(" ",e.isActive?"Deactivate":"Activate"," ")}}function ge(r,n){if(r&1){let e=S();o(0,"div",24)(1,"p"),l(2),i(),o(3,"button",11),x("click",function(){m(e);let t=c(2);return _(t.openCreateDialog())}),l(4,"Create Season"),i()()}if(r&2){let e=c(2);s(2),h("No ",e.showActiveOnly()?"active":""," seasons found")}}function Ce(r,n){if(r&1&&(o(0,"div",14),M(1,_e,26,14,"div",23,O),g(3,ge,5,1,"div",24),i()),r&2){let e=c();s(),P(e.displayedSeasons()),s(2),C(e.displayedSeasons().length===0?3:-1)}}function pe(r,n){if(r&1){let e=S();o(0,"tr")(1,"td"),l(2),i(),o(3,"td"),l(4),i(),o(5,"td"),l(6),i(),o(7,"td"),l(8),i(),o(9,"td")(10,"span"),l(11),i()(),o(12,"td"),l(13),i(),o(14,"td")(15,"span",28),l(16),i()(),o(17,"td")(18,"div",37)(19,"button",38),x("click",function(){let t=m(e).$implicit,d=c(2);return _(d.openEditClassDialog(t))}),l(20,"Edit"),i(),o(21,"button",39),x("click",function(){let t=m(e).$implicit,d=c(2);return _(d.toggleClassActive(t))}),l(22),i()()()()}if(r&2){let e=n.$implicit,a=c(2);v("inactive",!e.isActive),s(2),b(e.name),s(2),b(a.getSeasonName(e.seasonId)),s(2),b(a.formatDateRange(e.startDate,e.endDate)),s(2),b(e.capacity),s(2),v("text-warning",a.getEnrolledCount(e.id)>=e.capacity),s(),h(" ",a.getEnrolledCount(e.id)," "),s(2),b(a.formatCurrency(e.basePrice)),s(2),v("active",e.isActive),s(),h(" ",e.isActive?"Active":"Inactive"," "),s(5),v("btn-activate",!e.isActive),y("disabled",a.seasonService.actionLoading()),s(),h(" ",e.isActive?"Hide":"Show"," ")}}function ue(r,n){if(r&1){let e=S();o(0,"div",24)(1,"p"),l(2),i(),o(3,"button",11),x("click",function(){m(e);let t=c(2);return _(t.openCreateDialog())}),l(4,"Create Class"),i()()}if(r&2){let e=c(2);s(2),h("No ",e.showActiveOnly()?"active":""," classes found")}}function fe(r,n){if(r&1&&(o(0,"div",15)(1,"table",35)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),i(),o(6,"th"),l(7,"Season"),i(),o(8,"th"),l(9,"Dates"),i(),o(10,"th"),l(11,"Capacity"),i(),o(12,"th"),l(13,"Enrolled"),i(),o(14,"th"),l(15,"Price"),i(),o(16,"th"),l(17,"Status"),i(),o(18,"th"),l(19,"Actions"),i()()(),o(20,"tbody"),M(21,pe,23,17,"tr",36,O),i()(),g(23,ue,5,1,"div",24),i()),r&2){let e=c();s(21),P(e.displayedClasses()),s(2),C(e.displayedClasses().length===0?23:-1)}}function xe(r,n){r&1&&(o(0,"span",67),l(1,"Has content"),i())}function he(r,n){if(r&1){let e=S();o(0,"div",68)(1,"textarea",72),f("ngModelChange",function(t){m(e);let d=c(3);return u(d.formSeason.description,t)||(d.formSeason.description=t),_(t)}),i()()}if(r&2){let e=c(3);s(),p("ngModel",e.formSeason.description)}}function Se(r,n){r&1&&(o(0,"span",67),l(1,"Configured"),i())}function be(r,n){if(r&1&&(o(0,"span",80),l(1),i()),r&2){let e=n.$implicit;s(),k("",e.minSessions,"+: ","$"+(e.discountAmount/100).toFixed(2)," off")}}function ye(r,n){if(r&1&&(o(0,"div",79),M(1,be,2,2,"span",80,re),i()),r&2){let e=c();s(),P(e)}}function ve(r,n){r&1&&g(0,ye,3,0,"div",79),r&2&&C(n.length>0?0:-1)}function Me(r,n){r&1&&(o(0,"div",78),l(1,"Invalid format"),i())}function Pe(r,n){if(r&1&&g(0,ve,1,1)(1,Me,2,0,"div",78),r&2){let e,a=c(4);C((e=a.getParsedMultiSessionDiscounts())?0:1,e)}}function we(r,n){if(r&1){let e=S();o(0,"div",68)(1,"div",51)(2,"div",47)(3,"label",73),l(4,"Sibling Discount/Week ($)"),i(),o(5,"div",74)(6,"input",75),f("ngModelChange",function(t){m(e);let d=c(3);return u(d.formSeason.siblingDiscountPerWeek,t)||(d.formSeason.siblingDiscountPerWeek=t),_(t)}),i(),o(7,"span",57),l(8,"Per student when 2+ siblings"),i()()(),o(9,"div",47)(10,"label",76),l(11,"Multi-Session ($)"),i(),o(12,"div",74)(13,"input",77),f("ngModelChange",function(t){m(e);let d=c(3);return u(d.formSeason.multiSessionDiscountsText,t)||(d.formSeason.multiSessionDiscountsText=t),_(t)}),i(),o(14,"span",57),l(15,'sessions:discount (e.g., "2:10.00" = $10 off)'),i()()()(),g(16,Pe,2,1),i()}if(r&2){let e=c(3);s(6),p("ngModel",e.formSeason.siblingDiscountPerWeek),s(7),p("ngModel",e.formSeason.multiSessionDiscountsText),s(3),C(e.formSeason.multiSessionDiscountsText?16:-1)}}function De(r,n){if(r&1&&(o(0,"span",67),l(1),i()),r&2){let e=c(3);s(),h("",e.formSeason.earlyBirdTiers.length," tier(s)")}}function Te(r,n){if(r&1){let e=S();o(0,"div",82)(1,"input",84),f("ngModelChange",function(t){let d=m(e).$implicit;return u(d.deadline,t)||(d.deadline=t),_(t)}),i(),o(2,"input",85),f("ngModelChange",function(t){let d=m(e).$implicit;return u(d.price,t)||(d.price=t),_(t)}),i(),o(3,"span",86),l(4),i(),o(5,"button",87),x("click",function(){let t=m(e).$index,d=c(4);return _(d.removeSeasonEarlyBirdTier(t))}),l(6,"\xD7"),i()()}if(r&2){let e=n.$implicit;s(),p("ngModel",e.deadline),s(),p("ngModel",e.price),s(2),b("$"+e.price.toFixed(2))}}function Ee(r,n){if(r&1){let e=S();o(0,"div",68)(1,"div",81),M(2,Te,7,3,"div",82,A),o(4,"button",83),x("click",function(){m(e);let t=c(3);return _(t.addSeasonEarlyBirdTier())}),l(5," + Add Tier "),i(),o(6,"span",57),l(7),i()()()}if(r&2){let e=c(3);s(2),P(e.formSeason.earlyBirdTiers),s(5),h("Classes inherit these tiers. Base: ","$"+e.formSeason.basePrice.toFixed(2))}}function Ae(r,n){if(r&1){let e=S();o(0,"div",42)(1,"div",43)(2,"div",44)(3,"label",45),l(4,"Season Name *"),i(),o(5,"input",46),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.name,t)||(d.formSeason.name=t),_(t)}),i()(),o(6,"div",47)(7,"label",48),l(8,"Year *"),i(),o(9,"input",49),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.year,t)||(d.formSeason.year=t),_(t)}),i()(),o(10,"div",50)(11,"label")(12,"input",9),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.isActive,t)||(d.formSeason.isActive=t),_(t)}),i(),l(13," Active "),i()()(),o(14,"div",51)(15,"div",47)(16,"label",52),l(17,"Start Date *"),i(),o(18,"input",53),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.startDate,t)||(d.formSeason.startDate=t),_(t)}),i()(),o(19,"div",47)(20,"label",54),l(21,"End Date *"),i(),o(22,"input",55),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.endDate,t)||(d.formSeason.endDate=t),_(t)}),i()()(),o(23,"div",56)(24,"h4"),l(25,"Pricing ($) *"),i(),o(26,"span",57),l(27,"Classes inherit these prices unless overridden"),i()(),o(28,"div",43)(29,"div",47)(30,"label",58),l(31,"Base ($)"),i(),o(32,"input",59),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.basePrice,t)||(d.formSeason.basePrice=t),_(t)}),i()(),o(33,"div",47)(34,"label",60),l(35,"Lunch ($)"),i(),o(36,"input",61),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.lunchPrice,t)||(d.formSeason.lunchPrice=t),_(t)}),i()(),o(37,"div",47)(38,"label",62),l(39,"Extended Care ($)"),i(),o(40,"input",63),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formSeason.extendedCarePrice,t)||(d.formSeason.extendedCarePrice=t),_(t)}),i()()(),o(41,"div",64)(42,"button",65),x("click",function(){m(e);let t=c(2);return _(t.toggleSection("description"))}),o(43,"span",66),l(44),i(),l(45," Description "),g(46,xe,2,0,"span",67),i(),g(47,he,2,1,"div",68),i(),o(48,"div",64)(49,"button",65),x("click",function(){m(e);let t=c(2);return _(t.toggleSection("discounts"))}),o(50,"span",66),l(51),i(),l(52," Discounts "),g(53,Se,2,0,"span",67),i(),g(54,we,17,3,"div",68),i(),o(55,"div",64)(56,"button",65),x("click",function(){m(e);let t=c(2);return _(t.toggleSection("earlybird"))}),o(57,"span",66),l(58),i(),l(59," Early Bird Pricing "),g(60,De,2,1,"span",67),i(),g(61,Ee,8,1,"div",68),i(),o(62,"div",69)(63,"button",70),x("click",function(){m(e);let t=c(2);return _(t.closeDialog())}),l(64,"Cancel"),i(),o(65,"button",71),x("click",function(){m(e);let t=c(2);return _(t.saveSeason())}),l(66),i()()()}if(r&2){let e=c(2);s(5),p("ngModel",e.formSeason.name),s(4),p("ngModel",e.formSeason.year),y("disabled",e.dialogMode()==="edit-season"),s(3),p("ngModel",e.formSeason.isActive),s(6),p("ngModel",e.formSeason.startDate),s(4),p("ngModel",e.formSeason.endDate),s(10),p("ngModel",e.formSeason.basePrice),s(4),p("ngModel",e.formSeason.lunchPrice),s(4),p("ngModel",e.formSeason.extendedCarePrice),s(4),b(e.expandedSections().has("description")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.description?46:-1),s(),C(e.expandedSections().has("description")?47:-1),s(4),b(e.expandedSections().has("discounts")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.siblingDiscountPerWeek||e.formSeason.multiSessionDiscountsText?53:-1),s(),C(e.expandedSections().has("discounts")?54:-1),s(4),b(e.expandedSections().has("earlybird")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.earlyBirdTiers.length>0?60:-1),s(),C(e.expandedSections().has("earlybird")?61:-1),s(4),y("disabled",!e.isSeasonFormValid()),s(),h(" ",e.dialogMode()==="create-season"?"Create":"Save"," ")}}function Oe(r,n){if(r&1&&(o(0,"option",19),l(1),i()),r&2){let e=n.$implicit;y("value",e.id),s(),b(e.name)}}function ke(r,n){if(r&1&&(o(0,"span",101),l(1),i()),r&2){let e=c(3);s(),h("Using season default: ",e.getSeasonPricingDisplay("basePrice"))}}function Le(r,n){if(r&1&&(o(0,"span",101),l(1),i()),r&2){let e=c(3);s(),h("Using season default: ",e.getSeasonPricingDisplay("lunchPrice"))}}function Ve(r,n){if(r&1&&(o(0,"span",101),l(1),i()),r&2){let e=c(3);s(),h("Using season default: ",e.getSeasonPricingDisplay("extendedCarePrice"))}}function Be(r,n){if(r&1&&(o(0,"span",80),l(1),i()),r&2){let e=n.$implicit,a=c(4);s(),k("Before ",e.deadline,": ",a.formatCurrency(e.price))}}function We(r,n){r&1&&(o(0,"span",57),l(1,"No early bird tiers defined at season level"),i())}function Ie(r,n){if(r&1){let e=S();o(0,"div",106)(1,"span",101),l(2,"Using season default tiers:"),i(),M(3,Be,2,2,"span",80,A),g(5,We,2,0,"span",57),o(6,"button",83),x("click",function(){m(e);let t=c(3);return _(t.initializeClassEarlyBirdTiers())}),l(7," + Override with custom tiers "),i()()}if(r&2){let e=c(3);s(3),P(e.getSeasonEarlyBirdTiers()),s(2),C(e.getSeasonEarlyBirdTiers().length===0?5:-1)}}function Fe(r,n){if(r&1){let e=S();o(0,"div",82)(1,"input",84),f("ngModelChange",function(t){let d=m(e).$implicit;return u(d.deadline,t)||(d.deadline=t),_(t)}),i(),o(2,"input",85),f("ngModelChange",function(t){let d=m(e).$implicit;return u(d.price,t)||(d.price=t),_(t)}),i(),o(3,"span",86),l(4),i(),o(5,"button",87),x("click",function(){let t=m(e).$index,d=c(4);return _(d.removeEarlyBirdTier(t))}),l(6,"\xD7"),i()()}if(r&2){let e=n.$implicit;s(),p("ngModel",e.deadline),s(),p("ngModel",e.price),s(2),b("$"+e.price.toFixed(2))}}function ze(r,n){if(r&1){let e=S();o(0,"button",108),x("click",function(){m(e);let t=c(4);return _(t.clearClassEarlyBirdTiers())}),l(1," Use season defaults instead "),i()}}function Ne(r,n){if(r&1){let e=S();M(0,Fe,7,3,"div",82,A),o(2,"button",83),x("click",function(){m(e);let t=c(3);return _(t.addEarlyBirdTier())}),l(3," + Add Early Bird Tier "),i(),g(4,ze,2,0,"button",107),o(5,"span",57),l(6),i()}if(r&2){let e=c(3);P(e.formClass.earlyBirdTiers??F(2,ae)),s(4),C(e.formClass.earlyBirdTiers!==null?4:-1),s(2),h("Orders placed before deadline get discounted price. Base: ",e.getEffectiveBasePrice())}}function qe(r,n){if(r&1){let e=S();o(0,"div",42)(1,"div",47)(2,"label",88),l(3,"Class Name *"),i(),o(4,"input",89),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.name,t)||(d.formClass.name=t),_(t)}),i()(),o(5,"div",51)(6,"div",47)(7,"label",90),l(8,"Season *"),i(),o(9,"select",91),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.seasonId,t)||(d.formClass.seasonId=t),_(t)}),o(10,"option",18),l(11,"Select season..."),i(),M(12,Oe,2,2,"option",19,O),i()(),o(14,"div",47)(15,"label")(16,"input",9),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.isActive,t)||(d.formClass.isActive=t),_(t)}),i(),l(17," Active "),i()()(),o(18,"div",51)(19,"div",47)(20,"label",92),l(21,"Start Date *"),i(),o(22,"input",93),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.startDate,t)||(d.formClass.startDate=t),_(t)}),i()(),o(23,"div",47)(24,"label",94),l(25,"End Date *"),i(),o(26,"input",95),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.endDate,t)||(d.formClass.endDate=t),_(t)}),i()()(),o(27,"div",47)(28,"label",96),l(29,"Capacity *"),i(),o(30,"input",97),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.capacity,t)||(d.formClass.capacity=t),_(t)}),i()(),o(31,"div",98)(32,"h4"),l(33,"Pricing (Optional - inherits from Season)"),i(),o(34,"span",57),l(35,"Leave empty to use Season default prices"),i()(),o(36,"div",51)(37,"div",47)(38,"label",99),l(39,"Base Price ($)"),i(),o(40,"div",74)(41,"input",100),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.basePrice,t)||(d.formClass.basePrice=t),_(t)}),i(),g(42,ke,2,1,"span",101),i()(),o(43,"div",47)(44,"label",102),l(45,"Lunch Price ($)"),i(),o(46,"div",74)(47,"input",103),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.lunchPrice,t)||(d.formClass.lunchPrice=t),_(t)}),i(),g(48,Le,2,1,"span",101),i()()(),o(49,"div",47)(50,"label",104),l(51,"Extended Care Price ($)"),i(),o(52,"div",74)(53,"input",105),f("ngModelChange",function(t){m(e);let d=c(2);return u(d.formClass.extendedCarePrice,t)||(d.formClass.extendedCarePrice=t),_(t)}),i(),g(54,Ve,2,1,"span",101),i()(),o(55,"div",47)(56,"label"),l(57,"Early Bird Pricing Tiers ($)"),i(),o(58,"div",81),g(59,Ie,8,1,"div",106)(60,Ne,7,3),i()(),o(61,"div",69)(62,"button",70),x("click",function(){m(e);let t=c(2);return _(t.closeDialog())}),l(63,"Cancel"),i(),o(64,"button",71),x("click",function(){m(e);let t=c(2);return _(t.saveClass())}),l(65),i()()()}if(r&2){let e=c(2);s(4),p("ngModel",e.formClass.name),s(5),p("ngModel",e.formClass.seasonId),y("disabled",e.dialogMode()==="edit-class"),s(3),P(e.seasonService.seasons()),s(4),p("ngModel",e.formClass.isActive),s(6),p("ngModel",e.formClass.startDate),s(4),p("ngModel",e.formClass.endDate),s(4),p("ngModel",e.formClass.capacity),s(11),p("ngModel",e.formClass.basePrice),y("placeholder","Inherited: "+e.getSeasonPricingDisplay("basePrice")),s(),C(e.formClass.basePrice===null&&e.formClass.seasonId?42:-1),s(5),p("ngModel",e.formClass.lunchPrice),y("placeholder","Inherited: "+e.getSeasonPricingDisplay("lunchPrice")),s(),C(e.formClass.lunchPrice===null&&e.formClass.seasonId?48:-1),s(5),p("ngModel",e.formClass.extendedCarePrice),y("placeholder","Inherited: "+e.getSeasonPricingDisplay("extendedCarePrice")),s(),C(e.formClass.extendedCarePrice===null&&e.formClass.seasonId?54:-1),s(5),C(e.formClass.earlyBirdTiers===null&&e.formClass.seasonId?59:60),s(5),y("disabled",!e.isClassFormValid()),s(),h(" ",e.dialogMode()==="create-class"?"Create":"Save"," ")}}function Re(r,n){if(r&1){let e=S();o(0,"div",40),x("click",function(){m(e);let t=c();return _(t.closeDialog())}),o(1,"div",41),x("click",function(t){return m(e),_(t.stopPropagation())}),o(2,"h3"),l(3),i(),g(4,Ae,67,20,"div",42),g(5,qe,66,19,"div",42),i()()}if(r&2){let e=c();s(3),b(e.getDialogTitle()),s(),C(e.dialogMode()==="create-season"||e.dialogMode()==="edit-season"?4:-1),s(),C(e.dialogMode()==="create-class"||e.dialogMode()==="edit-class"?5:-1)}}var oe=class r{seasonService=E(j);configService=E(U);userService=E(Y);router=E(N);datastore=E(R);_enrollmentMap=T(new Map);formatCurrency=V;formatDateRange=ie;centsToDollars(n){return n/100}dollarsToCents(n){return Math.round(n*100)}viewMode=T("seasons");showActiveOnly=T(!0);selectedSeasonIdForFilter=T("");dialogMode=T(null);expandedSections=T(new Set);formSeason={name:"",year:0,startDate:"",endDate:"",isActive:!0,description:"",siblingDiscountPerWeek:5,multiSessionDiscountsText:"",basePrice:500,lunchPrice:50,extendedCarePrice:100,earlyBirdTiers:[]};formClass={seasonId:"",name:"",startDate:"",endDate:"",capacity:20,basePrice:null,lunchPrice:null,extendedCarePrice:null,isActive:!0,earlyBirdTiers:null};displayedSeasons=L(()=>{let n=this.seasonService.seasons();return this.showActiveOnly()?n.filter(e=>e.isActive):n});displayedClasses=L(()=>{let n=this.seasonService.classes();this.showActiveOnly()&&(n=n.filter(a=>a.isActive));let e=this.selectedSeasonIdForFilter();return e&&(n=n.filter(a=>a.seasonId===e)),n});async ngOnInit(){if(!this.userService.isAuthenticated()){this.router.navigate(["/login"]);return}if(!this.userService.isAdmin()){this.router.navigate(["/"]);return}await this.loadCatalog()}async loadCatalog(){let n=this.configService.currentActiveYear();try{await Promise.all([this.seasonService.loadAllSeasons(n),this.seasonService.loadAllClasses(n)]),await this.loadEnrollmentData(n)}catch(e){console.error("Failed to load catalog:",e)}}async loadEnrollmentData(n){let e=this.seasonService.seasons(),a=new Map;for(let t of e)try{let d=await this.datastore.getRegistration(n,t.id);if(d?.classes)for(let[D,w]of Object.entries(d.classes))a.set(D,w.enrolledStudents?.length??0)}catch{}this._enrollmentMap.set(a)}getEnrolledCount(n){return this._enrollmentMap().get(n)??0}openCreateDialog(){this.viewMode()==="seasons"?(this.formSeason={name:"",year:this.configService.currentActiveYear(),startDate:"",endDate:"",isActive:!0,description:"",siblingDiscountPerWeek:5,multiSessionDiscountsText:"",basePrice:500,lunchPrice:50,extendedCarePrice:100,earlyBirdTiers:[]},this.dialogMode.set("create-season")):(this.formClass={seasonId:"",name:"",startDate:"",endDate:"",capacity:20,basePrice:null,lunchPrice:null,extendedCarePrice:null,isActive:!0,earlyBirdTiers:null},this.dialogMode.set("create-class"))}openEditSeasonDialog(n){this.formSeason={id:n.id,name:n.name,year:n.year,startDate:n.startDate,endDate:n.endDate,isActive:n.isActive,description:n.description??"",siblingDiscountPerWeek:this.centsToDollars(n.siblingDiscountPerWeek??500),multiSessionDiscountsText:this.encodeMultiSessionDiscounts(n.multiSessionDiscounts??[]),basePrice:this.centsToDollars(n.basePrice),lunchPrice:this.centsToDollars(n.lunchPrice),extendedCarePrice:this.centsToDollars(n.extendedCarePrice),earlyBirdTiers:n.earlyBirdTiers?n.earlyBirdTiers.map(a=>({deadline:a.deadline,price:this.centsToDollars(a.price)})):[]};let e=new Set;n.description&&e.add("description"),(n.siblingDiscountPerWeek||(n.multiSessionDiscounts?.length??0)>0)&&e.add("discounts"),(n.earlyBirdTiers?.length??0)>0&&e.add("earlybird"),this.expandedSections.set(e),this.dialogMode.set("edit-season")}openEditClassDialog(n){this.formClass={id:n.id,seasonId:n.seasonId,name:n.name,startDate:n.startDate,endDate:n.endDate,capacity:n.capacity,basePrice:n.basePrice!=null?this.centsToDollars(n.basePrice):null,lunchPrice:n.lunchPrice!=null?this.centsToDollars(n.lunchPrice):null,extendedCarePrice:n.extendedCarePrice!=null?this.centsToDollars(n.extendedCarePrice):null,isActive:n.isActive,earlyBirdTiers:n.earlyBirdTiers?n.earlyBirdTiers.map(e=>({deadline:e.deadline,price:this.centsToDollars(e.price)})):null},this.dialogMode.set("edit-class")}closeDialog(){this.dialogMode.set(null),this.expandedSections.set(new Set)}toggleSection(n){let e=new Set(this.expandedSections());e.has(n)?e.delete(n):e.add(n),this.expandedSections.set(e)}getDialogTitle(){switch(this.dialogMode()){case"create-season":return"Create Season";case"edit-season":return"Edit Season";case"create-class":return"Create Class";case"edit-class":return"Edit Class";default:return""}}isSeasonFormValid(){return!!(this.formSeason.name&&this.formSeason.year&&this.formSeason.startDate&&this.formSeason.endDate&&this.formSeason.basePrice>0&&this.formSeason.lunchPrice>=0&&this.formSeason.extendedCarePrice>=0)}isClassFormValid(){return!!(this.formClass.name&&this.formClass.seasonId&&this.formClass.startDate&&this.formClass.endDate&&this.formClass.capacity>0)}async saveSeason(){if(!this.isSeasonFormValid())return;let n=this.parseMultiSessionDiscounts(this.formSeason.multiSessionDiscountsText);if(n===null){alert("Invalid multi-session discount format. Use format: 2:10.00, 3:20.00");return}let e=[...this.formSeason.earlyBirdTiers].sort((a,t)=>a.deadline.localeCompare(t.deadline)).map(a=>({deadline:a.deadline,price:this.dollarsToCents(a.price)}));try{if(this.dialogMode()==="create-season"){let a={year:this.formSeason.year,name:this.formSeason.name,startDate:this.formSeason.startDate,endDate:this.formSeason.endDate,isActive:this.formSeason.isActive,description:this.formSeason.description,siblingDiscountPerWeek:this.dollarsToCents(this.formSeason.siblingDiscountPerWeek),multiSessionDiscounts:n,refundProcessingFee:2e3,basePrice:this.dollarsToCents(this.formSeason.basePrice),lunchPrice:this.dollarsToCents(this.formSeason.lunchPrice),extendedCarePrice:this.dollarsToCents(this.formSeason.extendedCarePrice),earlyBirdTiers:e,sessions:[]};await this.seasonService.createSeason(a)}else this.dialogMode()==="edit-season"&&this.formSeason.id&&await this.seasonService.updateSeason(this.formSeason.id,{name:this.formSeason.name,startDate:this.formSeason.startDate,endDate:this.formSeason.endDate,isActive:this.formSeason.isActive,description:this.formSeason.description,siblingDiscountPerWeek:this.dollarsToCents(this.formSeason.siblingDiscountPerWeek),multiSessionDiscounts:n,basePrice:this.dollarsToCents(this.formSeason.basePrice),lunchPrice:this.dollarsToCents(this.formSeason.lunchPrice),extendedCarePrice:this.dollarsToCents(this.formSeason.extendedCarePrice),earlyBirdTiers:e});this.closeDialog()}catch(a){alert("Failed to save season: "+a.message)}}async saveClass(){if(!this.isClassFormValid())return;let n=this.formClass.earlyBirdTiers?[...this.formClass.earlyBirdTiers].sort((e,a)=>e.deadline.localeCompare(a.deadline)).map(e=>({deadline:e.deadline,price:this.dollarsToCents(e.price)})):void 0;try{if(this.dialogMode()==="create-class"){let e={seasonId:this.formClass.seasonId,name:this.formClass.name,startDate:this.formClass.startDate,endDate:this.formClass.endDate,capacity:this.formClass.capacity,basePrice:this.formClass.basePrice!=null?this.dollarsToCents(this.formClass.basePrice):void 0,lunchPrice:this.formClass.lunchPrice!=null?this.dollarsToCents(this.formClass.lunchPrice):void 0,extendedCarePrice:this.formClass.extendedCarePrice!=null?this.dollarsToCents(this.formClass.extendedCarePrice):void 0,isActive:this.formClass.isActive,earlyBirdTiers:n};await this.seasonService.createClass(e)}else this.dialogMode()==="edit-class"&&this.formClass.id&&await this.seasonService.updateClass(this.formClass.id,{name:this.formClass.name,startDate:this.formClass.startDate,endDate:this.formClass.endDate,capacity:this.formClass.capacity,basePrice:this.formClass.basePrice!=null?this.dollarsToCents(this.formClass.basePrice):void 0,lunchPrice:this.formClass.lunchPrice!=null?this.dollarsToCents(this.formClass.lunchPrice):void 0,extendedCarePrice:this.formClass.extendedCarePrice!=null?this.dollarsToCents(this.formClass.extendedCarePrice):void 0,isActive:this.formClass.isActive,earlyBirdTiers:n});this.closeDialog()}catch(e){alert("Failed to save class: "+e.message)}}async toggleSeasonActive(n){try{await this.seasonService.toggleSeasonActive(n.id)}catch(e){alert("Failed to toggle season status: "+e.message)}}async toggleClassActive(n){try{await this.seasonService.toggleClassActive(n.id)}catch(e){alert("Failed to toggle class status: "+e.message)}}addEarlyBirdTier(){this.formClass.earlyBirdTiers===null&&(this.formClass.earlyBirdTiers=[]);let n=new Date;n.setDate(n.getDate()+14);let e=n.toISOString().split("T")[0],a=this.formClass.basePrice??this.getSeasonBasePriceDollars(),t=Math.max(0,a-50);this.formClass.earlyBirdTiers.push({deadline:e,price:t})}removeEarlyBirdTier(n){this.formClass.earlyBirdTiers&&this.formClass.earlyBirdTiers.splice(n,1)}getSeasonBasePriceDollars(){if(!this.formClass.seasonId)return 500;let n=this.seasonService.seasons().find(e=>e.id===this.formClass.seasonId);return this.centsToDollars(n?.basePrice??5e4)}encodeMultiSessionDiscounts(n){return!n||n.length===0?"":n.sort((e,a)=>e.minSessions-a.minSessions).map(e=>`${e.minSessions}:${(e.discountAmount/100).toFixed(2)}`).join(", ")}parseMultiSessionDiscounts(n){if(!n.trim())return[];let e=[],a=n.split(",").map(t=>t.trim()).filter(t=>t);for(let t of a){let d=t.match(/^(\d+):(\d+(?:\.\d{1,2})?)$/);if(!d)return null;let D=parseInt(d[1],10),w=parseFloat(d[2]);if(D<1||isNaN(w)||w<0)return null;e.push({minSessions:D,discountAmount:Math.round(w*100)})}return e.sort((t,d)=>t.minSessions-d.minSessions)}getParsedMultiSessionDiscounts(){return this.parseMultiSessionDiscounts(this.formSeason.multiSessionDiscountsText)}getSeasonName(n){return this.seasonService.seasons().find(a=>a.id===n)?.name??n}getSeasonPricingDisplay(n){if(!this.formClass.seasonId)return"Select a season";let e=this.seasonService.seasons().find(a=>a.id===this.formClass.seasonId);return e?V(e[n]??0):"Season not found"}getSeasonEarlyBirdTiers(){return this.formClass.seasonId?this.seasonService.seasons().find(e=>e.id===this.formClass.seasonId)?.earlyBirdTiers??[]:[]}getEffectiveBasePrice(){return this.formClass.basePrice!==null?`$${this.formClass.basePrice.toFixed(2)}`:this.getSeasonPricingDisplay("basePrice")}initializeClassEarlyBirdTiers(){this.formClass.earlyBirdTiers=[]}clearClassEarlyBirdTiers(){this.formClass.earlyBirdTiers=null}addSeasonEarlyBirdTier(){let n=new Date;n.setDate(n.getDate()+14);let e=n.toISOString().split("T")[0],a=Math.max(0,this.formSeason.basePrice-50);this.formSeason.earlyBirdTiers.push({deadline:e,price:a})}removeSeasonEarlyBirdTier(n){this.formSeason.earlyBirdTiers.splice(n,1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=W({type:r,selectors:[["app-admin-catalog-list"]],decls:27,vars:14,consts:[[1,"admin-catalog"],[1,"page-header"],["routerLink","/admin",1,"back-link"],[1,"subtitle"],[1,"tab-bar"],[1,"tab",3,"click"],[1,"filter-bar"],[1,"filter-controls"],[1,"toggle-filter"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"season-filter",3,"ngModel"],[1,"btn-create",3,"click"],[1,"loading-container"],[1,"error-container"],[1,"seasons-grid"],[1,"classes-table-container"],[1,"dialog-overlay"],[1,"season-filter",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"spinner"],[1,"error-icon"],[1,"btn-retry",3,"click"],[1,"season-card",3,"inactive"],[1,"empty-state"],[1,"season-card"],[1,"card-header"],[1,"season-dates"],[1,"status-badge"],[1,"card-content"],[1,"info-row"],[1,"season-description"],[1,"card-actions"],[1,"btn-action",3,"click"],[1,"btn-action",3,"click","disabled"],[1,"classes-table"],[3,"inactive"],[1,"action-buttons"],[1,"btn-sm",3,"click"],[1,"btn-sm",3,"click","disabled"],[1,"dialog-overlay",3,"click"],[1,"dialog",3,"click"],[1,"dialog-form"],[1,"form-row","form-row-3"],[1,"form-group","form-group-wide"],["for","seasonName"],["type","text","id","seasonName","required","",3,"ngModelChange","ngModel"],[1,"form-group"],["for","seasonYear"],["type","number","id","seasonYear","required","",3,"ngModelChange","ngModel","disabled"],[1,"form-group","form-group-checkbox"],[1,"form-row"],["for","seasonStartDate"],["type","date","id","seasonStartDate","required","",3,"ngModelChange","ngModel"],["for","seasonEndDate"],["type","date","id","seasonEndDate","required","",3,"ngModelChange","ngModel"],[1,"form-section-header"],[1,"hint"],["for","seasonBasePrice"],["type","number","id","seasonBasePrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],["for","seasonLunchPrice"],["type","number","id","seasonLunchPrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],["for","seasonExtendedCarePrice"],["type","number","id","seasonExtendedCarePrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],[1,"collapsible-section"],["type","button",1,"section-toggle",3,"click"],[1,"toggle-icon"],[1,"section-badge"],[1,"section-content"],[1,"dialog-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["id","seasonDescription","rows","3","placeholder","Optional description (supports Markdown)",3,"ngModelChange","ngModel"],["for","siblingDiscount"],[1,"input-with-hint"],["type","number","id","siblingDiscount","step","0.01","min","0",3,"ngModelChange","ngModel"],["for","multiSessionDiscounts"],["type","text","id","multiSessionDiscounts","placeholder","2:10.00, 3:20.00",3,"ngModelChange","ngModel"],[1,"discount-preview","error"],[1,"discount-preview"],[1,"discount-tier"],[1,"early-bird-tiers"],[1,"tier-row"],["type","button",1,"btn-add-tier",3,"click"],["type","date","placeholder","Deadline",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0","placeholder","Price ($)",3,"ngModelChange","ngModel"],[1,"tier-price-hint"],["type","button",1,"btn-remove",3,"click"],["for","className"],["type","text","id","className","required","",3,"ngModelChange","ngModel"],["for","classSeason"],["id","classSeason","required","",3,"ngModelChange","ngModel","disabled"],["for","classStartDate"],["type","date","id","classStartDate","required","",3,"ngModelChange","ngModel"],["for","classEndDate"],["type","date","id","classEndDate","required","",3,"ngModelChange","ngModel"],["for","classCapacity"],["type","number","id","classCapacity","min","1","required","",3,"ngModelChange","ngModel"],[1,"form-section"],["for","classBasePrice"],["type","number","id","classBasePrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],[1,"hint","inherited"],["for","classLunchPrice"],["type","number","id","classLunchPrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],["for","classExtendedCarePrice"],["type","number","id","classExtendedCarePrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],[1,"inherited-preview"],["type","button",1,"btn-inherit"],["type","button",1,"btn-inherit",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"header",1)(2,"a",2),l(3,"\u2190 Back to Dashboard"),i(),o(4,"h1"),l(5,"Catalog Management"),i(),o(6,"p",3),l(7,"Manage seasons and classes"),i()(),o(8,"div",4)(9,"button",5),x("click",function(){return a.viewMode.set("seasons")}),l(10),i(),o(11,"button",5),x("click",function(){return a.viewMode.set("classes")}),l(12),i()(),o(13,"div",6)(14,"div",7)(15,"label",8)(16,"input",9),f("ngModelChange",function(d){return u(a.showActiveOnly,d)||(a.showActiveOnly=d),d}),i(),o(17,"span"),l(18,"Active Only"),i()(),g(19,le,5,1,"select",10),i(),o(20,"button",11),x("click",function(){return a.openCreateDialog()}),l(21),i()(),g(22,de,4,0,"div",12),g(23,ce,7,1,"div",13),g(24,Ce,4,1,"div",14),g(25,fe,24,1,"div",15),g(26,Re,6,3,"div",16),i()),e&2&&(s(9),v("active",a.viewMode()==="seasons"),s(),h(" Seasons (",a.seasonService.seasons().length,") "),s(),v("active",a.viewMode()==="classes"),s(),h(" Classes (",a.seasonService.classes().length,") "),s(4),p("ngModel",a.showActiveOnly),s(3),C(a.viewMode()==="classes"?19:-1),s(2),h(" + Create ",a.viewMode()==="seasons"?"Season":"Class"," "),s(),C(a.seasonService.loading()?22:-1),s(),C(a.seasonService.error()?23:-1),s(),C(a.viewMode()==="seasons"&&!a.seasonService.loading()&&!a.seasonService.error()?24:-1),s(),C(a.viewMode()==="classes"&&!a.seasonService.loading()&&!a.seasonService.error()?25:-1),s(),C(a.dialogMode()?26:-1))},dependencies:[z,ne,X,Z,H,K,$,Q,G,te,ee,J,q],styles:[".admin-catalog[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:var(--sys-primary, #c62828);text-decoration:none;font-size:.875rem;margin-bottom:.5rem}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.75rem}.subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.875rem}.tab-bar[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-bottom:2px solid #e0e0e0;margin-bottom:1.5rem}.tab[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:none;border:none;border-bottom:3px solid transparent;cursor:pointer;font-size:1rem;font-weight:500;color:#666;transition:all .2s}.tab[_ngcontent-%COMP%]:hover{color:#333}.tab.active[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);border-bottom-color:var(--sys-primary, #c62828)}.filter-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:1rem;background:#f5f5f5;border-radius:8px}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.toggle-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.season-filter[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem}.btn-create[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer}.btn-create[_ngcontent-%COMP%]:hover{background:#a51c1c}.seasons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.season-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:1.5rem;transition:box-shadow .2s}.season-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.season-card.inactive[_ngcontent-%COMP%]{opacity:.6}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #f0f0f0}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.25rem}.season-dates[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#666}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:500;background:#e0e0e0;color:#666}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.card-content[_ngcontent-%COMP%]{margin-bottom:1rem}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;font-size:.875rem}.season-description[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #f0f0f0;font-size:.875rem;color:#666;white-space:pre-wrap}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-action[_ngcontent-%COMP%]{flex:1;padding:.5rem;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.875rem}.btn-action[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-action.btn-activate[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);color:var(--sys-primary, #c62828)}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.classes-table-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.classes-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.classes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e0e0e0}.classes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:#666}.classes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem}.classes-table[_ngcontent-%COMP%]   tr.inactive[_ngcontent-%COMP%]{opacity:.6}.classes-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.text-warning[_ngcontent-%COMP%]{color:#ff9800;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem;background:#fff;border:1px solid #ddd;border-radius:4px;font-size:.75rem;cursor:pointer}.btn-sm[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-sm.btn-activate[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);color:var(--sys-primary, #c62828)}.btn-sm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;overflow:hidden}.dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;width:100%;box-sizing:border-box}.form-row-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.form-group-wide[_ngcontent-%COMP%]{grid-column:span 1}.form-group-checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-end;padding-bottom:.75rem}.form-section-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.75rem;margin-top:.5rem;padding-bottom:.25rem;border-bottom:1px solid #e0e0e0}.form-section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#333}.collapsible-section[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.section-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%;padding:.75rem 1rem;background:#f9f9f9;border:none;cursor:pointer;font-size:.875rem;font-weight:500;color:#333;text-align:left}.section-toggle[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toggle-icon[_ngcontent-%COMP%]{font-size:.7rem;color:#666}.section-badge[_ngcontent-%COMP%]{margin-left:auto;padding:.125rem .5rem;background:#e8f5e9;color:#2e7d32;border-radius:10px;font-size:.7rem;font-weight:500}.section-content[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid #e0e0e0}.section-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;font-family:inherit;resize:vertical}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;font-family:inherit;box-sizing:border-box;max-width:100%}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.5rem}.input-with-hint[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.input-with-hint[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;box-sizing:border-box;width:100%}.hint[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.discount-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem;padding:.5rem;background:#e8f5e9;border-radius:4px;font-size:.75rem}.discount-preview.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.discount-tier[_ngcontent-%COMP%]{background:#c8e6c9;padding:.25rem .5rem;border-radius:4px;color:#2e7d32}.early-bird-tiers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.tier-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.tier-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.tier-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:120px;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.tier-price-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#666;min-width:60px}.btn-remove[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;border-radius:4px;width:28px;height:28px;cursor:pointer;font-size:1.2rem;line-height:1;display:flex;align-items:center;justify-content:center}.btn-remove[_ngcontent-%COMP%]:hover{background:#d32f2f}.btn-add-tier[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px dashed #4caf50;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.875rem;align-self:flex-start}.btn-add-tier[_ngcontent-%COMP%]:hover{background:#c8e6c9}.btn-inherit[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;border:1px dashed #2196f3;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.875rem;align-self:flex-start;margin-left:.5rem}.btn-inherit[_ngcontent-%COMP%]:hover{background:#bbdefb}.form-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;color:#333}.hint.inherited[_ngcontent-%COMP%]{color:#1976d2;font-style:italic}.inherited-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:.75rem;background:#e3f2fd;border-radius:6px}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;font-weight:500;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#a51c1c}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#f44336;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;margin:0 auto 1rem}.btn-retry[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:6px;cursor:pointer;margin-top:1rem}@media(max-width:768px){.seasons-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-bar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})};export{oe as AdminCatalogListComponent};
