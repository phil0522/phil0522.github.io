import{Y as Be}from"./chunk-NA25QKA5.js";import{L as ne,Q as re,Qb as D,a as d,b as y,c as dn,ga as j}from"./chunk-C26OXKSD.js";var a={};dn(a,{BRAND:()=>Pn,DIRTY:()=>P,EMPTY_PATH:()=>pn,INVALID:()=>_,NEVER:()=>xr,OK:()=>I,ParseStatus:()=>T,Schema:()=>b,ZodAny:()=>ie,ZodArray:()=>X,ZodBigInt:()=>ve,ZodBoolean:()=>be,ZodBranded:()=>K,ZodCatch:()=>Ee,ZodDate:()=>Se,ZodDefault:()=>Re,ZodDiscriminatedUnion:()=>oe,ZodEffects:()=>z,ZodEnum:()=>le,ZodError:()=>A,ZodFirstPartyTypeKind:()=>x,ZodFunction:()=>de,ZodIntersection:()=>Ce,ZodIssueCode:()=>l,ZodLazy:()=>we,ZodLiteral:()=>Ae,ZodMap:()=>nt,ZodNaN:()=>at,ZodNativeEnum:()=>De,ZodNever:()=>M,ZodNull:()=>Te,ZodNullable:()=>V,ZodNumber:()=>xe,ZodObject:()=>F,ZodOptional:()=>O,ZodParsedType:()=>f,ZodPipeline:()=>Q,ZodPromise:()=>me,ZodReadonly:()=>Ne,ZodRecord:()=>ce,ZodSchema:()=>b,ZodSet:()=>rt,ZodString:()=>ue,ZodSymbol:()=>et,ZodTransformer:()=>z,ZodTuple:()=>L,ZodType:()=>b,ZodUndefined:()=>ke,ZodUnion:()=>Ie,ZodUnknown:()=>J,ZodVoid:()=>tt,addIssueToContext:()=>m,any:()=>Vn,array:()=>Hn,bigint:()=>qn,boolean:()=>dt,coerce:()=>_r,custom:()=>it,date:()=>Un,datetimeRegex:()=>Qe,defaultErrorMap:()=>R,discriminatedUnion:()=>Kn,effect:()=>ur,enum:()=>or,function:()=>sr,getErrorMap:()=>$,getParsedType:()=>w,instanceof:()=>Zn,intersection:()=>Qn,isAborted:()=>se,isAsync:()=>q,isDirty:()=>ae,isValid:()=>N,late:()=>Mn,lazy:()=>ar,literal:()=>ir,makeIssue:()=>G,map:()=>nr,nan:()=>$n,nativeEnum:()=>cr,never:()=>Bn,null:()=>zn,nullable:()=>mr,number:()=>ct,object:()=>Gn,objectUtil:()=>We,oboolean:()=>yr,onumber:()=>gr,optional:()=>lr,ostring:()=>hr,pipeline:()=>fr,preprocess:()=>pr,promise:()=>dr,quotelessJson:()=>un,record:()=>tr,set:()=>rr,setErrorMap:()=>mn,strictObject:()=>Jn,string:()=>ot,symbol:()=>Fn,transformer:()=>ur,tuple:()=>er,undefined:()=>Ln,union:()=>Xn,unknown:()=>Yn,util:()=>k,void:()=>Wn});var k;(function(t){t.assertEqual=s=>{};function r(s){}t.assertIs=r;function e(s){throw new Error}t.assertNever=e,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(let c of i)o[c]=s[c];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(k||(k={}));var We=(function(t){return t.mergeShapes=(r,e)=>d(d({},r),e),t})(We||{}),f=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),w=t=>{switch(typeof t){case"undefined":return f.undefined;case"string":return f.string;case"number":return Number.isNaN(t)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":return Array.isArray(t)?f.array:t===null?f.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?f.promise:typeof Map<"u"&&t instanceof Map?f.map:typeof Set<"u"&&t instanceof Set?f.set:typeof Date<"u"&&t instanceof Date?f.date:f.object;default:return f.unknown}};var l=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),un=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),A=(()=>{class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},s={_errors:[]},i=o=>{for(let c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(i);else if(c.code==="invalid_return_type")i(c.returnTypeError);else if(c.code==="invalid_arguments")i(c.argumentsError);else if(c.path.length===0)s._errors.push(n(c));else{let u=s,p=0;for(;p<c.path.length;){let h=c.path[p];p===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(n(c))):u[h]=u[h]||{_errors:[]},u=u[h],p++}}};return i(this),s}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},s=[];for(let i of this.issues)if(i.path.length>0){let o=i.path[0];n[o]=n[o]||[],n[o].push(e(i))}else s.push(e(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}return t.create=r=>new t(r),t})();var ln=(t,r)=>{let e;switch(t.code){case l.invalid_type:t.received===f.undefined?e="Required":e=`Expected ${t.expected}, received ${t.received}`;break;case l.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(t.expected,k.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:e=`Unrecognized key(s) in object: ${k.joinValues(t.keys,", ")}`;break;case l.invalid_union:e="Invalid input";break;case l.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${k.joinValues(t.options)}`;break;case l.invalid_enum_value:e=`Invalid enum value. Expected ${k.joinValues(t.options)}, received '${t.received}'`;break;case l.invalid_arguments:e="Invalid function arguments";break;case l.invalid_return_type:e="Invalid function return type";break;case l.invalid_date:e="Invalid date";break;case l.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(e=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?e=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?e=`Invalid input: must end with "${t.validation.endsWith}"`:k.assertNever(t.validation):t.validation!=="regex"?e=`Invalid ${t.validation}`:e="Invalid";break;case l.too_small:t.type==="array"?e=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?e=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?e=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?e=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?e=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:e="Invalid input";break;case l.too_big:t.type==="array"?e=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?e=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?e=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?e=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?e=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:e="Invalid input";break;case l.custom:e="Invalid input";break;case l.invalid_intersection_types:e="Intersection results could not be merged";break;case l.not_multiple_of:e=`Number must be a multiple of ${t.multipleOf}`;break;case l.not_finite:e="Number must be finite";break;default:e=r.defaultError,k.assertNever(t)}return{message:e}},R=ln;var He=R;function mn(t){He=t}function $(){return He}var G=t=>{let{data:r,path:e,errorMaps:n,issueData:s}=t,i=[...e,...s.path||[]],o=y(d({},s),{path:i});if(s.message!==void 0)return y(d({},s),{path:i,message:s.message});let c="",u=n.filter(p=>!!p).slice().reverse();for(let p of u)c=p(o,{data:r,defaultError:c}).message;return y(d({},s),{path:i,message:c})},pn=[];function m(t,r){let e=$(),n=G({issueData:r,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,e,e===R?void 0:R].filter(s=>!!s)});t.common.issues.push(n)}var T=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,e){let n=[];for(let s of e){if(s.status==="aborted")return _;s.status==="dirty"&&r.dirty(),n.push(s.value)}return{status:r.value,value:n}}static async mergeObjectAsync(r,e){let n=[];for(let s of e){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(r,n)}static mergeObjectSync(r,e){let n={};for(let s of e){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return _;i.status==="dirty"&&r.dirty(),o.status==="dirty"&&r.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:r.value,value:n}}},_=Object.freeze({status:"aborted"}),P=t=>({status:"dirty",value:t}),I=t=>({status:"valid",value:t}),se=t=>t.status==="aborted",ae=t=>t.status==="dirty",N=t=>t.status==="valid",q=t=>typeof Promise<"u"&&t instanceof Promise;var g=(function(t){return t.errToObj=r=>typeof r=="string"?{message:r}:r||{},t.toString=r=>typeof r=="string"?r:r?.message,t})(g||{});var C=class{constructor(r,e,n,s){this._cachedPath=[],this.parent=r,this.data=e,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ge=(t,r)=>{if(N(r))return{success:!0,data:r.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new A(t.common.issues);return this._error=e,this._error}}};function v(t){if(!t)return{};let{errorMap:r,invalid_type_error:e,required_error:n,description:s}=t;if(r&&(e||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:s}:{errorMap:(o,c)=>{let{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??n??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??e??c.defaultError}},description:s}}var b=class{get description(){return this._def.description}_getType(r){return w(r.data)}_getOrReturnCtx(r,e){return e||{common:r.parent.common,data:r.data,parsedType:w(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new T,ctx:{common:r.parent.common,data:r.data,parsedType:w(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){let e=this._parse(r);if(q(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(r){let e=this._parse(r);return Promise.resolve(e)}parse(r,e){let n=this.safeParse(r,e);if(n.success)return n.data;throw n.error}safeParse(r,e){let n={common:{issues:[],async:e?.async??!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:w(r)},s=this._parseSync({data:r,path:n.path,parent:n});return Ge(n,s)}"~validate"(r){let e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:w(r)};if(!this["~standard"].async)try{let n=this._parseSync({data:r,path:[],parent:e});return N(n)?{value:n.value}:{issues:e.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:r,path:[],parent:e}).then(n=>N(n)?{value:n.value}:{issues:e.common.issues})}async parseAsync(r,e){let n=await this.safeParseAsync(r,e);if(n.success)return n.data;throw n.error}async safeParseAsync(r,e){let n={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:w(r)},s=this._parse({data:r,path:n.path,parent:n}),i=await(q(s)?s:Promise.resolve(s));return Ge(n,i)}refine(r,e){let n=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,i)=>{let o=r(s),c=()=>i.addIssue(d({code:l.custom},n(s)));return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(r,e){return this._refinement((n,s)=>r(n)?!0:(s.addIssue(typeof e=="function"?e(n,s):e),!1))}_refinement(r){return new z({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return O.create(this,this._def)}nullable(){return V.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return X.create(this)}promise(){return me.create(this,this._def)}or(r){return Ie.create([this,r],this._def)}and(r){return Ce.create(this,r,this._def)}transform(r){return new z(y(d({},v(this._def)),{schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:r}}))}default(r){let e=typeof r=="function"?r:()=>r;return new Re(y(d({},v(this._def)),{innerType:this,defaultValue:e,typeName:x.ZodDefault}))}brand(){return new K(d({typeName:x.ZodBranded,type:this},v(this._def)))}catch(r){let e=typeof r=="function"?r:()=>r;return new Ee(y(d({},v(this._def)),{innerType:this,catchValue:e,typeName:x.ZodCatch}))}describe(r){let e=this.constructor;return new e(y(d({},this._def),{description:r}))}pipe(r){return Q.create(this,r)}readonly(){return Ne.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},fn=/^c[^\s-]{8,}$/i,hn=/^[0-9a-z]+$/,gn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_n=/^[a-z0-9_-]{21}$/i,xn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Sn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ye,kn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Tn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,In=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Cn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,An=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Xe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Dn=new RegExp(`^${Xe}$`);function Ke(t){let r="[0-5]\\d";t.precision?r=`${r}\\.\\d{${t.precision}}`:t.precision==null&&(r=`${r}(\\.\\d+)?`);let e=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${r})${e}`}function Rn(t){return new RegExp(`^${Ke(t)}$`)}function Qe(t){let r=`${Xe}T${Ke(t)}`,e=[];return e.push(t.local?"Z?":"Z"),t.offset&&e.push("([+-]\\d{2}:?\\d{2})"),r=`${r}(${e.join("|")})`,new RegExp(`^${r}$`)}function En(t,r){return!!((r==="v4"||!r)&&kn.test(t)||(r==="v6"||!r)&&In.test(t))}function Nn(t,r){if(!xn.test(t))return!1;try{let[e]=t.split(".");if(!e)return!1;let n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||r&&s.alg!==r)}catch{return!1}}function On(t,r){return!!((r==="v4"||!r)&&Tn.test(t)||(r==="v6"||!r)&&Cn.test(t))}var ue=(()=>{class t extends b{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){let o=this._getOrReturnCtx(e);return m(o,{code:l.invalid_type,expected:f.string,received:o.parsedType}),_}let s=new T,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),m(i,{code:l.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),m(i,{code:l.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let c=e.data.length>o.value,u=e.data.length<o.value;(c||u)&&(i=this._getOrReturnCtx(e,i),c?m(i,{code:l.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&m(i,{code:l.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")bn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"email",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")ye||(ye=new RegExp(Sn,"u")),ye.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"emoji",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")yn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"uuid",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")_n.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"nanoid",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")fn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"cuid",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")hn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"cuid2",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")gn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"ulid",code:l.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),m(i,{validation:"url",code:l.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"regex",code:l.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?Qe(o).test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?Dn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?Rn(o).test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{code:l.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?vn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"duration",code:l.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?En(e.data,o.version)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"ip",code:l.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?Nn(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"jwt",code:l.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?On(e.data,o.version)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"cidr",code:l.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?wn.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"base64",code:l.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?An.test(e.data)||(i=this._getOrReturnCtx(e,i),m(i,{validation:"base64url",code:l.invalid_string,message:o.message}),s.dirty()):k.assertNever(o);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(i=>e.test(i),d({validation:n,code:l.invalid_string},g.errToObj(s)))}_addCheck(e){return new t(y(d({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(d({kind:"email"},g.errToObj(e)))}url(e){return this._addCheck(d({kind:"url"},g.errToObj(e)))}emoji(e){return this._addCheck(d({kind:"emoji"},g.errToObj(e)))}uuid(e){return this._addCheck(d({kind:"uuid"},g.errToObj(e)))}nanoid(e){return this._addCheck(d({kind:"nanoid"},g.errToObj(e)))}cuid(e){return this._addCheck(d({kind:"cuid"},g.errToObj(e)))}cuid2(e){return this._addCheck(d({kind:"cuid2"},g.errToObj(e)))}ulid(e){return this._addCheck(d({kind:"ulid"},g.errToObj(e)))}base64(e){return this._addCheck(d({kind:"base64"},g.errToObj(e)))}base64url(e){return this._addCheck(d({kind:"base64url"},g.errToObj(e)))}jwt(e){return this._addCheck(d({kind:"jwt"},g.errToObj(e)))}ip(e){return this._addCheck(d({kind:"ip"},g.errToObj(e)))}cidr(e){return this._addCheck(d({kind:"cidr"},g.errToObj(e)))}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(d({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1},g.errToObj(e?.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(d({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision},g.errToObj(e?.message)))}duration(e){return this._addCheck(d({kind:"duration"},g.errToObj(e)))}regex(e,n){return this._addCheck(d({kind:"regex",regex:e},g.errToObj(n)))}includes(e,n){return this._addCheck(d({kind:"includes",value:e,position:n?.position},g.errToObj(n?.message)))}startsWith(e,n){return this._addCheck(d({kind:"startsWith",value:e},g.errToObj(n)))}endsWith(e,n){return this._addCheck(d({kind:"endsWith",value:e},g.errToObj(n)))}min(e,n){return this._addCheck(d({kind:"min",value:e},g.errToObj(n)))}max(e,n){return this._addCheck(d({kind:"max",value:e},g.errToObj(n)))}length(e,n){return this._addCheck(d({kind:"length",value:e},g.errToObj(n)))}nonempty(e){return this.min(1,g.errToObj(e))}trim(){return new t(y(d({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new t(y(d({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new t(y(d({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}return t.create=r=>new t(d({checks:[],typeName:x.ZodString,coerce:r?.coerce??!1},v(r))),t})();function jn(t,r){let e=(t.toString().split(".")[1]||"").length,n=(r.toString().split(".")[1]||"").length,s=e>n?e:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(r.toFixed(s).replace(".",""));return i%o/10**s}var xe=(()=>{class t extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){let o=this._getOrReturnCtx(e);return m(o,{code:l.invalid_type,expected:f.number,received:o.parsedType}),_}let s,i=new T;for(let o of this._def.checks)o.kind==="int"?k.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:l.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?jn(e.data,o.value)!==0&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:l.not_finite,message:o.message}),i.dirty()):k.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,g.toString(n))}gt(e,n){return this.setLimit("min",e,!1,g.toString(n))}lte(e,n){return this.setLimit("max",e,!0,g.toString(n))}lt(e,n){return this.setLimit("max",e,!1,g.toString(n))}setLimit(e,n,s,i){return new t(y(d({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:g.toString(i)}]}))}_addCheck(e){return new t(y(d({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&k.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}return t.create=r=>new t(d({checks:[],typeName:x.ZodNumber,coerce:r?.coerce||!1},v(r))),t})(),ve=(()=>{class t extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==f.bigint)return this._getInvalidInput(e);let s,i=new T;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),m(s,{code:l.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):k.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return m(n,{code:l.invalid_type,expected:f.bigint,received:n.parsedType}),_}gte(e,n){return this.setLimit("min",e,!0,g.toString(n))}gt(e,n){return this.setLimit("min",e,!1,g.toString(n))}lte(e,n){return this.setLimit("max",e,!0,g.toString(n))}lt(e,n){return this.setLimit("max",e,!1,g.toString(n))}setLimit(e,n,s,i){return new t(y(d({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:g.toString(i)}]}))}_addCheck(e){return new t(y(d({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}return t.create=r=>new t(d({checks:[],typeName:x.ZodBigInt,coerce:r?.coerce??!1},v(r))),t})(),be=(()=>{class t extends b{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.boolean,received:s.parsedType}),_}return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodBoolean,coerce:r?.coerce||!1},v(r))),t})(),Se=(()=>{class t extends b{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){let o=this._getOrReturnCtx(e);return m(o,{code:l.invalid_type,expected:f.date,received:o.parsedType}),_}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return m(o,{code:l.invalid_date}),_}let s=new T,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),m(i,{code:l.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),m(i,{code:l.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):k.assertNever(o);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t(y(d({},this._def),{checks:[...this._def.checks,e]}))}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}return t.create=r=>new t(d({checks:[],coerce:r?.coerce||!1,typeName:x.ZodDate},v(r))),t})(),et=(()=>{class t extends b{_parse(e){if(this._getType(e)!==f.symbol){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.symbol,received:s.parsedType}),_}return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodSymbol},v(r))),t})(),ke=(()=>{class t extends b{_parse(e){if(this._getType(e)!==f.undefined){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.undefined,received:s.parsedType}),_}return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodUndefined},v(r))),t})(),Te=(()=>{class t extends b{_parse(e){if(this._getType(e)!==f.null){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.null,received:s.parsedType}),_}return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodNull},v(r))),t})(),ie=(()=>{class t extends b{constructor(){super(...arguments),this._any=!0}_parse(e){return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodAny},v(r))),t})(),J=(()=>{class t extends b{constructor(){super(...arguments),this._unknown=!0}_parse(e){return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodUnknown},v(r))),t})(),M=(()=>{class t extends b{_parse(e){let n=this._getOrReturnCtx(e);return m(n,{code:l.invalid_type,expected:f.never,received:n.parsedType}),_}}return t.create=r=>new t(d({typeName:x.ZodNever},v(r))),t})(),tt=(()=>{class t extends b{_parse(e){if(this._getType(e)!==f.undefined){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.void,received:s.parsedType}),_}return I(e.data)}}return t.create=r=>new t(d({typeName:x.ZodVoid},v(r))),t})(),X=(()=>{class t extends b{_parse(e){let{ctx:n,status:s}=this._processInputParams(e),i=this._def;if(n.parsedType!==f.array)return m(n,{code:l.invalid_type,expected:f.array,received:n.parsedType}),_;if(i.exactLength!==null){let c=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(c||u)&&(m(n,{code:c?l.too_big:l.too_small,minimum:u?i.exactLength.value:void 0,maximum:c?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(m(n,{code:l.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(m(n,{code:l.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((c,u)=>i.type._parseAsync(new C(n,c,n.path,u)))).then(c=>T.mergeArray(s,c));let o=[...n.data].map((c,u)=>i.type._parseSync(new C(n,c,n.path,u)));return T.mergeArray(s,o)}get element(){return this._def.type}min(e,n){return new t(y(d({},this._def),{minLength:{value:e,message:g.toString(n)}}))}max(e,n){return new t(y(d({},this._def),{maxLength:{value:e,message:g.toString(n)}}))}length(e,n){return new t(y(d({},this._def),{exactLength:{value:e,message:g.toString(n)}}))}nonempty(e){return this.min(1,e)}}return t.create=(r,e)=>new t(d({type:r,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray},v(e))),t})();function U(t){if(t instanceof F){let r={};for(let e in t.shape){let n=t.shape[e];r[e]=O.create(U(n))}return new F(y(d({},t._def),{shape:()=>r}))}else return t instanceof X?new X(y(d({},t._def),{type:U(t.element)})):t instanceof O?O.create(U(t.unwrap())):t instanceof V?V.create(U(t.unwrap())):t instanceof L?L.create(t.items.map(r=>U(r))):t}var F=(()=>{class t extends b{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=k.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==f.object){let h=this._getOrReturnCtx(e);return m(h,{code:l.invalid_type,expected:f.object,received:h.parsedType}),_}let{status:s,ctx:i}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof M&&this._def.unknownKeys==="strip"))for(let h in i.data)c.includes(h)||u.push(h);let p=[];for(let h of c){let S=o[h],Z=i.data[h];p.push({key:{status:"valid",value:h},value:S._parse(new C(i,Z,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof M){let h=this._def.unknownKeys;if(h==="passthrough")for(let S of u)p.push({key:{status:"valid",value:S},value:{status:"valid",value:i.data[S]}});else if(h==="strict")u.length>0&&(m(i,{code:l.unrecognized_keys,keys:u}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let S of u){let Z=i.data[S];p.push({key:{status:"valid",value:S},value:h._parse(new C(i,Z,i.path,S)),alwaysSet:S in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let h=[];for(let S of p){let Z=await S.key,H=await S.value;h.push({key:Z,value:H,alwaysSet:S.alwaysSet})}return h}).then(h=>T.mergeObjectSync(s,h)):T.mergeObjectSync(s,p)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new t(d(y(d({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(n,s)=>{let i=this._def.errorMap?.(n,s).message??s.defaultError;return n.code==="unrecognized_keys"?{message:g.errToObj(e).message??i}:{message:i}}}:{}))}strip(){return new t(y(d({},this._def),{unknownKeys:"strip"}))}passthrough(){return new t(y(d({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new t(y(d({},this._def),{shape:()=>d(d({},this._def.shape()),e)}))}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>d(d({},this._def.shape()),e._def.shape()),typeName:x.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t(y(d({},this._def),{catchall:e}))}pick(e){let n={};for(let s of k.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new t(y(d({},this._def),{shape:()=>n}))}omit(e){let n={};for(let s of k.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new t(y(d({},this._def),{shape:()=>n}))}deepPartial(){return U(this)}partial(e){let n={};for(let s of k.objectKeys(this.shape)){let i=this.shape[s];e&&!e[s]?n[s]=i:n[s]=i.optional()}return new t(y(d({},this._def),{shape:()=>n}))}required(e){let n={};for(let s of k.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof O;)o=o._def.innerType;n[s]=o}return new t(y(d({},this._def),{shape:()=>n}))}keyof(){return st(k.objectKeys(this.shape))}}return t.create=(r,e)=>new t(d({shape:()=>r,unknownKeys:"strip",catchall:M.create(),typeName:x.ZodObject},v(e))),t.strictCreate=(r,e)=>new t(d({shape:()=>r,unknownKeys:"strict",catchall:M.create(),typeName:x.ZodObject},v(e))),t.lazycreate=(r,e)=>new t(d({shape:r,unknownKeys:"strip",catchall:M.create(),typeName:x.ZodObject},v(e))),t})(),Ie=(()=>{class t extends b{_parse(e){let{ctx:n}=this._processInputParams(e),s=this._def.options;function i(o){for(let u of o)if(u.result.status==="valid")return u.result;for(let u of o)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;let c=o.map(u=>new A(u.ctx.common.issues));return m(n,{code:l.invalid_union,unionErrors:c}),_}if(n.common.async)return Promise.all(s.map(async o=>{let c=y(d({},n),{common:y(d({},n.common),{issues:[]}),parent:null});return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(i);{let o,c=[];for(let p of s){let h=y(d({},n),{common:y(d({},n.common),{issues:[]}),parent:null}),S=p._parseSync({data:n.data,path:n.path,parent:h});if(S.status==="valid")return S;S.status==="dirty"&&!o&&(o={result:S,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let u=c.map(p=>new A(p));return m(n,{code:l.invalid_union,unionErrors:u}),_}}get options(){return this._def.options}}return t.create=(r,e)=>new t(d({options:r,typeName:x.ZodUnion},v(e))),t})(),E=t=>t instanceof we?E(t.schema):t instanceof z?E(t.innerType()):t instanceof Ae?[t.value]:t instanceof le?t.options:t instanceof De?k.objectValues(t.enum):t instanceof Re?E(t._def.innerType):t instanceof ke?[void 0]:t instanceof Te?[null]:t instanceof O?[void 0,...E(t.unwrap())]:t instanceof V?[null,...E(t.unwrap())]:t instanceof K||t instanceof Ne?E(t.unwrap()):t instanceof Ee?E(t._def.innerType):[],oe=class t extends b{_parse(r){let{ctx:e}=this._processInputParams(r);if(e.parsedType!==f.object)return m(e,{code:l.invalid_type,expected:f.object,received:e.parsedType}),_;let n=this.discriminator,s=e.data[n],i=this.optionsMap.get(s);return i?e.common.async?i._parseAsync({data:e.data,path:e.path,parent:e}):i._parseSync({data:e.data,path:e.path,parent:e}):(m(e,{code:l.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,e,n){let s=new Map;for(let i of e){let o=E(i.shape[r]);if(!o.length)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(let c of o){if(s.has(c))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(c)}`);s.set(c,i)}}return new t(d({typeName:x.ZodDiscriminatedUnion,discriminator:r,options:e,optionsMap:s},v(n)))}};function _e(t,r){let e=w(t),n=w(r);if(t===r)return{valid:!0,data:t};if(e===f.object&&n===f.object){let s=k.objectKeys(r),i=k.objectKeys(t).filter(c=>s.indexOf(c)!==-1),o=d(d({},t),r);for(let c of i){let u=_e(t[c],r[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(e===f.array&&n===f.array){if(t.length!==r.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],c=r[i],u=_e(o,c);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return e===f.date&&n===f.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}var Ce=(()=>{class t extends b{_parse(e){let{status:n,ctx:s}=this._processInputParams(e),i=(o,c)=>{if(se(o)||se(c))return _;let u=_e(o.value,c.value);return u.valid?((ae(o)||ae(c))&&n.dirty(),{status:n.value,value:u.data}):(m(s,{code:l.invalid_intersection_types}),_)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,c])=>i(o,c)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}return t.create=(r,e,n)=>new t(d({left:r,right:e,typeName:x.ZodIntersection},v(n))),t})(),L=(()=>{class t extends b{_parse(e){let{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==f.array)return m(s,{code:l.invalid_type,expected:f.array,received:s.parsedType}),_;if(s.data.length<this._def.items.length)return m(s,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&s.data.length>this._def.items.length&&(m(s,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...s.data].map((c,u)=>{let p=this._def.items[u]||this._def.rest;return p?p._parse(new C(s,c,s.path,u)):null}).filter(c=>!!c);return s.common.async?Promise.all(o).then(c=>T.mergeArray(n,c)):T.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t(y(d({},this._def),{rest:e}))}}return t.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new t(d({items:r,typeName:x.ZodTuple,rest:null},v(e)))},t})(),ce=class t extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){let{status:e,ctx:n}=this._processInputParams(r);if(n.parsedType!==f.object)return m(n,{code:l.invalid_type,expected:f.object,received:n.parsedType}),_;let s=[],i=this._def.keyType,o=this._def.valueType;for(let c in n.data)s.push({key:i._parse(new C(n,c,n.path,c)),value:o._parse(new C(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?T.mergeObjectAsync(e,s):T.mergeObjectSync(e,s)}get element(){return this._def.valueType}static create(r,e,n){return e instanceof b?new t(d({keyType:r,valueType:e,typeName:x.ZodRecord},v(n))):new t(d({keyType:ue.create(),valueType:r,typeName:x.ZodRecord},v(e)))}},nt=(()=>{class t extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==f.map)return m(s,{code:l.invalid_type,expected:f.map,received:s.parsedType}),_;let i=this._def.keyType,o=this._def.valueType,c=[...s.data.entries()].map(([u,p],h)=>({key:i._parse(new C(s,u,s.path,[h,"key"])),value:o._parse(new C(s,p,s.path,[h,"value"]))}));if(s.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let p of c){let h=await p.key,S=await p.value;if(h.status==="aborted"||S.status==="aborted")return _;(h.status==="dirty"||S.status==="dirty")&&n.dirty(),u.set(h.value,S.value)}return{status:n.value,value:u}})}else{let u=new Map;for(let p of c){let h=p.key,S=p.value;if(h.status==="aborted"||S.status==="aborted")return _;(h.status==="dirty"||S.status==="dirty")&&n.dirty(),u.set(h.value,S.value)}return{status:n.value,value:u}}}}return t.create=(r,e,n)=>new t(d({valueType:e,keyType:r,typeName:x.ZodMap},v(n))),t})(),rt=(()=>{class t extends b{_parse(e){let{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==f.set)return m(s,{code:l.invalid_type,expected:f.set,received:s.parsedType}),_;let i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(m(s,{code:l.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(m(s,{code:l.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function c(p){let h=new Set;for(let S of p){if(S.status==="aborted")return _;S.status==="dirty"&&n.dirty(),h.add(S.value)}return{status:n.value,value:h}}let u=[...s.data.values()].map((p,h)=>o._parse(new C(s,p,s.path,h)));return s.common.async?Promise.all(u).then(p=>c(p)):c(u)}min(e,n){return new t(y(d({},this._def),{minSize:{value:e,message:g.toString(n)}}))}max(e,n){return new t(y(d({},this._def),{maxSize:{value:e,message:g.toString(n)}}))}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}return t.create=(r,e)=>new t(d({valueType:r,minSize:null,maxSize:null,typeName:x.ZodSet},v(e))),t})(),de=class t extends b{constructor(){super(...arguments),this.validate=this.implement}_parse(r){let{ctx:e}=this._processInputParams(r);if(e.parsedType!==f.function)return m(e,{code:l.invalid_type,expected:f.function,received:e.parsedType}),_;function n(c,u){return G({data:c,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,$(),R].filter(p=>!!p),issueData:{code:l.invalid_arguments,argumentsError:u}})}function s(c,u){return G({data:c,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,$(),R].filter(p=>!!p),issueData:{code:l.invalid_return_type,returnTypeError:u}})}let i={errorMap:e.common.contextualErrorMap},o=e.data;if(this._def.returns instanceof me){let c=this;return I(async function(...u){let p=new A([]),h=await c._def.args.parseAsync(u,i).catch(H=>{throw p.addIssue(n(u,H)),p}),S=await Reflect.apply(o,this,h);return await c._def.returns._def.type.parseAsync(S,i).catch(H=>{throw p.addIssue(s(S,H)),p})})}else{let c=this;return I(function(...u){let p=c._def.args.safeParse(u,i);if(!p.success)throw new A([n(u,p.error)]);let h=Reflect.apply(o,this,p.data),S=c._def.returns.safeParse(h,i);if(!S.success)throw new A([s(h,S.error)]);return S.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...r){return new t(y(d({},this._def),{args:L.create(r).rest(J.create())}))}returns(r){return new t(y(d({},this._def),{returns:r}))}implement(r){return this.parse(r)}strictImplement(r){return this.parse(r)}static create(r,e,n){return new t(d({args:r||L.create([]).rest(J.create()),returns:e||J.create(),typeName:x.ZodFunction},v(n)))}},we=(()=>{class t extends b{get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}return t.create=(r,e)=>new t(d({getter:r,typeName:x.ZodLazy},v(e))),t})(),Ae=(()=>{class t extends b{_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return m(n,{received:n.data,code:l.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}return t.create=(r,e)=>new t(d({value:r,typeName:x.ZodLiteral},v(e))),t})();function st(t,r){return new le(d({values:t,typeName:x.ZodEnum},v(r)))}var le=(()=>{class t extends b{_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),s=this._def.values;return m(n,{expected:k.joinValues(s),received:n.parsedType,code:l.invalid_type}),_}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let n=this._getOrReturnCtx(e),s=this._def.values;return m(n,{received:n.data,code:l.invalid_enum_value,options:s}),_}return I(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,d(d({},this._def),n))}exclude(e,n=this._def){return t.create(this.options.filter(s=>!e.includes(s)),d(d({},this._def),n))}}return t.create=st,t})(),De=(()=>{class t extends b{_parse(e){let n=k.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==f.string&&s.parsedType!==f.number){let i=k.objectValues(n);return m(s,{expected:k.joinValues(i),received:s.parsedType,code:l.invalid_type}),_}if(this._cache||(this._cache=new Set(k.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=k.objectValues(n);return m(s,{received:s.data,code:l.invalid_enum_value,options:i}),_}return I(e.data)}get enum(){return this._def.values}}return t.create=(r,e)=>new t(d({values:r,typeName:x.ZodNativeEnum},v(e))),t})(),me=(()=>{class t extends b{unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==f.promise&&n.common.async===!1)return m(n,{code:l.invalid_type,expected:f.promise,received:n.parsedType}),_;let s=n.parsedType===f.promise?n.data:Promise.resolve(n.data);return I(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}return t.create=(r,e)=>new t(d({type:r,typeName:x.ZodPromise},v(e))),t})(),z=(()=>{class t extends b{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:s}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:c=>{m(s,c),c.fatal?n.abort():n.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let c=i.transform(s.data,o);if(s.common.async)return Promise.resolve(c).then(async u=>{if(n.value==="aborted")return _;let p=await this._def.schema._parseAsync({data:u,path:s.path,parent:s});return p.status==="aborted"?_:p.status==="dirty"?P(p.value):n.value==="dirty"?P(p.value):p});{if(n.value==="aborted")return _;let u=this._def.schema._parseSync({data:c,path:s.path,parent:s});return u.status==="aborted"?_:u.status==="dirty"?P(u.value):n.value==="dirty"?P(u.value):u}}if(i.type==="refinement"){let c=u=>{let p=i.refinement(u,o);if(s.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(s.common.async===!1){let u=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return u.status==="aborted"?_:(u.status==="dirty"&&n.dirty(),c(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(u=>u.status==="aborted"?_:(u.status==="dirty"&&n.dirty(),c(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(s.common.async===!1){let c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!N(c))return _;let u=i.transform(c.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>N(c)?Promise.resolve(i.transform(c.value,o)).then(u=>({status:n.value,value:u})):_);k.assertNever(i)}}return t.create=(r,e,n)=>new t(d({schema:r,typeName:x.ZodEffects,effect:e},v(n))),t.createWithPreprocess=(r,e,n)=>new t(d({schema:e,effect:{type:"preprocess",transform:r},typeName:x.ZodEffects},v(n))),t})();var O=(()=>{class t extends b{_parse(e){return this._getType(e)===f.undefined?I(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}return t.create=(r,e)=>new t(d({innerType:r,typeName:x.ZodOptional},v(e))),t})(),V=(()=>{class t extends b{_parse(e){return this._getType(e)===f.null?I(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}return t.create=(r,e)=>new t(d({innerType:r,typeName:x.ZodNullable},v(e))),t})(),Re=(()=>{class t extends b{_parse(e){let{ctx:n}=this._processInputParams(e),s=n.data;return n.parsedType===f.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}return t.create=(r,e)=>new t(d({innerType:r,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},v(e))),t})(),Ee=(()=>{class t extends b{_parse(e){let{ctx:n}=this._processInputParams(e),s=y(d({},n),{common:y(d({},n.common),{issues:[]})}),i=this._def.innerType._parse({data:s.data,path:s.path,parent:d({},s)});return q(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new A(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new A(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}return t.create=(r,e)=>new t(d({innerType:r,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},v(e))),t})(),at=(()=>{class t extends b{_parse(e){if(this._getType(e)!==f.nan){let s=this._getOrReturnCtx(e);return m(s,{code:l.invalid_type,expected:f.nan,received:s.parsedType}),_}return{status:"valid",value:e.data}}}return t.create=r=>new t(d({typeName:x.ZodNaN},v(r))),t})(),Pn=Symbol("zod_brand"),K=class extends b{_parse(r){let{ctx:e}=this._processInputParams(r),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}},Q=class t extends b{_parse(r){let{status:e,ctx:n}=this._processInputParams(r);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_:i.status==="dirty"?(e.dirty(),P(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?_:s.status==="dirty"?(e.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(r,e){return new t({in:r,out:e,typeName:x.ZodPipeline})}},Ne=(()=>{class t extends b{_parse(e){let n=this._def.innerType._parse(e),s=i=>(N(i)&&(i.value=Object.freeze(i.value)),i);return q(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}return t.create=(r,e)=>new t(d({innerType:r,typeName:x.ZodReadonly},v(e))),t})();function Je(t,r){let e=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t;return typeof e=="string"?{message:e}:e}function it(t,r={},e){return t?ie.create().superRefine((n,s)=>{let i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){let c=Je(r,n),u=c.fatal??e??!0;s.addIssue(y(d({code:"custom"},c),{fatal:u}))}});if(!i){let o=Je(r,n),c=o.fatal??e??!0;s.addIssue(y(d({code:"custom"},o),{fatal:c}))}}):ie.create()}var Mn={object:F.lazycreate},x=(function(t){return t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly",t})(x||{});var Zn=(t,r={message:`Input not instance of ${t.name}`})=>it(e=>e instanceof t,r),ot=ue.create,ct=xe.create,$n=at.create,qn=ve.create,dt=be.create,Un=Se.create,Fn=et.create,Ln=ke.create,zn=Te.create,Vn=ie.create,Yn=J.create,Bn=M.create,Wn=tt.create,Hn=X.create,Gn=F.create,Jn=F.strictCreate,Xn=Ie.create,Kn=oe.create,Qn=Ce.create,er=L.create,tr=ce.create,nr=nt.create,rr=rt.create,sr=de.create,ar=we.create,ir=Ae.create,or=le.create,cr=De.create,dr=me.create,ur=z.create,lr=O.create,mr=V.create,pr=z.createWithPreprocess,fr=Q.create,hr=()=>ot().optional(),gr=()=>ct().optional(),yr=()=>dt().optional(),_r={string:t=>ue.create(y(d({},t),{coerce:!0})),number:t=>xe.create(y(d({},t),{coerce:!0})),boolean:t=>be.create(y(d({},t),{coerce:!0})),bigint:t=>ve.create(y(d({},t),{coerce:!0})),date:t=>Se.create(y(d({},t),{coerce:!0}))};var xr=_;var ut=a.enum(["M","F"]),lt=a.object({id:a.string().regex(/^U-\d{8}-K\d+$/,"Student ID must match format U-00000123-K1"),parentAuthId:a.string().min(1,"Parent Auth ID is required"),fullName:a.string().min(1,"Full name is required"),dob:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date of birth must be in YYYY-MM-DD format"),gender:ut,allergies:a.string().min(1,'Allergies field is required (use "None" if no allergies)'),dietaryNotes:a.string().optional(),medicalNotes:a.string().optional()});var mt="^(\\+?1[-. ]?)?\\(?[0-9]{3}\\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}$",pt=new RegExp(mt),ft=a.object({street:a.string().min(1,"Street address is required"),city:a.string().min(1,"City is required"),state:a.string().min(1,"State is required"),zipCode:a.string().min(1,"Zip code is required")}),ht=a.object({name:a.string().min(1,"Emergency contact name is required"),phone:a.string().regex(pt,"Please enter a valid phone number"),relationship:a.string().min(1,"Relationship is required")}),gt=a.object({phone:a.string().regex(pt,"Please enter a valid phone number"),wechat:a.string().optional(),address:ft,emergencyContact:ht}),yt=a.object({createdAt:a.string().datetime(),updatedAt:a.string().datetime()}),vr=a.object({uid:a.string().min(1,"UID is required"),displayId:a.string().regex(/^U-\d{8}$/,"Display ID must match format U-00000123"),email:a.string().email("Invalid email address"),displayName:a.string().min(1,"Display name is required"),isAdmin:a.boolean().default(!1),students:a.array(lt).default([]).optional(),contactInfo:gt.optional(),timestamps:yt});var br=Math.pow(10,8)*24*60*60*1e3,ha=-br;var Oe=6e4,je=36e5;var Sr=3600;var _t=Sr*24,ga=_t*7,kr=_t*365.2425,Tr=kr/12,ya=Tr*3,Pe=Symbol.for("constructDateFrom");function Y(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Pe in t?t[Pe](r):t instanceof Date?new t.constructor(r):new Date(r)}function B(t,r){return Y(r||t,t)}function pe(t,...r){let e=Y.bind(null,t||r.find(n=>typeof n=="object"));return r.map(e)}function Me(t,r){let e=+B(t)-+B(r);return e<0?-1:e>0?1:e}function xt(t,r,e){let[n,s]=pe(e?.in,t,r);return n.getFullYear()-s.getFullYear()}function vt(t,r,e){let[n,s]=pe(e?.in,t,r),i=Me(n,s),o=Math.abs(xt(n,s));n.setFullYear(1584),s.setFullYear(1584);let c=Me(n,s)===-i,u=i*(o-+c);return u===0?0:u}function $e(t,r){let e=()=>Y(r?.in,NaN),n=r?.additionalDigits??2,s=Ar(t),i;if(s.date){let p=Dr(s.date,n);i=Rr(p.restDateString,p.year)}if(!i||isNaN(+i))return e();let o=+i,c=0,u;if(s.time&&(c=Er(s.time),isNaN(c)))return e();if(s.timezone){if(u=Nr(s.timezone),isNaN(u))return e()}else{let p=new Date(o+c),h=B(0,r?.in);return h.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),h.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),h}return B(o+c+u,r?.in)}var fe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ir=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Cr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ar(t){let r={},e=t.split(fe.dateTimeDelimiter),n;if(e.length>2)return r;if(/:/.test(e[0])?n=e[0]:(r.date=e[0],n=e[1],fe.timeZoneDelimiter.test(r.date)&&(r.date=t.split(fe.timeZoneDelimiter)[0],n=t.substr(r.date.length,t.length))),n){let s=fe.timezone.exec(n);s?(r.time=n.replace(s[1],""),r.timezone=s[1]):r.time=n}return r}function Dr(t,r){let e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),n=t.match(e);if(!n)return{year:NaN,restDateString:""};let s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function Rr(t,r){if(r===null)return new Date(NaN);let e=t.match(Ir);if(!e)return new Date(NaN);let n=!!e[4],s=ee(e[1]),i=ee(e[2])-1,o=ee(e[3]),c=ee(e[4]),u=ee(e[5])-1;if(n)return Zr(r,c,u)?Or(r,c,u):new Date(NaN);{let p=new Date(0);return!Pr(r,i,o)||!Mr(r,s)?new Date(NaN):(p.setUTCFullYear(r,i,Math.max(s,o)),p)}}function ee(t){return t?parseInt(t):1}function Er(t){let r=t.match(Cr);if(!r)return NaN;let e=Ze(r[1]),n=Ze(r[2]),s=Ze(r[3]);return $r(e,n,s)?e*je+n*Oe+s*1e3:NaN}function Ze(t){return t&&parseFloat(t.replace(",","."))||0}function Nr(t){if(t==="Z")return 0;let r=t.match(wr);if(!r)return 0;let e=r[1]==="+"?-1:1,n=parseInt(r[2]),s=r[3]&&parseInt(r[3])||0;return qr(n,s)?e*(n*je+s*Oe):NaN}function Or(t,r,e){let n=new Date(0);n.setUTCFullYear(t,0,4);let s=n.getUTCDay()||7,i=(r-1)*7+e+1-s;return n.setUTCDate(n.getUTCDate()+i),n}var jr=[31,null,31,30,31,30,31,31,30,31,30,31];function bt(t){return t%400===0||t%4===0&&t%100!==0}function Pr(t,r,e){return r>=0&&r<=11&&e>=1&&e<=(jr[r]||(bt(t)?29:28))}function Mr(t,r){return r>=1&&r<=(bt(t)?366:365)}function Zr(t,r,e){return r>=1&&r<=53&&e>=0&&e<=6}function $r(t,r,e){return t===24?r===0&&e===0:e>=0&&e<60&&r>=0&&r<60&&t>=0&&t<25}function qr(t,r){return r>=0&&r<=59}var St=5,kt=12;function Ur(t){return`${t}-01-01`}function Tt(t,r){let e=$e(t),n=$e(r);return vt(n,e)}function Fr(t,r){let e=Tt(t,r);return e>=St&&e<=kt}var qe=a.object({sessionId:a.string(),studentId:a.string()}),It=a.object({type:a.literal("remove_class"),target:qe}),Ct=a.object({type:a.enum(["remove_addon","add_addon"]),target:qe,addon:a.enum(["lunch","extendedCare"])}),te=a.discriminatedUnion("type",[It,Ct]);var Ue=a.object({id:a.string(),requestedAt:a.string().datetime(),requestedBy:a.string(),reason:a.string().optional(),actions:a.array(te).min(1),status:a.enum(["pending","approved","denied"]).default("pending"),adminAdjustment:a.number().int().default(0),adminAdjustmentReason:a.string().optional(),adminNotes:a.string().optional(),processedBy:a.string().optional(),processedAt:a.string().datetime().optional()});var wt=a.enum(["submitted","paid","cancelled"]),At=a.object({basePrice:a.number().int().nonnegative(),lunchPrice:a.number().int().nonnegative(),extendedCarePrice:a.number().int().nonnegative(),itemTotal:a.number().int().nonnegative()}),Dt=a.object({className:a.string(),weekName:a.string(),startDate:a.string(),endDate:a.string(),priceSnapshot:At}),Rt=a.object({sessionId:a.string().regex(/^CL-\d{8}$/),studentId:a.string().regex(/^U-\d{8}-K\d+$/),options:a.object({lunch:a.boolean(),extendedCare:a.boolean()}),status:wt,snapshot:Dt,submittedAt:a.string().datetime(),paidAt:a.string().datetime().optional(),cancelledAt:a.string().datetime().optional(),cancellationReason:a.string().optional(),isWaitlistClaim:a.boolean().optional()}),Et=a.object({sessionId:a.string().regex(/^CL-\d{8}$/),joinedAt:a.string().datetime(),isPromoted:a.boolean().default(!1),promotedAt:a.string().datetime().optional(),notes:a.string().optional()});var Nt=a.object({type:a.enum(["returning_family","sibling","multi_session","coupon","manual"]),amount:a.number().int().nonpositive(),description:a.string().optional()}),Ot=a.object({subtotal:a.number().int().nonnegative(),discounts:a.array(Nt)});function he(t){let r=t.discounts.reduce((e,n)=>e+n.amount,0);return Math.max(0,t.subtotal+r)}var jt=a.object({id:a.string(),amount:a.number().int(),reason:a.string(),createdAt:a.string().datetime(),createdBy:a.string()}),Pt=a.object({id:a.string(),amount:a.number().int(),reference:a.string(),method:a.enum(["check","zelle","cash","other"]),recordedAt:a.string().datetime(),recordedBy:a.string(),notes:a.string().optional()});var Mt=a.object({studentId:a.string(),className:a.string(),options:a.object({lunch:a.boolean(),extendedCare:a.boolean()}).optional()}),Zt=a.object({action:a.enum(["items_submitted","items_cancelled","payment_recorded","refund_processed","waitlist_joined","waitlist_left","waitlist_claimed","waitlist_promoted","lock_extended","change_requested","change_updated","change_approved","change_denied","addon_updated"]),timestamp:a.string().datetime(),actor:a.string(),details:a.string().optional(),affectedItems:a.array(Mt).optional(),className:a.string().optional(),amount:a.number().int().optional(),paymentMethod:a.string().optional(),paymentReference:a.string().optional()}),$t=a.object({id:a.string(),type:a.enum(["refund_fee","coupon","adjustment"]),amount:a.number().int(),description:a.string(),createdAt:a.string().datetime(),createdBy:a.string(),relatedRefundId:a.string().optional()}),qt=a.object({id:a.string(),amount:a.number().int().positive(),refundRequestId:a.string(),method:a.enum(["check","zelle","cash","other"]),reference:a.string().optional(),recordedAt:a.string().datetime(),recordedBy:a.string()}),Lr=a.object({userAuthId:a.string(),userDisplayId:a.string(),seasonId:a.string().regex(/^SN-\d{8}$/),year:a.number().int().positive(),items:a.array(Rt).default([]),waitlist:a.array(Et).default([]),pricing:Ot.nullable(),payments:a.array(Pt).default([]),totalPaid:a.number().int().default(0),changeRequests:a.array(Ue).default([]),processingFees:a.array($t).default([]),refunds:a.array(qt).default([]),adjustments:a.array(jt).default([]),lockExpiresAt:a.string().datetime().nullable(),history:a.array(Zt).default([]),createdAt:a.string().datetime(),updatedAt:a.string().datetime()});function zr(t){return t.items.filter(r=>r.status==="submitted")}function Vr(t){return t.items.filter(r=>r.status==="paid")}function Yr(t,r,e){return t.items.some(n=>n.sessionId===r&&n.studentId===e&&(n.status==="submitted"||n.status==="paid"))}function Br(t,r){return t.waitlist.some(e=>e.sessionId===r)}function Wr(t){if(!t.pricing)return 0;let r=he(t.pricing),e=(t.processingFees??[]).reduce((c,u)=>c+u.amount,0),n=(t.refunds??[]).reduce((c,u)=>c+u.amount,0),s=t.totalPaid??0,i=(t.adjustments??[]).reduce((c,u)=>c+u.amount,0),o=r+e+i-s-n;return Math.max(0,o)}function Hr(t,r){return!t.lockExpiresAt||!t.items.some(n=>n.status==="submitted")?!1:new Date(r)>new Date(t.lockExpiresAt)}var Ut=23;function Gr(t,r,e=Ut){if(t.isPromoted)return{isEligible:!0,reason:"promoted"};let n=new Date(t.joinedAt).getTime(),i=(new Date(r).getTime()-n)/(1e3*60*60);return i>e?{isEligible:!0,reason:"matured"}:{isEligible:!1,reason:"too_fresh",hoursUntilEligible:e-i}}function Jr(t,r){return!t.lockExpiresAt||!t.items.some(n=>n.status==="submitted")?!1:new Date(r)>new Date(t.lockExpiresAt)}function Xr(t,r,e=12){if(!t.lockExpiresAt||!t.items.some(c=>c.status==="submitted"))return!1;let s=new Date(r),o=(new Date(t.lockExpiresAt).getTime()-s.getTime())/(1e3*60*60);return o>0&&o<=e}function Kr(t,r){if(!t.lockExpiresAt||!t.items.some(u=>u.status==="submitted"))return null;let n=new Date(r),i=new Date(t.lockExpiresAt).getTime()-n.getTime();if(i<=0)return null;let o=Math.floor(i/(1e3*60*60)),c=Math.floor(i%(1e3*60*60)/(1e3*60));return{hours:o,minutes:c}}function Qr(t){return t.pricing?he(t.pricing):0}function es(t){return t.changeRequests&&t.changeRequests.length>0&&t.changeRequests.some(i=>i.status==="pending")?"change_requested":t.items.length>0&&t.items.every(s=>s.status==="cancelled")?t.totalPaid>0?"refunded":"cancelled":t.items.length>0&&t.items.every(s=>s.status==="paid")?"paid":t.items.length>0&&t.items.every(s=>s.status==="submitted")?"submitted":t.items.length>0?"partial":"empty"}var Ft=a.object({}),Lt=a.object({allowEnrollment:a.boolean(),maintenanceMode:a.boolean()}),zt=a.object({content:a.string()}),Vt=a.object({email:a.string().email(),phone:a.string(),address:a.string().optional()}),Yt=a.object({maturityHours:a.number().nonnegative().default(23),vacancyHoldExpirationHours:a.number().nonnegative().default(24),lastRecalculationAt:a.string().optional()}),ts=a.object({isSystemInitialized:a.boolean(),currentActiveYear:a.number().int().positive(),currentDate:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),currentTime:a.string().datetime({message:"Time must be ISO 8601 format with timezone"}),systemSwitch:Lt,financials:Ft,paymentInstructions:zt,contactInfo:Vt,waitlist:Yt.default({maturityHours:23})}),Fe={isSystemInitialized:!1,currentActiveYear:2025,currentDate:"2025-01-01",currentTime:"2025-01-01T00:00:00.000Z",systemSwitch:{allowEnrollment:!0,maintenanceMode:!1},financials:{},paymentInstructions:{content:`## Zelle
\u6536\u6B3E\u90AE\u7BB1: pay@berryfun.com

## \u73B0\u91D1
\u73B0\u91D1\u4ED8\u6B3E\u53EF\u4EAB **3% \u6298\u6263**

---
\u8BF7\u5728\u4ED8\u6B3E\u5907\u6CE8\u4E2D\u6CE8\u660E\u8BA2\u5355\u53F7\uFF0C\u4ED8\u6B3E\u540E\u8BF7\u8054\u7CFB\u6211\u4EEC\u786E\u8BA4\u3002`},contactInfo:{email:"info@berryfun.com",phone:"(555) 123-4567",address:"123 Berry Lane, Summer City, CA 90210"},waitlist:{maturityHours:23,vacancyHoldExpirationHours:24}};var Bt=a.object({minSessions:a.number().int().positive(),discountAmount:a.number().int().nonnegative()}),Le=a.object({deadline:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),price:a.number().int().nonnegative()}),W=a.object({id:a.string().regex(/^CL-\d{8}$/,"Session ID must be format: CL-00000001"),seasonId:a.string().regex(/^SN-\d{8}$/,"Season ID must be format: SN-00000001"),name:a.string().min(1).max(200),startDate:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),endDate:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),basePrice:a.number().int().positive().optional(),lunchPrice:a.number().int().nonnegative().optional(),extendedCarePrice:a.number().int().nonnegative().optional(),capacity:a.number().int().positive(),earlyBirdTiers:a.array(Le).optional(),isActive:a.boolean().default(!0)}).refine(t=>t.startDate<t.endDate,{message:"startDate must be before endDate",path:["endDate"]}),ns=W.innerType().partial().required({id:!0}),rs=W.innerType().omit({id:!0}),Wt=W;var ze=a.object({id:a.string().regex(/^SN-\d{8}$/,"Season ID must be format: SN-00000001"),year:a.number().int().positive(),name:a.string().min(1).max(100),startDate:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),endDate:a.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be ISO 8601 format: YYYY-MM-DD"),isActive:a.boolean(),description:a.string().max(1e4).optional(),siblingDiscountPerWeek:a.number().int().nonnegative().default(500),multiSessionDiscounts:a.array(Bt).default([]),refundProcessingFee:a.number().int().nonnegative().default(2e3),basePrice:a.number().int().positive().default(5e4),lunchPrice:a.number().int().nonnegative().default(0),extendedCarePrice:a.number().int().nonnegative().default(0),earlyBirdTiers:a.array(Le).default([]),sessions:a.array(Wt).default([])}),ss=ze.refine(t=>t.startDate<t.endDate,{message:"startDate must be before endDate",path:["endDate"]}),as=ze.partial().required({id:!0}),is=ze.omit({id:!0});function Ht(t,r){return y(d({},t),{basePrice:t.basePrice??r.basePrice,lunchPrice:t.lunchPrice??r.lunchPrice,extendedCarePrice:t.extendedCarePrice??r.extendedCarePrice,earlyBirdTiers:t.earlyBirdTiers??r.earlyBirdTiers})}function os(t){return y(d({},t),{sessions:t.sessions.map(r=>Ht(r,t))})}var cs=W.innerType().extend({enrolledCount:a.number().int().nonnegative(),vacancyHoldsCount:a.number().int().nonnegative(),publicAvailable:a.number().int().nonnegative(),waitlistAvailable:a.number().int().nonnegative()});function Ve(t,r){let e=r?.enrolledStudents?.length??0,n=r?.vacancyHolds?.length??0,s=Math.max(0,t.capacity-e-n),i=Math.max(0,t.capacity-e);return y(d({},t),{enrolledCount:e,vacancyHoldsCount:n,publicAvailable:s,waitlistAvailable:i})}function ds(t,r){return t.map(e=>Ve(e,r?.classes[e.id]))}var Gt=a.object({id:a.string().regex(/^VH-\d{8}$/,"Vacancy hold ID must be format: VH-00000001"),createdAt:a.string().datetime(),expiresAt:a.string().datetime(),originUserId:a.string().regex(/^U-\d{8}$/).optional()}),Jt=a.object({enrolledStudents:a.array(a.string().regex(/^U-\d{8}-K\d+$/)).default([]),vacancyHolds:a.array(Gt).default([])}),us=a.object({seasonId:a.string().regex(/^SN-\d{8}$/,"Season ID must be format: SN-00000001"),classes:a.record(a.string(),Jt)});function Xt(t,r){let e=t.classes[r];return e?e.vacancyHolds??[]:[]}function ls(t,r){return Xt(t,r).length}var Ye=class{static resolveBasePrice(r,e){if(!r.earlyBirdTiers||r.earlyBirdTiers.length===0)return r.basePrice;let n=[...r.earlyBirdTiers].sort((s,i)=>s.deadline.localeCompare(i.deadline));for(let s of n)if(e<=s.deadline)return s.price;return r.basePrice}static calculateTotalPrice(r,e,n){let s=this.resolveBasePrice(r,e);return n.includeLunch&&(s+=r.lunchPrice),n.includeExtendedCare&&(s+=r.extendedCarePrice),s}static formatPrice(r){return`$${(r/100).toFixed(2)}`}static createSessionLookup(r){let e=new Map;for(let n of r)e.set(n.id,n);return e}static createPriceSnapshot(r,e,n){let s=this.resolvePriceFromData(r,e),i=s;return n.lunch&&(i+=r.lunchPrice),n.extendedCare&&(i+=r.extendedCarePrice),{basePrice:s,lunchPrice:r.lunchPrice,extendedCarePrice:r.extendedCarePrice,itemTotal:i}}static resolvePriceFromData(r,e){if(!r.earlyBirdTiers||r.earlyBirdTiers.length===0)return r.basePrice;let n=[...r.earlyBirdTiers].sort((s,i)=>s.deadline.localeCompare(i.deadline));for(let s of n)if(e<=s.deadline)return s.price;return r.basePrice}static calculateCartPricing(r){let{items:e,sessionLookup:n,currentDate:s,discountConfig:i}=r,o=0;for(let u of e){let p=n.get(u.sessionId);if(!p)throw new Error(`Session not found: ${u.sessionId}`);let h=this.createPriceSnapshot(p,s,u.options);o+=h.itemTotal}let c=this.calculateOrderDiscountsFromItems(e,i);return{subtotal:o,discounts:c}}static recalculateOrderPricing(r){let{existingItems:e,discountConfig:n}=r,s=e.reduce((o,c)=>o+c.priceSnapshot.itemTotal,0),i=this.calculateOrderDiscountsFromItems(e,n);return{subtotal:s,discounts:i}}static calculateOrderDiscountsFromItems(r,e){let n=[],s=new Map;for(let o of r)s.has(o.sessionId)||s.set(o.sessionId,new Set),s.get(o.sessionId).add(o.studentId);if(e.siblingDiscountPerWeek>0){let o=0,c=0;for(let[,u]of s)u.size>=2&&(o+=e.siblingDiscountPerWeek*u.size,c++);o>0&&n.push({type:"sibling",amount:-o,description:`Sibling discount (${c} session${c>1?"s":""} with multiple students)`})}let i=s.size;if(e.multiSessionDiscountTiers.length>0){let o=[...e.multiSessionDiscountTiers].sort((c,u)=>u.minSessions-c.minSessions);for(let c of o)if(i>=c.minSessions){n.push({type:"multi_session",amount:-c.discountAmount,description:`${c.minSessions}+ sessions discount`});break}}return n}};var ms=a.object({seasonId:a.string(),items:a.array(a.object({sessionId:a.string(),studentId:a.string(),options:a.object({lunch:a.boolean(),extendedCare:a.boolean()})}))}),ps=a.object({seasonId:a.string(),items:a.array(a.object({sessionId:a.string(),studentId:a.string(),options:a.object({lunch:a.boolean(),extendedCare:a.boolean()})}))}),fs=a.object({year:a.number(),userAuthId:a.string(),amount:a.number(),reference:a.string(),method:a.enum(["check","zelle","cash","other"]),notes:a.string().optional()});var hs=a.object({year:a.number(),items:a.array(a.object({sessionId:a.string(),studentId:a.string()})),reason:a.string()}),gs=a.object({seasonId:a.string(),sessionId:a.string()}),ys=a.object({seasonId:a.string(),sessionId:a.string()}),_s=a.object({year:a.number(),userAuthId:a.string(),sessionId:a.string(),notes:a.string().optional()}),xs=a.object({year:a.number(),items:a.array(a.object({sessionId:a.string(),studentId:a.string()}))}),vs=a.object({year:a.number(),actions:a.array(te)}),bs=a.object({year:a.number(),actions:a.array(te),reason:a.string().optional()}),Ss=a.object({year:a.number(),userAuthId:a.string(),changeRequestId:a.string(),adminAdjustment:a.number().optional(),adminAdjustmentReason:a.string().optional(),adminNotes:a.string().optional()}),ks=a.object({year:a.number(),userAuthId:a.string(),changeRequestId:a.string(),adminNotes:a.string().optional()}),Ts=a.object({year:a.number(),userAuthId:a.string(),changeRequestId:a.string(),adminNotes:a.string()}),Is=a.object({userId:a.string(),userName:a.string(),sessionId:a.string(),className:a.string(),joinedAt:a.string(),isPromoted:a.boolean(),promotedAt:a.string().optional(),notes:a.string().optional()}),Cs=a.object({success:a.boolean(),message:a.string()}),ws=a.object({success:a.boolean(),message:a.string(),createdData:a.object({config:a.boolean(),season:a.string(),classes:a.array(a.string()),users:a.array(a.string())})}),As=a.object({email:a.string(),displayName:a.string(),isAdmin:a.boolean().optional()}),Ds=a.object({success:a.boolean(),user:a.object({uid:a.string(),email:a.string(),displayName:a.string(),displayId:a.string()})}),Rs=a.object({seasonId:a.string(),name:a.string(),year:a.number(),startDate:a.string(),endDate:a.string()}),Es=a.object({sessionId:a.string(),seasonId:a.string(),name:a.string(),capacity:a.number(),enrolledCount:a.number().optional(),year:a.number().optional(),basePrice:a.number().optional()}),Ns=a.object({scenarioId:a.string(),setupData:a.record(a.unknown()).optional()}),Os=a.object({success:a.boolean(),message:a.string(),loginAs:a.object({email:a.string(),password:a.string(),displayName:a.string()}).optional(),navigateTo:a.string().optional(),createdData:a.record(a.unknown()).optional()}),Kt=a.object({name:a.string(),dob:a.string().optional(),gender:a.enum(["M","F"]).optional(),allergies:a.string().optional(),dietaryNotes:a.string().optional(),medicalNotes:a.string().optional()}),Qt=a.object({name:a.string(),students:a.array(a.union([a.string(),Kt])).optional(),isAdmin:a.boolean().optional()}),en=a.object({deadline:a.string(),price:a.number()}),tn=a.object({parentName:a.string(),studentName:a.string().optional(),isEligible:a.boolean().optional()}),nn=a.object({name:a.string(),capacity:a.number().optional(),basePrice:a.number().optional(),startDate:a.string().optional(),endDate:a.string().optional(),fillCapacity:a.number().optional(),earlyBirdTiers:a.array(en).optional(),waitlistEntries:a.array(tn).optional(),vacancyHolds:a.number().optional()}),rn=a.object({name:a.string(),year:a.number().optional(),startDate:a.string().optional(),endDate:a.string().optional(),classes:a.array(nn).optional(),isActive:a.boolean().optional()}),sn=a.enum(["fillRemainingCapacity","expireWaitlistHolds","createVacancyHold","releaseVacancyHold","claimVacancyByOther"]),an=a.object({label:a.string(),instruction:a.string(),action:sn,targetClass:a.string().optional()}),on=a.object({parents:a.array(Qt).optional(),seasons:a.array(rn).optional(),loginAs:a.string().optional(),navigateTo:a.string().optional(),serverTime:a.string().optional(),midTestActions:a.array(an).optional()}),js=a.object({scenario:on}),Ps=a.object({action:sn,targetClass:a.string().optional()}),Ms=a.object({success:a.boolean(),message:a.string()});var ge=class t{functions=re(Be);_loading=j(!1);_error=j(null);loading=this._loading.asReadonly();error=this._error.asReadonly();async getGlobalConfig(){return this.wrapCall("getGlobalConfig",void 0)}async updateActiveYear(r){return this.wrapCall("updateActiveYear",{year:r})}async updateFinancialRules(r){return this.wrapCall("updateFinancialRules",{rules:r})}async updateSystemSwitch(r){return this.wrapCall("updateSystemSwitch",{switches:r})}async updatePaymentInstructions(r){return this.wrapCall("updatePaymentInstructions",{instructions:r})}async updateContactInfo(r){return this.wrapCall("updateContactInfo",{contactInfo:r})}clearError(){this._error.set(null)}async wrapCall(r,e){this._loading.set(!0),this._error.set(null);try{return await this.functions.call(r,e)}catch(n){let s=n instanceof Error?n.message:String(n);throw this._error.set(s),n}finally{this._loading.set(!1)}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})};var cn=class t{rpc=re(ge);_config=j(Fe);_loading=j(!1);_error=j(null);config=this._config.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();isSystemInitialized=D(()=>this._config().isSystemInitialized);currentActiveYear=D(()=>this._config().currentActiveYear);currentDate=D(()=>this._config().currentDate);currentTime=D(()=>this._config().currentTime);systemSwitch=D(()=>this._config().systemSwitch);financials=D(()=>this._config().financials);paymentInstructions=D(()=>this._config().paymentInstructions);contactInfo=D(()=>this._config().contactInfo);async fetchConfig(){this._loading.set(!0),this._error.set(null);try{let r=await this.rpc.getGlobalConfig();console.log("Fetched global config:",r),this._config.set(r)}catch(r){let e=r instanceof Error?r.message:"Failed to load configuration";throw this._error.set(e),console.error("Failed to fetch global config:",r),r}finally{this._loading.set(!1)}}async updateActiveYear(r){this._loading.set(!0),this._error.set(null);try{await this.rpc.updateActiveYear(r),await this.fetchConfig()}catch(e){let n=e instanceof Error?e.message:"Failed to update year";throw this._error.set(n),console.error("Failed to update active year:",e),e}finally{this._loading.set(!1)}}async updateFinancialRules(r){this._loading.set(!0),this._error.set(null);try{await this.rpc.updateFinancialRules(r),await this.fetchConfig()}catch(e){let n=e instanceof Error?e.message:"Failed to update financial rules";throw this._error.set(n),console.error("Failed to update financial rules:",e),e}finally{this._loading.set(!1)}}async updateSystemSwitch(r){this._loading.set(!0),this._error.set(null);try{await this.rpc.updateSystemSwitch(r),await this.fetchConfig()}catch(e){let n=e instanceof Error?e.message:"Failed to update system switches";throw this._error.set(n),console.error("Failed to update system switches:",e),e}finally{this._loading.set(!1)}}async updatePaymentInstructions(r){this._loading.set(!0),this._error.set(null);try{await this.rpc.updatePaymentInstructions(r),await this.fetchConfig()}catch(e){let n=e instanceof Error?e.message:"Failed to update payment information";throw this._error.set(n),console.error("Failed to update payment instructions:",e),e}finally{this._loading.set(!1)}}async updateContactInfo(r){this._loading.set(!0),this._error.set(null);try{await this.rpc.updateContactInfo(r),await this.fetchConfig()}catch(e){let n=e instanceof Error?e.message:"Failed to update contact information";throw this._error.set(n),console.error("Failed to update contact info:",e),e}finally{this._loading.set(!1)}}async ensureSystemInitialized(){console.log("[ConfigService] Fetching config (server auto-bootstraps if needed)...");try{await this.fetchConfig();let r=this._config().isSystemInitialized;return console.log("[ConfigService] System initialized:",r),r}catch(r){return console.error("[ConfigService] Failed to fetch config:",r),!1}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})};export{ss as a,os as b,Ve as c,ds as d,mt as e,Ur as f,Tt as g,Fr as h,us as i,ls as j,he as k,Lr as l,zr as m,Vr as n,Yr as o,Br as p,Wr as q,Hr as r,Gr as s,Ye as t,Jr as u,Xr as v,Kr as w,Qr as x,es as y,cn as z};
