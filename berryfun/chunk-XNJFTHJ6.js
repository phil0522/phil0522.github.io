import{a as A}from"./chunk-QZGAVVE5.js";import{d as E}from"./chunk-RYIKU5Y3.js";import{X as O,Z as P,d as b,j as w,k as M}from"./chunk-NR32JDWD.js";import"./chunk-UYHN5VVP.js";import{Ab as h,Ea as r,Kb as _,N as c,Pa as f,Za as v,_a as u,bb as x,cb as y,da as m,db as S,eb as n,fb as i,gb as g,ob as p,wb as C,yb as a,zb as l}from"./chunk-AFX6RXNX.js";import"./chunk-Q7L6LLAK.js";var I=o=>["/admin/sessions",o,"registrations"],L=(o,e)=>e.id;function R(o,e){o&1&&(n(0,"div",2),g(1,"div",6),n(2,"p"),a(3,"Loading sessions..."),i()())}function N(o,e){if(o&1&&(n(0,"div",3)(1,"div",7),a(2,"!"),i(),n(3,"p"),a(4),i()()),o&2){let t=p();r(4),l(t.error())}}function T(o,e){o&1&&(n(0,"div",4)(1,"h3"),a(2,"No sessions found"),i(),n(3,"p"),a(4,"Catalog has no sessions for this year."),i()())}function z(o,e){if(o&1&&(n(0,"tr")(1,"td",9)(2,"div",10),a(3),i(),n(4,"div",11),a(5),i()(),n(6,"td"),a(7),i(),n(8,"td"),a(9),i(),n(10,"td",12),a(11),i(),n(12,"td")(13,"span",13),a(14),i()(),n(15,"td",14)(16,"a",15),a(17," View Roster "),i()()()),o&2){let t=e.$implicit,s=p(2);r(3),l(t.name),r(2),l(t.id),r(2),l(t.seasonName),r(2),l(s.formatRange(t.startDate,t.endDate)),r(2),l(t.capacity),r(2),C("inactive",!t.isActive),r(),h(" ",t.isActive?"Active":"Inactive"," "),r(2),S("routerLink",_(9,I,t.id))}}function F(o,e){if(o&1&&(n(0,"div",5)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),a(5,"Session"),i(),n(6,"th"),a(7,"Season"),i(),n(8,"th"),a(9,"Dates"),i(),n(10,"th"),a(11,"Capacity"),i(),n(12,"th"),a(13,"Status"),i(),g(14,"th"),i()(),n(15,"tbody"),x(16,z,18,11,"tr",null,L),i()()()),o&2){let t=p();r(16),y(t.rows())}}var k=class o{userService=c(P);seasonService=c(O);router=c(w);loading=m(!0);error=m(null);rows=m([]);async ngOnInit(){if(!this.userService.isAuthenticated()){this.router.navigate(["/login"]);return}if(!this.userService.isAdmin()){this.router.navigate(["/"]);return}this.loading.set(!0),this.error.set(null);try{await this.seasonService.loadSeasons(),await this.seasonService.loadClassesByYear();let e=this.seasonService.seasons(),s=this.seasonService.classes().map(d=>this.toRow(d,e));s.sort((d,D)=>d.startDate.localeCompare(D.startDate)),this.rows.set(s)}catch(e){let t=e instanceof Error?e.message:"Failed to load sessions.";this.error.set(t)}finally{this.loading.set(!1)}}formatRange(e,t){return!e||!t?"--":E(e,t)}toRow(e,t){let s=t.find(d=>d.id===e.seasonId)?.name??"Unknown Season";return{id:e.id,name:e.name,seasonId:e.seasonId,seasonName:s,startDate:e.startDate??"",endDate:e.endDate??"",capacity:e.capacity??0,isActive:e.isActive??!1}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-admin-session-list"]],decls:6,vars:1,consts:[["pageTitle","Session Registrations","pageSubtitle","Open a session to view the roster"],[1,"session-list"],[1,"loading-container"],[1,"error-container"],[1,"empty-state"],[1,"table-container"],[1,"spinner"],[1,"error-icon"],[1,"session-table"],[1,"col-session"],[1,"session-name"],[1,"session-id"],[1,"col-capacity"],[1,"status-pill"],[1,"col-link"],[1,"btn-link",3,"routerLink"]],template:function(t,s){t&1&&(n(0,"app-admin-layout",0)(1,"div",1),v(2,R,4,0,"div",2)(3,N,5,1,"div",3)(4,T,5,0,"div",4)(5,F,18,0,"div",5),i()()),t&2&&(r(2),u(s.loading()?2:s.error()?3:s.rows().length===0?4:5))},dependencies:[b,M,A],styles:[".session-list[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1.5rem}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid var(--sys-outline, #e0e0e0);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{background:var(--sys-error-container, #ffebee);border-radius:12px}.error-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--sys-error, #c62828);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;margin-bottom:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.session-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.85rem}.session-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.625rem .75rem;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--sys-on-surface-variant, #666);border-bottom:2px solid var(--sys-outline-variant, #e0e0e0);white-space:nowrap}.session-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.625rem .75rem;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0);color:var(--sys-on-surface, #212121);vertical-align:top}.col-session[_ngcontent-%COMP%]{min-width:200px}.session-name[_ngcontent-%COMP%]{font-weight:600}.session-id[_ngcontent-%COMP%]{font-size:.75rem;color:var(--sys-on-surface-variant, #666);margin-top:.2rem}.col-capacity[_ngcontent-%COMP%]{text-align:right;font-variant-numeric:tabular-nums}.status-pill[_ngcontent-%COMP%]{display:inline-block;padding:.2rem .5rem;border-radius:999px;background:var(--sys-surface-variant, #f5f5f5);font-size:.75rem;font-weight:600}.status-pill.inactive[_ngcontent-%COMP%]{background:#eee;color:#777}.col-link[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}.btn-link[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);text-decoration:none;font-weight:600;font-size:.8rem}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{k as AdminSessionListComponent};
