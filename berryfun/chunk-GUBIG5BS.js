import{a as j,c as H,f as A,r as R}from"./chunk-S2KOEWNW.js";import{a as N}from"./chunk-4SGKZNGX.js";import{g as W}from"./chunk-PIGAGUEZ.js";import"./chunk-TUKMHW5G.js";import"./chunk-U2XZRBUO.js";import{a as F}from"./chunk-N5FWPJKF.js";import"./chunk-EPAUVA6W.js";import"./chunk-EDEZRKI3.js";import{d as B,j as z}from"./chunk-MC2IQD7Q.js";import{Ab as o,Bb as p,Cb as v,Eb as I,Gb as y,Ha as s,Hb as P,Ib as S,R as f,Rb as b,Sa as E,Ub as L,W as C,X as _,Y as w,Z as M,ab as d,bb as m,db as O,eb as k,gb as i,hb as n,ia as D,ib as h,mb as g,ob as x,qb as c,xb as T,zb as V}from"./chunk-EVJ2WVWM.js";var G=(r,t)=>t.deadline;function J(r,t){r&1&&(i(0,"div",1),o(1,"Loading..."),n())}function U(r,t){if(r&1){let e=g();i(0,"div",2)(1,"strong"),o(2,"Error:"),n(),o(3),i(4,"button",3),x("click",function(){C(e);let l=c();return _(l.seasonService.clearError())}),o(5,"Close"),n()()}if(r&2){let e=c();s(3),v(" ",e.seasonService.error()," ")}}function q(r,t){if(r&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),S("ngModelChange",function(l){C(e);let u=c(2);return P(u.includeLunch,l)||(u.includeLunch=l),_(l)}),x("change",function(){C(e);let l=c(2);return _(l.updateTotal())}),n(),o(3," Lunch Service "),n(),i(4,"span",17),o(5),n()()}if(r&2){let e=c(),a=c();s(2),y("ngModel",a.includeLunch),s(3),p(a.seasonService.formatPrice(e.lunchPrice))}}function K(r,t){if(r&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),S("ngModelChange",function(l){C(e);let u=c(2);return P(u.includeExtendedCare,l)||(u.includeExtendedCare=l),_(l)}),x("change",function(){C(e);let l=c(2);return _(l.updateTotal())}),n(),o(3," Extended Care "),n(),i(4,"span",17),o(5),n()()}if(r&2){let e=c(),a=c();s(2),y("ngModel",a.includeExtendedCare),s(3),p(a.seasonService.formatPrice(e.extendedCarePrice))}}function Q(r,t){r&1&&(i(0,"div",21),o(1,"\u{1F389} You're getting the early bird price!"),n())}function X(r,t){if(r&1&&(i(0,"div",25)(1,"span"),o(2),n(),i(3,"span",26),o(4),n()()),r&2){let e=t.$implicit,a=c(3);s(2),v("Before ",a.formatDate(e.deadline)),s(2),p(a.seasonService.formatPrice(e.price))}}function Z(r,t){if(r&1&&(i(0,"section",7)(1,"h3"),o(2,"Early Bird Pricing"),n(),O(3,X,5,2,"div",25,G),i(5,"div",25)(6,"span"),o(7,"Regular Price"),n(),i(8,"span",26),o(9),n()()()),r&2){let e=c(),a=c();s(3),k(e.earlyBirdTiers),s(6),p(a.seasonService.formatPrice(e.basePrice))}}function $(r,t){if(r&1){let e=g();i(0,"button",28),x("click",function(){C(e);let l=c(3);return _(l.onViewCartClick())}),w(),i(1,"svg",29),h(2,"path",30),n(),o(3," View Cart "),n(),M(),i(4,"p",31),o(5,"This class is already in your cart"),n()}}function ee(r,t){if(r&1){let e=g();i(0,"button",32),x("click",function(){C(e);let l=c(3);return _(l.onEnrollClick())}),o(1,"Enroll Now"),n()}}function te(r,t){if(r&1&&d(0,$,6,0)(1,ee,2,0,"button",27),r&2){let e=c(2);m(e.isInCart()?0:1)}}function ne(r,t){if(r&1){let e=g();i(0,"button",28),x("click",function(){C(e);let l=c(2);return _(l.onWaitlistClick())}),o(1," Join Waitlist "),n()}}function ie(r,t){if(r&1&&(i(0,"div",4)(1,"h2"),o(2),n(),i(3,"div",5),o(4),n()(),i(5,"div",6)(6,"section",7)(7,"h3"),o(8,"Session Information"),n(),i(9,"div",8)(10,"span",9),o(11,"Start Date:"),n(),i(12,"span",10),o(13),n()(),i(14,"div",8)(15,"span",9),o(16,"End Date:"),n(),i(17,"span",10),o(18),n()(),i(19,"div",8)(20,"span",9),o(21,"Duration:"),n(),i(22,"span",10),o(23),n()()(),i(24,"section",7)(25,"h3"),o(26,"Availability"),n(),i(27,"div",11),h(28,"div",12),n(),i(29,"div",13),o(30),n()(),i(31,"section",14)(32,"h3"),o(33,"Pricing Calculator"),n(),i(34,"div",15)(35,"label"),h(36,"input",16),o(37," Base Fee "),n(),i(38,"span",17),o(39),n()(),d(40,q,6,2,"div",15),d(41,K,6,2,"div",15),i(42,"div",18)(43,"span",19),o(44,"Total:"),n(),i(45,"span",20),o(46),n()(),d(47,Q,2,0,"div",21),n(),d(48,Z,10,1,"section",7),i(49,"section",22),d(50,te,2,1)(51,ne,2,0,"button",23),n()()),r&2){let e=t,a=c();s(2),p(e.name),s(),V("status-"+a.statusClass),s(),v(" ",a.registrationService.getStatusMessage(e)," "),s(9),p(a.formatDate(e.startDate)),s(5),p(a.formatDate(e.endDate)),s(5),v("",a.calculateDuration(e.startDate,e.endDate)," days"),s(5),T("width",e.enrolledCount/e.capacity*100,"%"),s(2),I(" Enrolled: ",e.enrolledCount," / ",e.capacity," (",e.publicAvailable," spots remaining) "),s(9),p(a.seasonService.formatPrice(a.basePrice)),s(),m(e.lunchPrice>0?40:-1),s(),m(e.extendedCarePrice>0?41:-1),s(5),p(a.totalPriceFormatted),s(),m(a.showEarlyBird?47:-1),s(),m(e.earlyBirdTiers.length>0?48:-1),s(2),m(a.registrationService.isFullForPublic(e)?a.statusClass==="full"?51:-1:50)}}var Y=class r{seasonService=f(F);registrationService=f(N);cartStore=f(W);router=f(z);sessionId=L();includeLunch=!1;includeExtendedCare=!1;totalPrice=0;totalPriceFormatted="$0.00";basePrice=0;showEarlyBird=!1;statusClass="available";staticClassData=b(()=>this.seasonService.selectedClass());classData=b(()=>{let t=this.staticClassData();return t?this.registrationService.createViewType(t):null});isInCart=b(()=>{let t=this.classData();return t?this.cartStore.isClassInCart(t.id):!1});constructor(){D(()=>{let t=this.sessionId();t&&this.loadClassData(t)})}async loadClassData(t){await this.seasonService.loadClass(t),this.updateTotal()}updateTotal(){let t=this.classData();if(!t)return;this.totalPrice=this.seasonService.calculatePrice(t,{includeLunch:this.includeLunch,includeExtendedCare:this.includeExtendedCare}),this.basePrice=this.seasonService.calculatePrice(t,{includeLunch:!1,includeExtendedCare:!1}),this.totalPriceFormatted=this.seasonService.formatPrice(this.totalPrice),this.showEarlyBird=this.basePrice<t.basePrice;let e=this.registrationService.getEnrollmentStatus(t);this.statusClass=e==="open"?"available":"full"}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}calculateDuration(t,e){let a=new Date(t),l=new Date(e),u=Math.abs(l.getTime()-a.getTime());return Math.ceil(u/(1e3*60*60*24))+1}onEnrollClick(){let t=this.classData();t&&this.cartStore.addToCart(t,[],{lunch:this.includeLunch,extendedCare:this.includeExtendedCare})}onViewCartClick(){this.router.navigate(["/cart"])}onWaitlistClick(){this.router.navigate(["/waitlist"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-class-details"]],inputs:{sessionId:[1,"sessionId"]},decls:4,vars:3,consts:[[1,"class-details"],[1,"loading"],[1,"error-message"],[3,"click"],[1,"details-header"],[1,"status-badge"],[1,"details-content"],[1,"info-section"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"capacity-bar"],[1,"capacity-fill"],[1,"capacity-text"],[1,"pricing-section"],[1,"price-item"],["type","checkbox","disabled","","checked",""],[1,"price"],[1,"price-total"],[1,"total-label"],[1,"total-value"],[1,"early-bird-notice"],[1,"action-section"],[1,"btn-secondary","btn-large"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"tier-row"],[1,"tier-price"],[1,"btn-primary","btn-large"],[1,"btn-secondary","btn-large",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"in-cart-note"],[1,"btn-primary","btn-large",3,"click"]],template:function(e,a){if(e&1&&(i(0,"div",0),d(1,J,2,0,"div",1),d(2,U,6,1,"div",2),d(3,ie,52,19),n()),e&2){let l;s(),m(a.seasonService.loading()?1:-1),s(),m(a.seasonService.error()?2:-1),s(),m((l=a.classData())?3:-1,l)}},dependencies:[B,R,j,H,A],styles:[".class-details[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--sys-on-surface-variant, #666)}.error-message[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c);padding:1rem;border-radius:8px;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--sys-primary, #c62828)}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.875rem}.status-available[_ngcontent-%COMP%]{background-color:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20)}.status-full[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c)}.details-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.info-section[_ngcontent-%COMP%], .pricing-section[_ngcontent-%COMP%], .action-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline, #e0e0e0);border-radius:12px;padding:1.5rem}h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--sys-on-surface, #212121);font-size:1.125rem}.info-row[_ngcontent-%COMP%], .tier-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.info-row[_ngcontent-%COMP%]:last-child, .tier-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.info-value[_ngcontent-%COMP%], .tier-price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.capacity-bar[_ngcontent-%COMP%]{width:100%;height:8px;background-color:var(--sys-surface-variant, #f5f5f5);border-radius:4px;overflow:hidden;margin-bottom:.5rem}.capacity-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--sys-primary, #c62828);transition:width .3s ease}.capacity-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.price-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.price-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 0 0;margin-top:.5rem;border-top:2px solid var(--sys-outline, #e0e0e0)}.total-label[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.total-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--sys-primary, #c62828)}.early-bird-notice[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,orange);color:#333;padding:.75rem 1rem;border-radius:8px;font-weight:600;text-align:center;margin-top:1rem}.action-section[_ngcontent-%COMP%]{text-align:center}.btn-large[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:1rem 2rem;font-size:1.125rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.in-cart-note[_ngcontent-%COMP%]{margin-top:.75rem;font-size:.875rem;color:var(--color-success, #43a047)}.btn-primary[_ngcontent-%COMP%]{background-color:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--sys-primary-dark, #8e0000);transform:translateY(-2px);box-shadow:0 4px 12px #c628284d}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--sys-tertiary, #1976d2);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--sys-tertiary-dark, #0d47a1);transform:translateY(-2px);box-shadow:0 4px 12px #1976d24d}"]})};export{Y as ClassDetailsComponent};
