import{c as P}from"./chunk-OYTHWX6F.js";import{b as E}from"./chunk-IF3UYB7X.js";import"./chunk-TUKMHW5G.js";import"./chunk-U2XZRBUO.js";import"./chunk-N5FWPJKF.js";import"./chunk-EPAUVA6W.js";import"./chunk-EDEZRKI3.js";import{d as M,j as S}from"./chunk-MC2IQD7Q.js";import{Ab as r,Bb as y,Ha as s,R as c,Sa as _,W as h,X as v,Y as m,Z as C,ab as g,bb as p,jb as e,kb as t,lb as l,mb as b,nb as x,pb as f,qb as u}from"./chunk-EVJ2WVWM.js";function k(i,a){if(i&1){let n=b();e(0,"div",5),m(),e(1,"svg",8),l(2,"path",9),t(),C(),e(3,"span"),r(4),t(),e(5,"button",10),f("click",function(){h(n);let d=u();return v(d.authService.clearError())}),m(),e(6,"svg",11),l(7,"path",12),t()()()}if(i&2){let n=u();s(4),y(n.authService.error())}}function z(i,a){i&1&&(l(0,"span",13),r(1," Signing in... "))}function L(i,a){i&1&&(m(),e(0,"svg",14),l(1,"path",15)(2,"path",16)(3,"path",17)(4,"path",18),t(),r(5," Sign in with Google "))}var w=class i{authService=c(P);userService=c(E);router=c(S);async onGoogleSignIn(){try{await this.authService.signInWithGoogle();let a=1e4,n=100,o=0;for(;!this.userService.currentUser()&&o<a;)await new Promise(O=>setTimeout(O,n)),o+=n;if(!this.userService.currentUser())return;this.userService.isAdmin()?this.router.navigate(["/admin"]):this.userService.hasStudents()?this.router.navigate(["/catalog"]):this.router.navigate(["/profile"],{queryParams:{tab:"students"}})}catch{}}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=_({type:i,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"login-page"],[1,"login-container"],[1,"login-header"],[1,"logo-icon"],[1,"login-subtitle"],[1,"error-message"],[1,"btn-google",3,"click","disabled"],[1,"login-info"],["width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],[1,"dismiss-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"spinner"],["viewBox","0 0 24 24","width","20","height","20",1,"google-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),r(4,"\u{1F353}"),t(),e(5,"h1"),r(6,"Berryfun Summer Camp"),t(),e(7,"p",4),r(8,"Sign in with Google"),t()(),g(9,k,8,1,"div",5),e(10,"button",6),f("click",function(){return o.onGoogleSignIn()}),g(11,z,2,0)(12,L,6,0),t(),e(13,"div",7)(14,"p"),r(15,"First-time login will automatically create an account"),t()()()()),n&2&&(s(9),p(o.authService.error()?9:-1),s(),x("disabled",o.authService.loading()),s(),p(o.authService.loading()?11:12))},dependencies:[M],styles:[".login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem;background:linear-gradient(135deg,#fff5f5,#fff)}.login-container[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #0000001a;padding:2.5rem}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-icon[_ngcontent-%COMP%]{font-size:3.5rem;display:block;margin-bottom:.75rem}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--sys-primary, #c62828)}.login-subtitle[_ngcontent-%COMP%]{margin:.75rem 0 0;color:var(--sys-on-surface-variant, #666);font-size:.95rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--sys-error-container, #ffebee);color:var(--sys-error, #c62828);border-radius:8px;margin-bottom:1.5rem;font-size:.875rem}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:first-child{flex-shrink:0}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.dismiss-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;cursor:pointer;color:inherit;opacity:.7}.dismiss-btn[_ngcontent-%COMP%]:hover{opacity:1}.btn-google[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;width:100%;padding:.875rem 1.5rem;background:#fff;color:var(--sys-on-surface, #333);border:1px solid var(--sys-outline, #ddd);border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-google[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-surface-variant, #f5f5f5);border-color:var(--sys-outline, #ccc);box-shadow:0 2px 8px #0000001a}.btn-google[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.google-icon[_ngcontent-%COMP%]{flex-shrink:0}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(0,0,0,.1);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-info[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--sys-outline-variant, #f0f0f0)}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--sys-on-surface-variant, #999);font-size:.8125rem}"]})};export{w as LoginComponent};
