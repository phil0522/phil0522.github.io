import{a as re}from"./chunk-QZGAVVE5.js";import{a as ae}from"./chunk-UDKHSBCD.js";import{a as J,b as K,c as Q,f as X,h as Z,i as $,j as ee,k as te,l as ne,m as ie,q as oe}from"./chunk-M2TBMTNR.js";import{d as G}from"./chunk-RYIKU5Y3.js";import{R as j,U as R,W as U,X as Y,Z as H,d as N,j as q}from"./chunk-NR32JDWD.js";import"./chunk-UYHN5VVP.js";import{$a as D,Ab as S,Bb as O,Ea as s,Eb as u,Fb as f,Gb as x,Jb as z,N as E,Ob as L,Pa as W,S as m,T as p,Za as _,_a as C,bb as M,cb as P,da as y,db as v,eb as o,fb as i,gb as F,kb as b,mb as g,ob as c,wb as w,yb as l,zb as h}from"./chunk-AFX6RXNX.js";import{a as V,b as B}from"./chunk-Q7L6LLAK.js";function I(r){return`$${(r/100).toFixed(2)}`}var le=()=>[],T=(r,t)=>t.id,de=(r,t)=>t.minSessions;function ce(r,t){if(r&1&&(o(0,"option",17),l(1),i()),r&2){let e=t.$implicit;v("value",e.id),s(),h(e.name)}}function me(r,t){if(r&1){let e=b();o(0,"select",15),g("change",function(n){m(e);let d=c();return p(d.onSeasonFilterChange(n))}),o(1,"option",16),l(2,"All Seasons"),i(),M(3,ce,2,2,"option",17,T),i()}if(r&2){let e=c();v("value",e.selectedSeasonIdForFilter()),s(3),P(e.seasonService.seasons())}}function pe(r,t){r&1&&(o(0,"div",10),F(1,"div",18),o(2,"p"),l(3,"Loading catalog..."),i()())}function _e(r,t){if(r&1){let e=b();o(0,"div",11)(1,"div",19),l(2,"!"),i(),o(3,"p"),l(4),i(),o(5,"button",20),g("click",function(){m(e);let n=c();return p(n.loadCatalog())}),l(6,"Retry"),i()()}if(r&2){let e=c();s(4),h(e.seasonService.error())}}function Ce(r,t){if(r&1&&(o(0,"div",29),l(1),i()),r&2){let e=c().$implicit;s(),S(" ",e.description," ")}}function ge(r,t){if(r&1){let e=b();o(0,"div",23)(1,"div",24)(2,"div")(3,"h3"),l(4),i(),o(5,"p",25),l(6),i()(),o(7,"span",26),l(8),i()(),o(9,"div",27)(10,"div",28)(11,"span"),l(12,"Year:"),i(),o(13,"span"),l(14),i()(),o(15,"div",28)(16,"span"),l(17,"Classes:"),i(),o(18,"span"),l(19),i()(),_(20,Ce,2,1,"div",29),i(),o(21,"div",30)(22,"button",31),g("click",function(){let n=m(e).$implicit,d=c(2);return p(d.openEditSeasonDialog(n))}),l(23,"Edit"),i(),o(24,"button",31),g("click",function(){let n=m(e).$implicit,d=c(2);return p(d.openCouponDialog(n))}),l(25),i(),o(26,"button",32),g("click",function(){let n=m(e).$implicit,d=c(2);return p(d.toggleSeasonActive(n))}),l(27),i()()()}if(r&2){let e=t.$implicit,a=c(2);w("inactive",!e.isActive),s(4),h(e.name),s(2),S(" ",a.formatDateRange(e.startDate,e.endDate)," "),s(),w("active",e.isActive),s(),S(" ",e.isActive?"Active":"Inactive"," "),s(6),h(e.year),s(5),h(e.sessions.length),s(),C(e.description?20:-1),s(5),S(" Coupons (",e.coupons.length,") "),s(),w("btn-activate",!e.isActive),v("disabled",a.seasonService.actionLoading()),s(),S(" ",e.isActive?"Deactivate":"Activate"," ")}}function ue(r,t){if(r&1){let e=b();o(0,"div",22)(1,"p"),l(2),i(),o(3,"button",9),g("click",function(){m(e);let n=c(2);return p(n.openCreateDialog())}),l(4,"Create Season"),i()()}if(r&2){let e=c(2);s(2),S("No ",e.showActiveOnly()?"active":""," seasons found")}}function fe(r,t){if(r&1&&(o(0,"div",12),M(1,ge,28,15,"div",21,T),_(3,ue,5,1,"div",22),i()),r&2){let e=c();s(),P(e.displayedSeasons()),s(2),C(e.displayedSeasons().length===0?3:-1)}}function xe(r,t){if(r&1){let e=b();o(0,"tr")(1,"td"),l(2),i(),o(3,"td"),l(4),i(),o(5,"td"),l(6),i(),o(7,"td"),l(8),i(),o(9,"td")(10,"span"),l(11),i()(),o(12,"td"),l(13),i(),o(14,"td")(15,"span",26),l(16),i()(),o(17,"td")(18,"div",35)(19,"button",36),g("click",function(){let n=m(e).$implicit,d=c(2);return p(d.openEditClassDialog(n))}),l(20,"Edit"),i(),o(21,"button",37),g("click",function(){let n=m(e).$implicit,d=c(2);return p(d.toggleClassActive(n))}),l(22),i()()()()}if(r&2){let e=t.$implicit,a=c(2);w("inactive",!e.isActive),s(2),h(e.name),s(2),h(a.getSeasonName(e.seasonId)),s(2),h(a.formatDateRange(e.startDate,e.endDate)),s(2),h(e.capacity),s(2),w("text-warning",a.getEnrolledCount(e.id)>=e.capacity),s(),S(" ",a.getEnrolledCount(e.id)," "),s(2),h(a.formatCurrency(e.basePrice)),s(2),w("active",e.isActive),s(),S(" ",e.isActive?"Active":"Inactive"," "),s(5),w("btn-activate",!e.isActive),v("disabled",a.seasonService.actionLoading()),s(),S(" ",e.isActive?"Hide":"Show"," ")}}function he(r,t){if(r&1){let e=b();o(0,"div",22)(1,"p"),l(2),i(),o(3,"button",9),g("click",function(){m(e);let n=c(2);return p(n.openCreateDialog())}),l(4,"Create Class"),i()()}if(r&2){let e=c(2);s(2),S("No ",e.showActiveOnly()?"active":""," classes found")}}function Se(r,t){if(r&1&&(o(0,"div",13)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),l(5,"Name"),i(),o(6,"th"),l(7,"Season"),i(),o(8,"th"),l(9,"Dates"),i(),o(10,"th"),l(11,"Capacity"),i(),o(12,"th"),l(13,"Enrolled"),i(),o(14,"th"),l(15,"Price"),i(),o(16,"th"),l(17,"Status"),i(),o(18,"th"),l(19,"Actions"),i()()(),o(20,"tbody"),M(21,xe,23,17,"tr",34,T),i()(),_(23,he,5,1,"div",22),i()),r&2){let e=c();s(21),P(e.displayedClasses()),s(2),C(e.displayedClasses().length===0?23:-1)}}function be(r,t){r&1&&(o(0,"span",65),l(1,"Has content"),i())}function ve(r,t){if(r&1){let e=b();o(0,"div",66)(1,"textarea",70),x("ngModelChange",function(n){m(e);let d=c(3);return f(d.formSeason.description,n)||(d.formSeason.description=n),p(n)}),i()()}if(r&2){let e=c(3);s(),u("ngModel",e.formSeason.description)}}function ye(r,t){r&1&&(o(0,"span",65),l(1,"Configured"),i())}function Me(r,t){if(r&1&&(o(0,"span",78),l(1),i()),r&2){let e=t.$implicit;s(),O("",e.minSessions,"+: ","$"+(e.discountAmount/100).toFixed(2)," off")}}function Pe(r,t){if(r&1&&(o(0,"div",77),M(1,Me,2,2,"span",78,de),i()),r&2){let e=c();s(),P(e)}}function we(r,t){r&1&&_(0,Pe,3,0,"div",77),r&2&&C(t.length>0?0:-1)}function Ee(r,t){r&1&&(o(0,"div",76),l(1,"Invalid format"),i())}function Te(r,t){if(r&1&&_(0,we,1,1)(1,Ee,2,0,"div",76),r&2){let e,a=c(4);C((e=a.getParsedMultiSessionDiscounts())?0:1,e)}}function Ae(r,t){if(r&1){let e=b();o(0,"div",66)(1,"div",49)(2,"div",44)(3,"label",71),l(4,"Sibling Discount/Week ($)"),i(),o(5,"div",72)(6,"input",73),x("ngModelChange",function(n){m(e);let d=c(3);return f(d.formSeason.siblingDiscountPerWeek,n)||(d.formSeason.siblingDiscountPerWeek=n),p(n)}),i(),o(7,"span",55),l(8,"Per student when 2+ siblings"),i()()(),o(9,"div",44)(10,"label",74),l(11,"Multi-Session ($)"),i(),o(12,"div",72)(13,"input",75),x("ngModelChange",function(n){m(e);let d=c(3);return f(d.formSeason.multiSessionDiscountsText,n)||(d.formSeason.multiSessionDiscountsText=n),p(n)}),i(),o(14,"span",55),l(15,'sessions:discount (e.g., "2:10.00" = $10 off)'),i()()()(),_(16,Te,2,1),i()}if(r&2){let e=c(3);s(6),u("ngModel",e.formSeason.siblingDiscountPerWeek),s(7),u("ngModel",e.formSeason.multiSessionDiscountsText),s(3),C(e.formSeason.multiSessionDiscountsText?16:-1)}}function De(r,t){if(r&1&&(o(0,"span",65),l(1),i()),r&2){let e=c(3);s(),S("",e.formSeason.earlyBirdTiers.length," tier(s)")}}function Oe(r,t){if(r&1){let e=b();o(0,"div",80)(1,"input",82),x("ngModelChange",function(n){let d=m(e).$implicit;return f(d.deadline,n)||(d.deadline=n),p(n)}),i(),o(2,"input",83),x("ngModelChange",function(n){let d=m(e).$implicit;return f(d.price,n)||(d.price=n),p(n)}),i(),o(3,"span",84),l(4),i(),o(5,"button",85),g("click",function(){let n=m(e).$index,d=c(4);return p(d.removeSeasonEarlyBirdTier(n))}),l(6,"\xD7"),i()()}if(r&2){let e=t.$implicit;s(),u("ngModel",e.deadline),s(),u("ngModel",e.price),s(2),h("$"+e.price.toFixed(2))}}function Le(r,t){if(r&1){let e=b();o(0,"div",66)(1,"div",79),M(2,Oe,7,3,"div",80,D),o(4,"button",81),g("click",function(){m(e);let n=c(3);return p(n.addSeasonEarlyBirdTier())}),l(5," + Add Tier "),i(),o(6,"span",55),l(7),i()()()}if(r&2){let e=c(3);s(2),P(e.formSeason.earlyBirdTiers),s(5),S("Classes inherit these tiers. Base: ","$"+e.formSeason.basePrice.toFixed(2))}}function ke(r,t){if(r&1){let e=b();o(0,"div",39)(1,"div",40)(2,"div",41)(3,"label",42),l(4,"Season Name *"),i(),o(5,"input",43),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.name,n)||(d.formSeason.name=n),p(n)}),i()(),o(6,"div",44)(7,"label",45),l(8,"Year *"),i(),o(9,"input",46),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.year,n)||(d.formSeason.year=n),p(n)}),i()(),o(10,"div",47)(11,"label")(12,"input",48),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.isActive,n)||(d.formSeason.isActive=n),p(n)}),i(),l(13," Active "),i()()(),o(14,"div",49)(15,"div",44)(16,"label",50),l(17,"Start Date *"),i(),o(18,"input",51),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.startDate,n)||(d.formSeason.startDate=n),p(n)}),i()(),o(19,"div",44)(20,"label",52),l(21,"End Date *"),i(),o(22,"input",53),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.endDate,n)||(d.formSeason.endDate=n),p(n)}),i()()(),o(23,"div",54)(24,"h4"),l(25,"Pricing ($) *"),i(),o(26,"span",55),l(27,"Classes inherit these prices unless overridden"),i()(),o(28,"div",40)(29,"div",44)(30,"label",56),l(31,"Base ($)"),i(),o(32,"input",57),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.basePrice,n)||(d.formSeason.basePrice=n),p(n)}),i()(),o(33,"div",44)(34,"label",58),l(35,"Lunch ($)"),i(),o(36,"input",59),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.lunchPrice,n)||(d.formSeason.lunchPrice=n),p(n)}),i()(),o(37,"div",44)(38,"label",60),l(39,"Extended Care ($)"),i(),o(40,"input",61),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formSeason.extendedCarePrice,n)||(d.formSeason.extendedCarePrice=n),p(n)}),i()()(),o(41,"div",62)(42,"button",63),g("click",function(){m(e);let n=c(2);return p(n.toggleSection("description"))}),o(43,"span",64),l(44),i(),l(45," Description "),_(46,be,2,0,"span",65),i(),_(47,ve,2,1,"div",66),i(),o(48,"div",62)(49,"button",63),g("click",function(){m(e);let n=c(2);return p(n.toggleSection("discounts"))}),o(50,"span",64),l(51),i(),l(52," Discounts "),_(53,ye,2,0,"span",65),i(),_(54,Ae,17,3,"div",66),i(),o(55,"div",62)(56,"button",63),g("click",function(){m(e);let n=c(2);return p(n.toggleSection("earlybird"))}),o(57,"span",64),l(58),i(),l(59," Early Bird Pricing "),_(60,De,2,1,"span",65),i(),_(61,Le,8,1,"div",66),i(),o(62,"div",67)(63,"button",68),g("click",function(){m(e);let n=c(2);return p(n.closeDialog())}),l(64,"Cancel"),i(),o(65,"button",69),g("click",function(){m(e);let n=c(2);return p(n.saveSeason())}),l(66),i()()()}if(r&2){let e=c(2);s(5),u("ngModel",e.formSeason.name),s(4),u("ngModel",e.formSeason.year),v("disabled",e.dialogMode()==="edit-season"),s(3),u("ngModel",e.formSeason.isActive),s(6),u("ngModel",e.formSeason.startDate),s(4),u("ngModel",e.formSeason.endDate),s(10),u("ngModel",e.formSeason.basePrice),s(4),u("ngModel",e.formSeason.lunchPrice),s(4),u("ngModel",e.formSeason.extendedCarePrice),s(4),h(e.expandedSections().has("description")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.description?46:-1),s(),C(e.expandedSections().has("description")?47:-1),s(4),h(e.expandedSections().has("discounts")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.siblingDiscountPerWeek||e.formSeason.multiSessionDiscountsText?53:-1),s(),C(e.expandedSections().has("discounts")?54:-1),s(4),h(e.expandedSections().has("earlybird")?"\u25BC":"\u25B6"),s(2),C(e.formSeason.earlyBirdTiers.length>0?60:-1),s(),C(e.expandedSections().has("earlybird")?61:-1),s(4),v("disabled",!e.isSeasonFormValid()),s(),S(" ",e.dialogMode()==="create-season"?"Create":"Save"," ")}}function Ve(r,t){if(r&1&&(o(0,"option",17),l(1),i()),r&2){let e=t.$implicit;v("value",e.id),s(),h(e.name)}}function Be(r,t){if(r&1){let e=b();o(0,"div",44)(1,"label",105),l(2,"Season *"),i(),o(3,"select",106),x("ngModelChange",function(n){m(e);let d=c(3);return f(d.formClass.seasonId,n)||(d.formClass.seasonId=n),p(n)}),o(4,"option",16),l(5,"Select season..."),i(),M(6,Ve,2,2,"option",17,T),i()()}if(r&2){let e=c(3);s(3),u("ngModel",e.formClass.seasonId),s(3),P(e.seasonService.seasons())}}function Ie(r,t){if(r&1&&(o(0,"span",99),l(1),i()),r&2){let e=c(3);s(),S("Using season default: ",e.getSeasonPricingDisplay("basePrice"))}}function We(r,t){if(r&1&&(o(0,"span",99),l(1),i()),r&2){let e=c(3);s(),S("Using season default: ",e.getSeasonPricingDisplay("lunchPrice"))}}function Fe(r,t){if(r&1&&(o(0,"span",99),l(1),i()),r&2){let e=c(3);s(),S("Using season default: ",e.getSeasonPricingDisplay("extendedCarePrice"))}}function ze(r,t){if(r&1&&(o(0,"span",78),l(1),i()),r&2){let e=t.$implicit,a=c(4);s(),O("Before ",e.deadline,": ",a.formatCurrency(e.price))}}function Ne(r,t){r&1&&(o(0,"span",55),l(1,"No early bird tiers defined at season level"),i())}function qe(r,t){if(r&1){let e=b();o(0,"div",104)(1,"span",99),l(2,"Using season default tiers:"),i(),M(3,ze,2,2,"span",78,D),_(5,Ne,2,0,"span",55),o(6,"button",81),g("click",function(){m(e);let n=c(3);return p(n.initializeClassEarlyBirdTiers())}),l(7," + Override with custom tiers "),i()()}if(r&2){let e=c(3);s(3),P(e.getSeasonEarlyBirdTiers()),s(2),C(e.getSeasonEarlyBirdTiers().length===0?5:-1)}}function je(r,t){if(r&1){let e=b();o(0,"div",80)(1,"input",82),x("ngModelChange",function(n){let d=m(e).$implicit;return f(d.deadline,n)||(d.deadline=n),p(n)}),i(),o(2,"input",83),x("ngModelChange",function(n){let d=m(e).$implicit;return f(d.price,n)||(d.price=n),p(n)}),i(),o(3,"span",84),l(4),i(),o(5,"button",85),g("click",function(){let n=m(e).$index,d=c(4);return p(d.removeEarlyBirdTier(n))}),l(6,"\xD7"),i()()}if(r&2){let e=t.$implicit;s(),u("ngModel",e.deadline),s(),u("ngModel",e.price),s(2),h("$"+e.price.toFixed(2))}}function Re(r,t){if(r&1){let e=b();o(0,"button",108),g("click",function(){m(e);let n=c(4);return p(n.clearClassEarlyBirdTiers())}),l(1," Use season defaults instead "),i()}}function Ue(r,t){if(r&1){let e=b();M(0,je,7,3,"div",80,D),o(2,"button",81),g("click",function(){m(e);let n=c(3);return p(n.addEarlyBirdTier())}),l(3," + Add Early Bird Tier "),i(),_(4,Re,2,0,"button",107),o(5,"span",55),l(6),i()}if(r&2){let e=c(3);P(e.formClass.earlyBirdTiers??z(2,le)),s(4),C(e.formClass.earlyBirdTiers!==null?4:-1),s(2),S("Orders placed before deadline get discounted price. Base: ",e.getEffectiveBasePrice())}}function Ye(r,t){if(r&1){let e=b();o(0,"div",39)(1,"div",49)(2,"div",41)(3,"label",86),l(4,"Class Name *"),i(),o(5,"input",87),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.name,n)||(d.formClass.name=n),p(n)}),i()(),_(6,Be,8,1,"div",44),o(7,"div",47)(8,"label")(9,"input",48),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.isActive,n)||(d.formClass.isActive=n),p(n)}),i(),l(10," Active "),i()()(),o(11,"div",49)(12,"div",44)(13,"label",88),l(14,"Start Date *"),i(),o(15,"input",89),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.startDate,n)||(d.formClass.startDate=n),p(n)}),i()(),o(16,"div",44)(17,"label",90),l(18,"End Date *"),i(),o(19,"input",91),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.endDate,n)||(d.formClass.endDate=n),p(n)}),i()()(),o(20,"div",49)(21,"div",41)(22,"label",92),l(23,"Location"),i(),o(24,"input",93),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.location,n)||(d.formClass.location=n),p(n)}),i()()(),o(25,"div",44)(26,"label",94),l(27,"Capacity *"),i(),o(28,"input",95),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.capacity,n)||(d.formClass.capacity=n),p(n)}),i()(),o(29,"div",96)(30,"h4"),l(31,"Pricing (Optional - inherits from Season)"),i(),o(32,"span",55),l(33,"Leave empty to use Season default prices"),i()(),o(34,"div",49)(35,"div",44)(36,"label",97),l(37,"Base Price ($)"),i(),o(38,"div",72)(39,"input",98),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.basePrice,n)||(d.formClass.basePrice=n),p(n)}),i(),_(40,Ie,2,1,"span",99),i()(),o(41,"div",44)(42,"label",100),l(43,"Lunch Price ($)"),i(),o(44,"div",72)(45,"input",101),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.lunchPrice,n)||(d.formClass.lunchPrice=n),p(n)}),i(),_(46,We,2,1,"span",99),i()()(),o(47,"div",44)(48,"label",102),l(49,"Extended Care Price ($)"),i(),o(50,"div",72)(51,"input",103),x("ngModelChange",function(n){m(e);let d=c(2);return f(d.formClass.extendedCarePrice,n)||(d.formClass.extendedCarePrice=n),p(n)}),i(),_(52,Fe,2,1,"span",99),i()(),o(53,"div",44)(54,"label"),l(55,"Early Bird Pricing Tiers ($)"),i(),o(56,"div",79),_(57,qe,8,1,"div",104)(58,Ue,7,3),i()(),o(59,"div",67)(60,"button",68),g("click",function(){m(e);let n=c(2);return p(n.closeDialog())}),l(61,"Cancel"),i(),o(62,"button",69),g("click",function(){m(e);let n=c(2);return p(n.saveClass())}),l(63),i()()()}if(r&2){let e=c(2);s(5),u("ngModel",e.formClass.name),s(),C(e.dialogMode()==="create-class"?6:-1),s(3),u("ngModel",e.formClass.isActive),s(6),u("ngModel",e.formClass.startDate),s(4),u("ngModel",e.formClass.endDate),s(5),u("ngModel",e.formClass.location),s(4),u("ngModel",e.formClass.capacity),s(11),u("ngModel",e.formClass.basePrice),v("placeholder","Inherited: "+e.getSeasonPricingDisplay("basePrice")),s(),C(e.formClass.basePrice===null&&e.formClass.seasonId?40:-1),s(5),u("ngModel",e.formClass.lunchPrice),v("placeholder","Inherited: "+e.getSeasonPricingDisplay("lunchPrice")),s(),C(e.formClass.lunchPrice===null&&e.formClass.seasonId?46:-1),s(5),u("ngModel",e.formClass.extendedCarePrice),v("placeholder","Inherited: "+e.getSeasonPricingDisplay("extendedCarePrice")),s(),C(e.formClass.extendedCarePrice===null&&e.formClass.seasonId?52:-1),s(5),C(e.formClass.earlyBirdTiers===null&&e.formClass.seasonId?57:58),s(5),v("disabled",!e.isClassFormValid()),s(),S(" ",e.dialogMode()==="create-class"?"Create":"Save"," ")}}function He(r,t){if(r&1){let e=b();o(0,"div",115)(1,"div",116)(2,"span",117),l(3),i(),o(4,"span",118),l(5),i(),o(6,"span",119),l(7),i()(),o(8,"button",120),g("click",function(){let n=m(e).$implicit,d=c(4);return p(d.removeCouponFromSeason(n.id))}),l(9," Remove "),i()()}if(r&2){let e=t.$implicit,a=c(4);s(3),h(e.name),s(2),h(e.id),s(2),h(a.formatCurrency(e.maxCreditCents)),s(),v("disabled",a.couponActionLoading())}}function Ge(r,t){if(r&1&&(o(0,"div",110),M(1,He,10,4,"div",115,T),i()),r&2){let e=c(3);s(),P(e.selectedSeasonForCoupons().coupons)}}function Je(r,t){r&1&&(o(0,"div",111),l(1,"No coupons assigned to this season"),i())}function Ke(r,t){if(r&1&&(o(0,"option",17),l(1),i()),r&2){let e=t.$implicit,a=c(4);v("value",e.id),s(),O("",e.name," (",a.formatCurrency(e.maxCreditCents),")")}}function Qe(r,t){if(r&1){let e=b();o(0,"div",113)(1,"select",121),x("ngModelChange",function(n){m(e);let d=c(3);return f(d.selectedCouponToAdd,n)||(d.selectedCouponToAdd=n),p(n)}),o(2,"option",16),l(3,"Select a coupon..."),i(),M(4,Ke,2,3,"option",17,T),i(),o(6,"button",122),g("click",function(){m(e);let n=c(3);return p(n.addCouponToSeason())}),l(7," Add "),i()()}if(r&2){let e=c(3);s(),u("ngModel",e.selectedCouponToAdd),s(3),P(e.availableCouponsForSeason()),s(2),v("disabled",!e.selectedCouponToAdd||e.couponActionLoading())}}function Xe(r,t){r&1&&(o(0,"p",55),l(1,"No coupons exist. Create coupons in Coupon Management first."),i())}function Ze(r,t){r&1&&(o(0,"p",55),l(1,"All coupons are already assigned to this season."),i())}function $e(r,t){if(r&1&&(o(0,"div",114),l(1),i()),r&2){let e=c(3);s(),h(e.couponActionError())}}function et(r,t){if(r&1){let e=b();o(0,"div",39)(1,"div",109)(2,"h4"),l(3,"Season Coupons"),i(),o(4,"p",55),l(5,"Coupons added here will automatically apply to all orders for this season."),i(),_(6,Ge,3,0,"div",110),_(7,Je,2,0,"div",111),o(8,"div",112)(9,"h5"),l(10,"Add Coupon"),i(),_(11,Qe,8,2,"div",113),_(12,Xe,2,0,"p",55),_(13,Ze,2,0,"p",55),i(),_(14,$e,2,1,"div",114),i(),o(15,"div",67)(16,"button",68),g("click",function(){m(e);let n=c(2);return p(n.closeDialog())}),l(17,"Done"),i()()()}if(r&2){let e=c(2);s(6),C(e.selectedSeasonForCoupons().coupons&&e.selectedSeasonForCoupons().coupons.length>0?6:-1),s(),C(!e.selectedSeasonForCoupons().coupons||e.selectedSeasonForCoupons().coupons.length===0?7:-1),s(4),C(e.availableCouponsForSeason().length>0?11:-1),s(),C(e.availableCouponsForSeason().length===0&&e.allCoupons().length===0?12:-1),s(),C(e.availableCouponsForSeason().length===0&&e.allCoupons().length>0?13:-1),s(),C(e.couponActionError()?14:-1)}}function tt(r,t){if(r&1&&(o(0,"div",14)(1,"div",38)(2,"h3"),l(3),i(),_(4,ke,67,20,"div",39),_(5,Ye,64,19,"div",39),_(6,et,18,6,"div",39),i()()),r&2){let e=c();s(3),h(e.getDialogTitle()),s(),C(e.dialogMode()==="create-season"||e.dialogMode()==="edit-season"?4:-1),s(),C(e.dialogMode()==="create-class"||e.dialogMode()==="edit-class"?5:-1),s(),C(e.dialogMode()==="manage-coupons"&&e.selectedSeasonForCoupons()?6:-1)}}var se=class r{seasonService=E(Y);configService=E(U);userService=E(H);router=E(q);datastore=E(j);functions=E(R);notificationService=E(ae);_enrollmentMap=y(new Map);selectedSeasonForCoupons=y(null);allCoupons=y([]);couponActionLoading=y(!1);couponActionError=y(null);selectedCouponToAdd="";availableCouponsForSeason=L(()=>{let t=this.selectedSeasonForCoupons();if(!t)return[];let e=new Set((t.coupons||[]).map(a=>a.id));return this.allCoupons().filter(a=>!e.has(a.id))});formatCurrency=I;formatDateRange=G;centsToDollars(t){return t/100}dollarsToCents(t){return Math.round(t*100)}viewMode=y("seasons");showActiveOnly=y(!0);selectedSeasonIdForFilter=y("");dialogMode=y(null);expandedSections=y(new Set);formSeason={name:"",year:0,startDate:"",endDate:"",isActive:!0,description:"",siblingDiscountPerWeek:5,multiSessionDiscountsText:"",basePrice:500,lunchPrice:50,extendedCarePrice:100,earlyBirdTiers:[]};formClass={seasonId:"",name:"",startDate:"",endDate:"",location:"",capacity:20,basePrice:null,lunchPrice:null,extendedCarePrice:null,isActive:!0,earlyBirdTiers:null};displayedSeasons=L(()=>{let t=this.seasonService.seasons();return this.showActiveOnly()?t.filter(e=>e.isActive):t});displayedClasses=L(()=>{let t=this.seasonService.classes();this.showActiveOnly()&&(t=t.filter(a=>a.isActive));let e=this.selectedSeasonIdForFilter();return e&&(t=t.filter(a=>a.seasonId===e)),t});async ngOnInit(){if(!this.userService.isAuthenticated()){this.router.navigate(["/login"]);return}if(!this.userService.isAdmin()){this.router.navigate(["/"]);return}await this.loadCatalog()}async loadCatalog(){try{await Promise.all([this.seasonService.loadAllSeasons(),this.seasonService.loadAllClasses()]),await this.loadEnrollmentData()}catch(t){console.error("Failed to load catalog:",t)}}async loadEnrollmentData(){let t=this.seasonService.seasons(),e=new Map;for(let a of t)try{let n=await this.datastore.getRegistration(a.id);if(n?.classes)for(let[d,A]of Object.entries(n.classes))e.set(d,A.enrolledStudents?.length??0)}catch{}this._enrollmentMap.set(e)}getEnrolledCount(t){return this._enrollmentMap().get(t)??0}openCreateDialog(){this.viewMode()==="seasons"?(this.formSeason={name:"",year:this.configService.activeYear(),startDate:"",endDate:"",isActive:!0,description:"",siblingDiscountPerWeek:5,multiSessionDiscountsText:"",basePrice:500,lunchPrice:50,extendedCarePrice:100,earlyBirdTiers:[]},this.dialogMode.set("create-season")):(this.formClass={seasonId:"",name:"",startDate:"",endDate:"",location:"",capacity:20,basePrice:null,lunchPrice:null,extendedCarePrice:null,isActive:!0,earlyBirdTiers:null},this.dialogMode.set("create-class"))}openEditSeasonDialog(t){this.formSeason={id:t.id,name:t.name,year:t.year,startDate:t.startDate,endDate:t.endDate,isActive:t.isActive,description:t.description??"",siblingDiscountPerWeek:this.centsToDollars(t.siblingDiscountPerWeek??500),multiSessionDiscountsText:this.encodeMultiSessionDiscounts(t.multiSessionDiscounts??[]),basePrice:this.centsToDollars(t.basePrice),lunchPrice:this.centsToDollars(t.lunchPrice),extendedCarePrice:this.centsToDollars(t.extendedCarePrice),earlyBirdTiers:t.earlyBirdTiers?t.earlyBirdTiers.map(a=>({deadline:a.deadline,price:this.centsToDollars(a.price)})):[]};let e=new Set;t.description&&e.add("description"),(t.siblingDiscountPerWeek||(t.multiSessionDiscounts?.length??0)>0)&&e.add("discounts"),(t.earlyBirdTiers?.length??0)>0&&e.add("earlybird"),this.expandedSections.set(e),this.dialogMode.set("edit-season")}openEditClassDialog(t){this.formClass={id:t.id,seasonId:t.seasonId,name:t.name,startDate:t.startDate,endDate:t.endDate,location:t.location??"",capacity:t.capacity,basePrice:t.basePrice!=null?this.centsToDollars(t.basePrice):null,lunchPrice:t.lunchPrice!=null?this.centsToDollars(t.lunchPrice):null,extendedCarePrice:t.extendedCarePrice!=null?this.centsToDollars(t.extendedCarePrice):null,isActive:t.isActive,earlyBirdTiers:t.earlyBirdTiers?t.earlyBirdTiers.map(e=>({deadline:e.deadline,price:this.centsToDollars(e.price)})):null},this.dialogMode.set("edit-class")}closeDialog(){this.dialogMode.set(null),this.expandedSections.set(new Set)}toggleSection(t){let e=new Set(this.expandedSections());e.has(t)?e.delete(t):e.add(t),this.expandedSections.set(e)}getDialogTitle(){switch(this.dialogMode()){case"create-season":return"Create Season";case"edit-season":return"Edit Season";case"create-class":return"Create Class";case"edit-class":return"Edit Class";default:return""}}isSeasonFormValid(){return!!(this.formSeason.name&&this.formSeason.year&&this.formSeason.startDate&&this.formSeason.endDate&&this.formSeason.basePrice>0&&this.formSeason.lunchPrice>=0&&this.formSeason.extendedCarePrice>=0)}isClassFormValid(){return!!(this.formClass.name&&this.formClass.seasonId&&this.formClass.startDate&&this.formClass.endDate&&this.formClass.capacity>0)}async saveSeason(){if(!this.isSeasonFormValid())return;let t=this.parseMultiSessionDiscounts(this.formSeason.multiSessionDiscountsText);if(t===null){this.notificationService.warning("Invalid multi-session discount format. Use format: 2:10.00, 3:20.00");return}let e=[...this.formSeason.earlyBirdTiers].sort((a,n)=>a.deadline.localeCompare(n.deadline)).map(a=>({deadline:a.deadline,price:this.dollarsToCents(a.price)}));try{if(this.dialogMode()==="create-season"){let a={year:this.formSeason.year,name:this.formSeason.name,startDate:this.formSeason.startDate,endDate:this.formSeason.endDate,isActive:this.formSeason.isActive,description:this.formSeason.description??null,siblingDiscountPerWeek:this.dollarsToCents(this.formSeason.siblingDiscountPerWeek),multiSessionDiscounts:t,deprecatedRefundProcessingFee:2e3,basePrice:this.dollarsToCents(this.formSeason.basePrice),lunchPrice:this.dollarsToCents(this.formSeason.lunchPrice),extendedCarePrice:this.dollarsToCents(this.formSeason.extendedCarePrice),earlyBirdTiers:e,coupons:[],sessions:[]};await this.seasonService.createSeason(a)}else this.dialogMode()==="edit-season"&&this.formSeason.id&&await this.seasonService.updateSeason(this.formSeason.id,{name:this.formSeason.name,startDate:this.formSeason.startDate,endDate:this.formSeason.endDate,isActive:this.formSeason.isActive,description:this.formSeason.description,siblingDiscountPerWeek:this.dollarsToCents(this.formSeason.siblingDiscountPerWeek),multiSessionDiscounts:t,basePrice:this.dollarsToCents(this.formSeason.basePrice),lunchPrice:this.dollarsToCents(this.formSeason.lunchPrice),extendedCarePrice:this.dollarsToCents(this.formSeason.extendedCarePrice),earlyBirdTiers:e});this.closeDialog()}catch(a){this.notificationService.error("Failed to save season: "+a.message)}}async saveClass(){if(!this.isClassFormValid())return;let t=this.formClass.earlyBirdTiers?[...this.formClass.earlyBirdTiers].sort((e,a)=>e.deadline.localeCompare(a.deadline)).map(e=>({deadline:e.deadline,price:this.dollarsToCents(e.price)})):null;try{if(this.dialogMode()==="create-class"){let e={seasonId:this.formClass.seasonId,name:this.formClass.name,startDate:this.formClass.startDate,endDate:this.formClass.endDate,location:this.formClass.location.trim()?this.formClass.location.trim():null,capacity:this.formClass.capacity,basePrice:this.formClass.basePrice!=null?this.dollarsToCents(this.formClass.basePrice):null,lunchPrice:this.formClass.lunchPrice!=null?this.dollarsToCents(this.formClass.lunchPrice):null,extendedCarePrice:this.formClass.extendedCarePrice!=null?this.dollarsToCents(this.formClass.extendedCarePrice):null,isActive:this.formClass.isActive,earlyBirdTiers:t};await this.seasonService.createClass(e)}else this.dialogMode()==="edit-class"&&this.formClass.id&&await this.seasonService.updateClass(this.formClass.id,{name:this.formClass.name,startDate:this.formClass.startDate,endDate:this.formClass.endDate,location:this.formClass.location.trim()?this.formClass.location.trim():null,capacity:this.formClass.capacity,basePrice:this.formClass.basePrice!=null?this.dollarsToCents(this.formClass.basePrice):void 0,lunchPrice:this.formClass.lunchPrice!=null?this.dollarsToCents(this.formClass.lunchPrice):void 0,extendedCarePrice:this.formClass.extendedCarePrice!=null?this.dollarsToCents(this.formClass.extendedCarePrice):void 0,isActive:this.formClass.isActive,earlyBirdTiers:t});this.closeDialog()}catch(e){this.notificationService.error("Failed to save class: "+e.message)}}async toggleSeasonActive(t){try{await this.seasonService.toggleSeasonActive(t.id)}catch(e){this.notificationService.error("Failed to toggle season status: "+e.message)}}async toggleClassActive(t){try{await this.seasonService.toggleClassActive(t.id)}catch(e){this.notificationService.error("Failed to toggle class status: "+e.message)}}addEarlyBirdTier(){this.formClass.earlyBirdTiers===null&&(this.formClass.earlyBirdTiers=[]);let t=new Date;t.setDate(t.getDate()+14);let e=t.toISOString().split("T")[0],a=this.formClass.basePrice??this.getSeasonBasePriceDollars(),n=Math.max(0,a-50);this.formClass.earlyBirdTiers.push({deadline:e,price:n})}removeEarlyBirdTier(t){this.formClass.earlyBirdTiers&&this.formClass.earlyBirdTiers.splice(t,1)}getSeasonBasePriceDollars(){if(!this.formClass.seasonId)return 500;let t=this.seasonService.seasons().find(e=>e.id===this.formClass.seasonId);return this.centsToDollars(t?.basePrice??5e4)}encodeMultiSessionDiscounts(t){return!t||t.length===0?"":t.sort((e,a)=>e.minSessions-a.minSessions).map(e=>`${e.minSessions}:${(e.discountAmount/100).toFixed(2)}`).join(", ")}parseMultiSessionDiscounts(t){if(!t.trim())return[];let e=[],a=t.split(",").map(n=>n.trim()).filter(n=>n);for(let n of a){let d=n.match(/^(\d+):(\d+(?:\.\d{1,2})?)$/);if(!d)return null;let A=parseInt(d[1],10),k=parseFloat(d[2]);if(A<1||isNaN(k)||k<0)return null;e.push({minSessions:A,discountAmount:Math.round(k*100)})}return e.sort((n,d)=>n.minSessions-d.minSessions)}getParsedMultiSessionDiscounts(){return this.parseMultiSessionDiscounts(this.formSeason.multiSessionDiscountsText)}getSeasonName(t){return this.seasonService.seasons().find(a=>a.id===t)?.name??t}onActiveOnlyChange(t){let e=t.target;this.showActiveOnly.set(e.checked)}onSeasonFilterChange(t){let e=t.target;this.selectedSeasonIdForFilter.set(e.value)}getSeasonPricingDisplay(t){if(!this.formClass.seasonId)return"Select a season";let e=this.seasonService.seasons().find(a=>a.id===this.formClass.seasonId);return e?I(e[t]??0):"Season not found"}getSeasonEarlyBirdTiers(){return this.formClass.seasonId?this.seasonService.seasons().find(e=>e.id===this.formClass.seasonId)?.earlyBirdTiers??[]:[]}getEffectiveBasePrice(){return this.formClass.basePrice!==null?`$${this.formClass.basePrice.toFixed(2)}`:this.getSeasonPricingDisplay("basePrice")}initializeClassEarlyBirdTiers(){this.formClass.earlyBirdTiers=[]}clearClassEarlyBirdTiers(){this.formClass.earlyBirdTiers=null}addSeasonEarlyBirdTier(){let t=new Date;t.setDate(t.getDate()+14);let e=t.toISOString().split("T")[0],a=Math.max(0,this.formSeason.basePrice-50);this.formSeason.earlyBirdTiers.push({deadline:e,price:a})}removeSeasonEarlyBirdTier(t){this.formSeason.earlyBirdTiers.splice(t,1)}async openCouponDialog(t){this.selectedSeasonForCoupons.set(t),this.couponActionError.set(null),this.selectedCouponToAdd="",this.dialogMode.set("manage-coupons");try{let e=await this.functions.callApi("listCoupons",{});this.allCoupons.set(e.coupons)}catch(e){console.error("Failed to load coupons:",e),this.allCoupons.set([])}}async addCouponToSeason(){let t=this.selectedSeasonForCoupons();if(!t||!this.selectedCouponToAdd)return;let e=this.allCoupons().find(a=>a.id===this.selectedCouponToAdd);if(e){this.couponActionLoading.set(!0),this.couponActionError.set(null);try{await this.functions.callApi("addCouponToSeason",{seasonId:t.id,coupon:e});let a=[...t.coupons||[],e];this.selectedSeasonForCoupons.set(B(V({},t),{coupons:a})),this.selectedCouponToAdd="",await this.seasonService.loadAllSeasons()}catch(a){console.error("Failed to add coupon to season:",a),this.couponActionError.set(a instanceof Error?a.message:"Failed to add coupon")}finally{this.couponActionLoading.set(!1)}}}async removeCouponFromSeason(t){let e=this.selectedSeasonForCoupons();if(e){this.couponActionLoading.set(!0),this.couponActionError.set(null);try{await this.functions.callApi("removeCouponFromSeason",{seasonId:e.id,couponId:t});let a=(e.coupons||[]).filter(n=>n.id!==t);this.selectedSeasonForCoupons.set(B(V({},e),{coupons:a})),await this.seasonService.loadAllSeasons()}catch(a){console.error("Failed to remove coupon from season:",a),this.couponActionError.set(a instanceof Error?a.message:"Failed to remove coupon")}finally{this.couponActionLoading.set(!1)}}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=W({type:r,selectors:[["app-admin-catalog-list"]],decls:21,vars:14,consts:[["pageTitle","Catalog Management","pageSubtitle","Manage seasons and classes"],[1,"admin-catalog"],[1,"tab-bar"],[1,"tab",3,"click"],[1,"filter-bar"],[1,"filter-controls"],[1,"toggle-filter"],["type","checkbox",3,"change","checked"],[1,"season-filter",3,"value"],[1,"btn-create",3,"click"],[1,"loading-container"],[1,"error-container"],[1,"seasons-grid"],[1,"classes-table-container"],[1,"dialog-overlay"],[1,"season-filter",3,"change","value"],["value",""],[3,"value"],[1,"spinner"],[1,"error-icon"],[1,"btn-retry",3,"click"],[1,"season-card",3,"inactive"],[1,"empty-state"],[1,"season-card"],[1,"card-header"],[1,"season-dates"],[1,"status-badge"],[1,"card-content"],[1,"info-row"],[1,"season-description"],[1,"card-actions"],[1,"btn-action",3,"click"],[1,"btn-action",3,"click","disabled"],[1,"classes-table"],[3,"inactive"],[1,"action-buttons"],[1,"btn-sm",3,"click"],[1,"btn-sm",3,"click","disabled"],[1,"dialog"],[1,"dialog-form"],[1,"form-row","form-row-3"],[1,"form-group","form-group-wide"],["for","seasonName"],["type","text","id","seasonName","required","",3,"ngModelChange","ngModel"],[1,"form-group"],["for","seasonYear"],["type","number","id","seasonYear","required","",3,"ngModelChange","ngModel","disabled"],[1,"form-group","form-group-checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"form-row"],["for","seasonStartDate"],["type","date","id","seasonStartDate","required","",3,"ngModelChange","ngModel"],["for","seasonEndDate"],["type","date","id","seasonEndDate","required","",3,"ngModelChange","ngModel"],[1,"form-section-header"],[1,"hint"],["for","seasonBasePrice"],["type","number","id","seasonBasePrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],["for","seasonLunchPrice"],["type","number","id","seasonLunchPrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],["for","seasonExtendedCarePrice"],["type","number","id","seasonExtendedCarePrice","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],[1,"collapsible-section"],["type","button",1,"section-toggle",3,"click"],[1,"toggle-icon"],[1,"section-badge"],[1,"section-content"],[1,"dialog-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],["id","seasonDescription","rows","3","placeholder","Optional description (supports Markdown)",3,"ngModelChange","ngModel"],["for","siblingDiscount"],[1,"input-with-hint"],["type","number","id","siblingDiscount","step","0.01","min","0",3,"ngModelChange","ngModel"],["for","multiSessionDiscounts"],["type","text","id","multiSessionDiscounts","placeholder","2:10.00, 3:20.00",3,"ngModelChange","ngModel"],[1,"discount-preview","error"],[1,"discount-preview"],[1,"discount-tier"],[1,"early-bird-tiers"],[1,"tier-row"],["type","button",1,"btn-add-tier",3,"click"],["type","date","placeholder","Deadline",3,"ngModelChange","ngModel"],["type","number","step","0.01","min","0","placeholder","Price ($)",3,"ngModelChange","ngModel"],[1,"tier-price-hint"],["type","button",1,"btn-remove",3,"click"],["for","className"],["type","text","id","className","required","",3,"ngModelChange","ngModel"],["for","classStartDate"],["type","date","id","classStartDate","required","",3,"ngModelChange","ngModel"],["for","classEndDate"],["type","date","id","classEndDate","required","",3,"ngModelChange","ngModel"],["for","classLocation"],["type","text","id","classLocation",3,"ngModelChange","ngModel"],["for","classCapacity"],["type","number","id","classCapacity","min","1","required","",3,"ngModelChange","ngModel"],[1,"form-section"],["for","classBasePrice"],["type","number","id","classBasePrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],[1,"hint","inherited"],["for","classLunchPrice"],["type","number","id","classLunchPrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],["for","classExtendedCarePrice"],["type","number","id","classExtendedCarePrice","step","0.01","min","0",3,"ngModelChange","ngModel","placeholder"],[1,"inherited-preview"],["for","classSeason"],["id","classSeason","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn-inherit"],["type","button",1,"btn-inherit",3,"click"],[1,"coupon-section"],[1,"coupon-list"],[1,"no-coupons"],[1,"add-coupon-section"],[1,"coupon-select-row"],[1,"error-message"],[1,"coupon-item"],[1,"coupon-info"],[1,"coupon-name"],[1,"coupon-id"],[1,"coupon-credit"],[1,"btn-remove-coupon",3,"click","disabled"],[1,"coupon-select",3,"ngModelChange","ngModel"],[1,"btn-add-coupon",3,"click","disabled"]],template:function(e,a){e&1&&(o(0,"app-admin-layout",0)(1,"div",1)(2,"div",2)(3,"button",3),g("click",function(){return a.viewMode.set("seasons")}),l(4),i(),o(5,"button",3),g("click",function(){return a.viewMode.set("classes")}),l(6),i()(),o(7,"div",4)(8,"div",5)(9,"label",6)(10,"input",7),g("change",function(d){return a.onActiveOnlyChange(d)}),i(),o(11,"span"),l(12,"Active Only"),i()(),_(13,me,5,1,"select",8),i(),o(14,"button",9),g("click",function(){return a.openCreateDialog()}),l(15),i()(),_(16,pe,4,0,"div",10),_(17,_e,7,1,"div",11),_(18,fe,4,1,"div",12),_(19,Se,24,1,"div",13),_(20,tt,7,4,"div",14),i()()),e&2&&(s(3),w("active",a.viewMode()==="seasons"),s(),S(" Seasons (",a.seasonService.seasons().length,") "),s(),w("active",a.viewMode()==="classes"),s(),S(" Classes (",a.seasonService.classes().length,") "),s(4),v("checked",a.showActiveOnly()),s(3),C(a.viewMode()==="classes"?13:-1),s(2),S(" + Create ",a.viewMode()==="seasons"?"Season":"Class"," "),s(),C(a.seasonService.loading()?16:-1),s(),C(a.seasonService.error()?17:-1),s(),C(a.viewMode()==="seasons"&&!a.seasonService.loading()&&!a.seasonService.error()?18:-1),s(),C(a.viewMode()==="classes"&&!a.seasonService.loading()&&!a.seasonService.error()?19:-1),s(),C(a.dialogMode()?20:-1))},dependencies:[N,oe,ee,te,K,Z,J,$,Q,ie,ne,X,re],styles:[".admin-catalog[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem}.tab-bar[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-bottom:2px solid #e0e0e0;margin-bottom:1.5rem}.tab[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:none;border:none;border-bottom:3px solid transparent;cursor:pointer;font-size:1rem;font-weight:500;color:#666;transition:all .2s}.tab[_ngcontent-%COMP%]:hover{color:#333}.tab.active[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);border-bottom-color:var(--sys-primary, #c62828)}.filter-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:1rem;background:#f5f5f5;border-radius:8px}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.toggle-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.season-filter[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem}.btn-create[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer}.btn-create[_ngcontent-%COMP%]:hover{background:#a51c1c}.seasons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.season-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:1.5rem;transition:box-shadow .2s}.season-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.season-card.inactive[_ngcontent-%COMP%]{opacity:.6}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #f0f0f0}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.25rem}.season-dates[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#666}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:500;background:#e0e0e0;color:#666}.status-badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.card-content[_ngcontent-%COMP%]{margin-bottom:1rem}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;font-size:.875rem}.season-description[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #f0f0f0;font-size:.875rem;color:#666;white-space:pre-wrap}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-action[_ngcontent-%COMP%]{flex:1;padding:.5rem;background:#fff;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.875rem}.btn-action[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-action.btn-activate[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);color:var(--sys-primary, #c62828)}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.classes-table-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.classes-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f5f5f5}.classes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e0e0e0}.classes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:#666}.classes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem}.classes-table[_ngcontent-%COMP%]   tr.inactive[_ngcontent-%COMP%]{opacity:.6}.classes-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.text-warning[_ngcontent-%COMP%]{color:#ff9800;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem;background:#fff;border:1px solid #ddd;border-radius:4px;font-size:.75rem;cursor:pointer}.btn-sm[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn-sm.btn-activate[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);color:var(--sys-primary, #c62828)}.btn-sm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;overflow:hidden}.dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;width:100%;box-sizing:border-box}.form-row-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.form-group-wide[_ngcontent-%COMP%]{grid-column:span 1}.form-group-checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-end;padding-bottom:.75rem}.form-section-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.75rem;margin-top:.5rem;padding-bottom:.25rem;border-bottom:1px solid #e0e0e0}.form-section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#333}.collapsible-section[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:6px;overflow:hidden}.section-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%;padding:.75rem 1rem;background:#f9f9f9;border:none;cursor:pointer;font-size:.875rem;font-weight:500;color:#333;text-align:left}.section-toggle[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toggle-icon[_ngcontent-%COMP%]{font-size:.7rem;color:#666}.section-badge[_ngcontent-%COMP%]{margin-left:auto;padding:.125rem .5rem;background:#e8f5e9;color:#2e7d32;border-radius:10px;font-size:.7rem;font-weight:500}.section-content[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid #e0e0e0}.section-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;font-family:inherit;resize:vertical}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;font-family:inherit;box-sizing:border-box;max-width:100%}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.5rem}.input-with-hint[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.input-with-hint[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;box-sizing:border-box;width:100%}.hint[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.discount-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem;padding:.5rem;background:#e8f5e9;border-radius:4px;font-size:.75rem}.discount-preview.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.discount-tier[_ngcontent-%COMP%]{background:#c8e6c9;padding:.25rem .5rem;border-radius:4px;color:#2e7d32}.early-bird-tiers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.tier-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.tier-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{flex:1;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.tier-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:120px;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.tier-price-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#666;min-width:60px}.btn-remove[_ngcontent-%COMP%]{background:#f44336;color:#fff;border:none;border-radius:4px;width:28px;height:28px;cursor:pointer;font-size:1.2rem;line-height:1;display:flex;align-items:center;justify-content:center}.btn-remove[_ngcontent-%COMP%]:hover{background:#d32f2f}.btn-add-tier[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px dashed #4caf50;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.875rem;align-self:flex-start}.btn-add-tier[_ngcontent-%COMP%]:hover{background:#c8e6c9}.btn-inherit[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;border:1px dashed #2196f3;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.875rem;align-self:flex-start;margin-left:.5rem}.btn-inherit[_ngcontent-%COMP%]:hover{background:#bbdefb}.form-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;color:#333}.hint.inherited[_ngcontent-%COMP%]{color:#1976d2;font-style:italic}.inherited-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:.75rem;background:#e3f2fd;border-radius:6px}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;font-weight:500;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#a51c1c}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#f44336;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;margin:0 auto 1rem}.btn-retry[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:6px;cursor:pointer;margin-top:1rem}.coupon-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.coupon-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#333}.coupon-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.875rem;color:#666}.coupon-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.coupon-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f5f5f5;border-radius:6px}.coupon-info[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.coupon-name[_ngcontent-%COMP%]{font-weight:500}.coupon-id[_ngcontent-%COMP%]{font-size:.75rem;font-family:monospace;color:#666;background:#fff;padding:.125rem .375rem;border-radius:4px}.coupon-credit[_ngcontent-%COMP%]{color:#2e7d32;font-weight:500}.btn-remove-coupon[_ngcontent-%COMP%]{padding:.375rem .75rem;background:#f44336;color:#fff;border:none;border-radius:4px;font-size:.75rem;cursor:pointer}.btn-remove-coupon[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f}.btn-remove-coupon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.no-coupons[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#666;background:#f9f9f9;border-radius:6px}.add-coupon-section[_ngcontent-%COMP%]{padding-top:1rem;border-top:1px solid #e0e0e0}.coupon-select-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.coupon-select[_ngcontent-%COMP%]{flex:1;padding:.5rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem}.btn-add-coupon[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:6px;cursor:pointer}.btn-add-coupon[_ngcontent-%COMP%]:hover:not(:disabled){background:#a51c1c}.btn-add-coupon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{padding:.75rem;background:#ffebee;color:#c62828;border-radius:6px;font-size:.875rem}@media(max-width:768px){.seasons-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-bar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})};export{se as AdminCatalogListComponent};
