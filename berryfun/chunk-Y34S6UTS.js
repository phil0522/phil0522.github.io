import{e as A}from"./chunk-YZ2NQSZL.js";import{a as H,c as R,f as Y,r as U}from"./chunk-7Y5CEA3U.js";import{a as j}from"./chunk-PTPPA25K.js";import"./chunk-XKJWOYIG.js";import"./chunk-6VHSJCR3.js";import"./chunk-RDKP2ZJK.js";import{b as F}from"./chunk-YUXLOB7R.js";import"./chunk-6B5SPXH3.js";import{b as W}from"./chunk-6MUO5BU2.js";import{d as z,j as B,k as N}from"./chunk-B4PSB7QN.js";import{Bb as T,Db as V,Eb as a,Fb as p,Gb as b,Ia as l,Ib as I,Kb as y,Lb as S,Mb as P,R as x,Ta as D,Vb as v,W as C,X as _,Y as w,Yb as L,Z as M,bb as d,cb as m,fb as O,gb as k,ia as E,ib as i,jb as t,kb as h,ob as g,qb as f,sb as c}from"./chunk-VKJSCVXY.js";var J=(o,n)=>n.deadline;function q(o,n){o&1&&(i(0,"div",1),a(1,"Loading..."),t())}function K(o,n){if(o&1){let e=g();i(0,"div",2)(1,"strong"),a(2,"Error:"),t(),a(3),i(4,"button",3),f("click",function(){C(e);let s=c();return _(s.seasonService.clearError())}),a(5,"Close"),t()()}if(o&2){let e=c();l(3),b(" ",e.seasonService.error()," ")}}function Q(o,n){if(o&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),P("ngModelChange",function(s){C(e);let u=c(2);return S(u.includeLunch,s)||(u.includeLunch=s),_(s)}),f("change",function(){C(e);let s=c(2);return _(s.updateTotal())}),t(),a(3," Lunch Service "),t(),i(4,"span",17),a(5),t()()}if(o&2){let e=c(),r=c();l(2),y("ngModel",r.includeLunch),l(3),p(r.seasonService.formatPrice(e.lunchPrice))}}function X(o,n){if(o&1){let e=g();i(0,"div",15)(1,"label")(2,"input",24),P("ngModelChange",function(s){C(e);let u=c(2);return S(u.includeExtendedCare,s)||(u.includeExtendedCare=s),_(s)}),f("change",function(){C(e);let s=c(2);return _(s.updateTotal())}),t(),a(3," Extended Care "),t(),i(4,"span",17),a(5),t()()}if(o&2){let e=c(),r=c();l(2),y("ngModel",r.includeExtendedCare),l(3),p(r.seasonService.formatPrice(e.extendedCarePrice))}}function Z(o,n){o&1&&(i(0,"div",21),a(1,"\u{1F389} You're getting the early bird price!"),t())}function $(o,n){if(o&1&&(i(0,"div",25)(1,"span"),a(2),t(),i(3,"span",26),a(4),t()()),o&2){let e=n.$implicit,r=c(3);l(2),b("Before ",r.formatDate(e.deadline)),l(2),p(r.seasonService.formatPrice(e.price))}}function ee(o,n){if(o&1&&(i(0,"section",7)(1,"h3"),a(2,"Early Bird Pricing"),t(),O(3,$,5,2,"div",25,J),i(5,"div",25)(6,"span"),a(7,"Regular Price"),t(),i(8,"span",26),a(9),t()()()),o&2){let e=c(),r=c();l(3),k(e.earlyBirdTiers),l(6),p(r.seasonService.formatPrice(e.basePrice))}}function te(o,n){if(o&1){let e=g();i(0,"button",28),f("click",function(){C(e);let s=c(3);return _(s.onViewCartClick())}),w(),i(1,"svg",29),h(2,"path",30),t(),a(3," View Cart "),t(),M(),i(4,"p",31),a(5,"This class is already in your cart"),t()}}function ne(o,n){o&1&&(i(0,"button",32),a(1,"Add Student to Enroll"),t(),i(2,"p",33)(3,"a",34),a(4,"Add a student"),t(),a(5," to enroll "),t())}function ie(o,n){o&1&&(i(0,"button",32),a(1,"Complete Profile to Enroll"),t(),i(2,"p",33)(3,"a",34),a(4,"Complete your profile"),t(),a(5," to enroll "),t())}function ae(o,n){if(o&1){let e=g();i(0,"button",35),f("click",function(){C(e);let s=c(3);return _(s.onEnrollClick())}),a(1,"Enroll Now"),t()}}function oe(o,n){if(o&1&&d(0,te,6,0)(1,ne,6,0)(2,ie,6,0)(3,ae,2,0,"button",27),o&2){let e=c(2);m(e.isInCart()?0:e.hasStudents()?e.isProfileComplete()?3:2:1)}}function re(o,n){if(o&1){let e=g();i(0,"button",28),f("click",function(){C(e);let s=c(2);return _(s.onWaitlistClick())}),a(1," Join Waitlist "),t()}}function le(o,n){if(o&1&&(i(0,"div",4)(1,"h2"),a(2),t(),i(3,"div",5),a(4),t()(),i(5,"div",6)(6,"section",7)(7,"h3"),a(8,"Session Information"),t(),i(9,"div",8)(10,"span",9),a(11,"Start Date:"),t(),i(12,"span",10),a(13),t()(),i(14,"div",8)(15,"span",9),a(16,"End Date:"),t(),i(17,"span",10),a(18),t()(),i(19,"div",8)(20,"span",9),a(21,"Duration:"),t(),i(22,"span",10),a(23),t()()(),i(24,"section",7)(25,"h3"),a(26,"Availability"),t(),i(27,"div",11),h(28,"div",12),t(),i(29,"div",13),a(30),t()(),i(31,"section",14)(32,"h3"),a(33,"Pricing Calculator"),t(),i(34,"div",15)(35,"label"),h(36,"input",16),a(37," Base Fee "),t(),i(38,"span",17),a(39),t()(),d(40,Q,6,2,"div",15),d(41,X,6,2,"div",15),i(42,"div",18)(43,"span",19),a(44,"Total:"),t(),i(45,"span",20),a(46),t()(),d(47,Z,2,0,"div",21),t(),d(48,ee,10,1,"section",7),i(49,"section",22),d(50,oe,4,1)(51,re,2,0,"button",23),t()()),o&2){let e=n,r=c();l(2),p(e.name),l(),V("status-"+r.statusClass),l(),b(" ",r.registrationService.getStatusMessage(e)," "),l(9),p(r.formatDate(e.startDate)),l(5),p(r.formatDate(e.endDate)),l(5),b("",r.calculateDuration(e.startDate,e.endDate)," days"),l(5),T("width",e.enrolledCount/e.capacity*100,"%"),l(2),I(" Enrolled: ",e.enrolledCount," / ",e.capacity," (",e.available," spots remaining) "),l(9),p(r.seasonService.formatPrice(r.basePrice)),l(),m(e.lunchPrice>0?40:-1),l(),m(e.extendedCarePrice>0?41:-1),l(5),p(r.totalPriceFormatted),l(),m(r.showEarlyBird?47:-1),l(),m(e.earlyBirdTiers.length>0?48:-1),l(2),m(r.registrationService.isFullForPublic(e)?r.statusClass==="full"?51:-1:50)}}var G=class o{seasonService=x(F);registrationService=x(j);cartStore=x(A);router=x(B);userService=x(W);sessionId=L();includeLunch=!1;includeExtendedCare=!1;totalPrice=0;totalPriceFormatted="$0.00";basePrice=0;showEarlyBird=!1;statusClass="available";staticClassData=v(()=>this.seasonService.selectedClass());classData=v(()=>{let n=this.staticClassData();return n?this.registrationService.createViewType(n):null});isInCart=v(()=>{let n=this.classData();return n?this.cartStore.isClassInCart(n.id):!1});isProfileComplete=v(()=>this.userService.isProfileComplete());hasStudents=v(()=>this.userService.hasStudents());constructor(){E(()=>{let n=this.sessionId();n&&this.loadClassData(n)})}async loadClassData(n){await this.seasonService.loadClass(n),this.updateTotal()}updateTotal(){let n=this.classData();if(!n)return;this.totalPrice=this.seasonService.calculatePrice(n,{includeLunch:this.includeLunch,includeExtendedCare:this.includeExtendedCare}),this.basePrice=this.seasonService.calculatePrice(n,{includeLunch:!1,includeExtendedCare:!1}),this.totalPriceFormatted=this.seasonService.formatPrice(this.totalPrice),this.showEarlyBird=this.basePrice<n.basePrice;let e=this.registrationService.getEnrollmentStatus(n);this.statusClass=e==="open"?"available":"full"}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}calculateDuration(n,e){let r=new Date(n),s=new Date(e),u=Math.abs(s.getTime()-r.getTime());return Math.ceil(u/(1e3*60*60*24))+1}onEnrollClick(){let n=this.classData();n&&this.cartStore.addToCart(n,[],{lunch:this.includeLunch,extendedCare:this.includeExtendedCare})}onViewCartClick(){this.router.navigate(["/cart"])}onWaitlistClick(){this.router.navigate(["/waitlist"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=D({type:o,selectors:[["app-class-details"]],inputs:{sessionId:[1,"sessionId"]},decls:4,vars:3,consts:[[1,"class-details"],[1,"loading"],[1,"error-message"],[3,"click"],[1,"details-header"],[1,"status-badge"],[1,"details-content"],[1,"info-section"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"capacity-bar"],[1,"capacity-fill"],[1,"capacity-text"],[1,"pricing-section"],[1,"price-item"],["type","checkbox","disabled","","checked",""],[1,"price"],[1,"price-total"],[1,"total-label"],[1,"total-value"],[1,"early-bird-notice"],[1,"action-section"],[1,"btn-secondary","btn-large"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"tier-row"],[1,"tier-price"],[1,"btn-primary","btn-large"],[1,"btn-secondary","btn-large",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"],[1,"in-cart-note"],["disabled","",1,"btn-disabled","btn-large"],[1,"profile-note"],["routerLink","/profile"],[1,"btn-primary","btn-large",3,"click"]],template:function(e,r){if(e&1&&(i(0,"div",0),d(1,q,2,0,"div",1),d(2,K,6,1,"div",2),d(3,le,52,19),t()),e&2){let s;l(),m(r.seasonService.loading()?1:-1),l(),m(r.seasonService.error()?2:-1),l(),m((s=r.classData())?3:-1,s)}},dependencies:[z,U,H,R,Y,N],styles:[".class-details[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--sys-on-surface-variant, #666)}.error-message[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c);padding:1rem;border-radius:8px;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}.details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--sys-primary, #c62828)}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.875rem}.status-available[_ngcontent-%COMP%]{background-color:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20)}.status-full[_ngcontent-%COMP%]{background-color:var(--sys-error-container, #ffebee);color:var(--sys-on-error-container, #b71c1c)}.details-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.info-section[_ngcontent-%COMP%], .pricing-section[_ngcontent-%COMP%], .action-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline, #e0e0e0);border-radius:12px;padding:1.5rem}h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--sys-on-surface, #212121);font-size:1.125rem}.info-row[_ngcontent-%COMP%], .tier-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.info-row[_ngcontent-%COMP%]:last-child, .tier-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.info-value[_ngcontent-%COMP%], .tier-price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.capacity-bar[_ngcontent-%COMP%]{width:100%;height:8px;background-color:var(--sys-surface-variant, #f5f5f5);border-radius:4px;overflow:hidden;margin-bottom:.5rem}.capacity-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--sys-primary, #c62828);transition:width .3s ease}.capacity-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid var(--sys-outline-variant, #f0f0f0)}.price-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.price-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.price[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.price-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 0 0;margin-top:.5rem;border-top:2px solid var(--sys-outline, #e0e0e0)}.total-label[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600}.total-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--sys-primary, #c62828)}.early-bird-notice[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,orange);color:#333;padding:.75rem 1rem;border-radius:8px;font-weight:600;text-align:center;margin-top:1rem}.action-section[_ngcontent-%COMP%]{text-align:center}.btn-large[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:1rem 2rem;font-size:1.125rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.in-cart-note[_ngcontent-%COMP%]{margin-top:.75rem;font-size:.875rem;color:var(--color-success, #43a047)}.btn-primary[_ngcontent-%COMP%]{background-color:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--sys-primary-dark, #8e0000);transform:translateY(-2px);box-shadow:0 4px 12px #c628284d}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--sys-tertiary, #1976d2);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--sys-tertiary-dark, #0d47a1);transform:translateY(-2px);box-shadow:0 4px 12px #1976d24d}.btn-disabled[_ngcontent-%COMP%]{background-color:var(--sys-surface-variant, #f5f5f5);color:var(--sys-on-surface-variant, #666)}.btn-disabled[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.8}.profile-note[_ngcontent-%COMP%]{margin-top:.75rem;font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.profile-note[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);text-decoration:underline}"]})};export{G as ClassDetailsComponent};
