import{a as de}from"./chunk-5Q2ELU6L.js";import{a as re}from"./chunk-5GCN6JML.js";import"./chunk-BENLYYZ6.js";import{a as ae}from"./chunk-XYFRHGXZ.js";import{b as H,c as J,d as Z,e as K,f as Q,g as X,i as ee,j as te,k as ne,n as ie,r as oe}from"./chunk-5M3WJSTJ.js";import{a as G}from"./chunk-6THQUTU6.js";import{b as $}from"./chunk-35QEJLB4.js";import"./chunk-BV4MKCLK.js";import{a as U}from"./chunk-TZNWTF3S.js";import{b as Y}from"./chunk-VVYVTIM6.js";import{Ka as B,b as N,d as L,j,k as F,wa as W,xa as z}from"./chunk-UBU22GLA.js";import{Cb as a,Db as g,Eb as f,Fb as A,Ia as r,Ib as O,Jb as w,Kb as M,Pb as k,R as D,Ta as R,Tb as v,W as c,Wb as V,X as m,bb as u,cb as _,db as E,fb as b,gb as y,ha as P,hb as C,ib as t,jb as n,kb as S,ob as h,qb as x,sb as s}from"./chunk-UKFGIOHC.js";function le(i){switch(i){case"locked":return"status-badge status-locked";case"submitted":return"status-badge status-submitted";case"paid":return"status-badge status-paid";case"cancelled":return"status-badge status-cancelled";case"change_requested":return"status-badge status-change-requested";case"refunded":return"status-badge status-refunded";case"partial":return"status-badge status-partial";case"empty":return"status-badge status-empty";default:return"status-badge"}}function se(i){switch(i){case"locked":return"Awaiting Screenshot";case"submitted":return"Pending Payment";case"paid":return"Paid";case"cancelled":return"Cancelled";case"change_requested":return"Change Requested";case"refunded":return"Refunded";case"partial":return"Partially Paid";case"empty":return"Empty";default:return i}}function ce(i){switch(i){case"locked":return"item-status-badge item-status-locked";case"submitted":return"item-status-badge item-status-submitted";case"paid":return"item-status-badge item-status-paid";case"cancelled":return"item-status-badge item-status-cancelled";case"refunded":return"item-status-badge item-status-refunded";default:return"item-status-badge"}}function me(i){switch(i){case"locked":return"Awaiting Screenshot";case"submitted":return"Pending";case"paid":return"Paid";case"cancelled":return"Cancelled";case"refunded":return"Refunded";default:return i}}function pe(i){return`$${(i/100).toFixed(2)}`}function T(i){let o=i.replace(/[^0-9.]/g,""),e=parseFloat(o)||0;return Math.round(e*100)}function q(i){return(i/100).toFixed(2)}function ue(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function _e(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}var fe=(i,o)=>({"text-danger":i,"text-warning":o}),ve=(i,o)=>({"text-success":i,"text-danger":o}),I=(i,o)=>o.sessionId+"-"+o.studentId,he=(i,o)=>o.sessionId,be=(i,o)=>o.id;function ye(i,o){i&1&&(t(0,"div",1),S(1,"div",5),t(2,"p"),a(3,"Loading order details..."),n()())}function Se(i,o){if(i&1){let e=h();t(0,"div",2)(1,"strong"),a(2,"Error:"),n(),a(3),t(4,"button",6),x("click",function(){c(e);let l=s();return m(l.clearError())}),a(5,"\xD7"),n()()}if(i&2){let e=s();r(3),f(" ",e.error()," ")}}function Oe(i,o){if(i&1&&(t(0,"div",18)(1,"span",19),a(2,"Phone:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s(3);r(4),g(e.userData().phone)}}function we(i,o){if(i&1&&(t(0,"div",18)(1,"span",19),a(2,"Address:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s(3);r(4),g(e.userData().address)}}function Me(i,o){if(i&1&&(t(0,"div",15)(1,"h2"),a(2,"User Information"),n(),t(3,"div",34)(4,"div",18)(5,"span",19),a(6,"Name:"),n(),t(7,"span",21),a(8),n()(),t(9,"div",18)(10,"span",19),a(11,"Email:"),n(),t(12,"span",21),a(13),n()(),u(14,Oe,5,1,"div",18),u(15,we,5,1,"div",18),n()()),i&2){let e=s(2);r(8),g(e.userData().displayName),r(5),g(e.userData().email),r(),_(e.userData().phone?14:-1),r(),_(e.userData().address?15:-1)}}function De(i,o){if(i&1&&(t(0,"span",36),a(1),n()),i&2){let e=s(3);r(),A(" (",e.remainingLockTime().hours,"h ",e.remainingLockTime().minutes,"m remaining) ")}}function Pe(i,o){if(i&1&&(t(0,"div",18)(1,"span",19),a(2,"Lock Expires:"),n(),t(3,"span",35),a(4),u(5,De,2,2,"span",36),n()()),i&2){let e=s(2);r(3),C("ngClass",k(3,fe,e.isOverdue(),e.isExpiringSoon())),r(),f(" ",e.formatDateTime(e.order().lockExpiresAt)," "),r(),_(e.remainingLockTime()?5:-1)}}function Ee(i,o){i&1&&(t(0,"div",22)(1,"strong"),a(2,"\u26A0\uFE0F Overdue:"),n(),a(3," This order's payment lock has expired. Items may be released. "),n())}function Ie(i,o){if(i&1){let e=h();t(0,"button",37),x("click",function(){c(e);let l=s(2);return m(l.openCancelItemsDialog())}),a(1," Cancel Items "),n()}}function Ae(i,o){if(i&1&&(t(0,"div",41)(1,"div",42)(2,"span",43),a(3),n(),t(4,"span",44),a(5),n()(),t(6,"div",45)(7,"div",46)(8,"span",19),a(9,"Student:"),n(),t(10,"span",21),a(11),n()(),t(12,"div",46)(13,"span",19),a(14,"Options:"),n(),t(15,"span",21),S(16,"app-option-badges",47),n()()()()),i&2){let e=o.$implicit,d=s(3);r(3),g(d.getClassName(e.sessionId)),r(),C("ngClass",d.getItemStatusBadgeClass(e.status)),r(),f(" ",d.getItemStatusLabel(e.status)," "),r(6),g(d.getStudentName(e.studentId)),r(5),C("options",e.options)("showEmpty",!0)}}function ke(i,o){if(i&1&&(t(0,"div",26)(1,"h3",38),a(2," Locked Items "),t(3,"span",39),a(4),n()(),t(5,"div",40),b(6,Ae,17,6,"div",41,I),n()()),i&2){let e=s(2);r(4),f("(",e.lockedItems().length,")"),r(2),y(e.lockedItems())}}function Te(i,o){if(i&1&&(t(0,"div",48)(1,"div",42)(2,"span",43),a(3),n(),t(4,"span",44),a(5),n()(),t(6,"div",45)(7,"div",46)(8,"span",19),a(9,"Student:"),n(),t(10,"span",21),a(11),n()(),t(12,"div",46)(13,"span",19),a(14,"Options:"),n(),t(15,"span",21),S(16,"app-option-badges",47),n()()()()),i&2){let e=o.$implicit,d=s(3);r(3),g(d.getClassName(e.sessionId)),r(),C("ngClass",d.getItemStatusBadgeClass(e.status)),r(),f(" ",d.getItemStatusLabel(e.status)," "),r(6),g(d.getStudentName(e.studentId)),r(5),C("options",e.options)("showEmpty",!0)}}function qe(i,o){if(i&1&&(t(0,"div",26)(1,"h3",38),a(2," Paid Items "),t(3,"span",39),a(4),n()(),t(5,"div",40),b(6,Te,17,6,"div",48,I),n()()),i&2){let e=s(2);r(4),f("(",e.paidItems().length,")"),r(2),y(e.paidItems())}}function Re(i,o){if(i&1&&(t(0,"div",49)(1,"div",42)(2,"span",43),a(3),n(),t(4,"span",44),a(5),n()(),t(6,"div",45)(7,"div",46)(8,"span",19),a(9,"Student:"),n(),t(10,"span",21),a(11),n()(),t(12,"div",46)(13,"span",19),a(14,"Options:"),n(),t(15,"span",21),S(16,"app-option-badges",47),n()()()()),i&2){let e=o.$implicit,d=s(3);r(3),g(d.getClassName(e.sessionId)),r(),C("ngClass",d.getItemStatusBadgeClass(e.status)),r(),f(" ",d.getItemStatusLabel(e.status)," "),r(6),g(d.getStudentName(e.studentId)),r(5),C("options",e.options)("showEmpty",!0)}}function Ve(i,o){if(i&1&&(t(0,"div",26)(1,"h3",38),a(2," Pending Payment "),t(3,"span",39),a(4),n()(),t(5,"div",40),b(6,Re,17,6,"div",49,I),n()()),i&2){let e=s(2);r(4),f("(",e.submittedItems().length,")"),r(2),y(e.submittedItems())}}function Ne(i,o){i&1&&(t(0,"div",27)(1,"p"),a(2,"No items in this order."),n()())}function Le(i,o){if(i&1&&(t(0,"div",28),S(1,"app-payment-screenshot-gallery",50),n()),i&2){let e=s(2);r(),C("screenshots",e.order().paymentScreenshots)}}function je(i,o){if(i&1&&(t(0,"div",59)(1,"span",19),a(2),n(),t(3,"span",60),a(4),n()()),i&2){let e=o.$implicit,d=s(4);r(2),f("",e.type,":"),r(2),f(" ",d.formatCurrency(e.amount)," ")}}function Fe(i,o){if(i&1&&(t(0,"div",53)(1,"div",58),a(2,"Discounts:"),n(),b(3,je,5,2,"div",59,E),n()),i&2){let e=s(3);r(3),y(e.order().pricing.discounts)}}function We(i,o){if(i&1&&(t(0,"div",29)(1,"h2"),a(2,"Pricing Summary"),n(),t(3,"div",51)(4,"div",52)(5,"span",19),a(6,"Subtotal:"),n(),t(7,"span",21),a(8),n()(),u(9,Fe,5,0,"div",53),t(10,"div",54)(11,"span",19),a(12,"Total Due:"),n(),t(13,"span",55),a(14),n()(),t(15,"div",52)(16,"span",19),a(17,"Total Paid:"),n(),t(18,"span",21),a(19),n()(),t(20,"div",56)(21,"span",19),a(22,"Balance:"),n(),t(23,"span",57),a(24),n()()()()),i&2){let e=s(2);r(8),g(e.formatCurrency(e.order().pricing.subtotal)),r(),_(e.order().pricing.discounts.length>0?9:-1),r(5),g(e.formatCurrency(e.totalDue())),r(5),g(e.formatCurrency(e.order().totalPaid)),r(),C("ngClass",k(6,ve,e.amountDue()<=0,e.amountDue()>0)),r(4),g(e.formatCurrency(e.amountDue()))}}function ze(i,o){if(i&1&&(t(0,"tr")(1,"td"),a(2),n(),t(3,"td",62),a(4),n(),t(5,"td")(6,"span",63),a(7),n()(),t(8,"td"),a(9),n(),t(10,"td"),a(11),n()()),i&2){let e=o.$implicit,d=s(3);r(2),g(d.formatDateTime(e.recordedAt)),r(2),g(d.formatCurrency(e.amount)),r(3),g(e.method),r(2),g(e.reference),r(2),g(e.notes||"-")}}function Be(i,o){if(i&1&&(t(0,"div",30)(1,"h2"),a(2,"Payment History"),n(),t(3,"table",61)(4,"thead")(5,"tr")(6,"th"),a(7,"Date"),n(),t(8,"th"),a(9,"Amount"),n(),t(10,"th"),a(11,"Method"),n(),t(12,"th"),a(13,"Reference"),n(),t(14,"th"),a(15,"Notes"),n()()(),t(16,"tbody"),b(17,ze,12,5,"tr",null,E),n()()()),i&2){let e=s(2);r(17),y(e.payments())}}function $e(i,o){if(i&1){let e=h();t(0,"div",65)(1,"div",66)(2,"span",43),a(3),n()(),t(4,"div",67)(5,"div",46)(6,"span",19),a(7,"Joined:"),n(),t(8,"span",21),a(9),n()()(),t(10,"button",37),x("click",function(){let l=c(e).$implicit,p=s(3);return m(p.openRemoveWaitlistDialog(l.sessionId))}),a(11," Remove Entry "),n()()}if(i&2){let e=o.$implicit,d=s(3);r(3),g(d.getClassName(e.sessionId)),r(6),g(d.formatDateTime(e.joinedAt))}}function Ue(i,o){if(i&1&&(t(0,"div",31)(1,"h2"),a(2,"Waitlist Entries"),n(),t(3,"div",64),b(4,$e,12,2,"div",65,he),n()()),i&2){let e=s(2);r(4),y(e.waitlistEntries())}}function Ge(i,o){if(i&1&&(t(0,"div",76),a(1),n()),i&2){let e=o.$implicit,d=s(4);r(),f(" ",d.getActionDescription(e)," ")}}function Ye(i,o){if(i&1&&(t(0,"div",78)(1,"span",19),a(2,"Reason:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s().$implicit;r(4),g(e.reason)}}function He(i,o){if(i&1&&(t(0,"div",78)(1,"span",19),a(2,"Admin Adjustment:"),n(),t(3,"span",35),a(4),n()()),i&2){let e=s().$implicit,d=s(3);r(3),C("ngClass",e.adminAdjustment<0?"text-success":"text-danger"),r(),A(" ",e.adminAdjustment<0?"-":"+","",d.formatCurrency(d.Math.abs(e.adminAdjustment))," ")}}function Je(i,o){if(i&1&&(t(0,"div",78)(1,"span",19),a(2,"Adjustment Reason:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s().$implicit;r(4),g(e.adminAdjustmentReason)}}function Ze(i,o){if(i&1&&(t(0,"div",78)(1,"span",19),a(2,"Processed:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s().$implicit,d=s(3);r(4),g(d.formatDateTime(e.processedAt))}}function Ke(i,o){if(i&1&&(t(0,"div",78)(1,"span",19),a(2,"Admin Notes:"),n(),t(3,"span",21),a(4),n()()),i&2){let e=s().$implicit;r(4),g(e.adminNotes)}}function Qe(i,o){if(i&1){let e=h();t(0,"button",80),x("click",function(){c(e);let l=s().$implicit,p=s(3);return m(p.openUpdateAdjustmentDialog(l))}),a(1," Edit Adjustment "),n(),t(2,"button",81),x("click",function(){c(e);let l=s().$implicit,p=s(3);return m(p.openApproveChangeDialog(l))}),a(3," Approve "),n(),t(4,"button",37),x("click",function(){c(e);let l=s().$implicit,p=s(3);return m(p.openDenyChangeDialog(l))}),a(5," Deny "),n()}}function Xe(i,o){if(i&1&&(t(0,"div",69)(1,"div",70)(2,"div",71)(3,"span",72),a(4),n(),t(5,"span",73),a(6),n()()(),t(7,"div",74)(8,"div",75)(9,"strong"),a(10,"Actions:"),n(),b(11,Ge,2,1,"div",76,E),n(),t(13,"div",77)(14,"div",78)(15,"span",19),a(16,"Requested:"),n(),t(17,"span",21),a(18),n()(),u(19,Ye,5,1,"div",78),u(20,He,5,3,"div",78),u(21,Je,5,1,"div",78),u(22,Ze,5,1,"div",78),u(23,Ke,5,1,"div",78),n()(),t(24,"div",79),u(25,Qe,6,0),n()()),i&2){let e=o.$implicit,d=s(3);C("ngClass","status-"+e.status),r(4),g(e.id),r(),C("ngClass","status-"+e.status),r(),f(" ",d.getChangeStatusLabel(e.status)," "),r(5),y(e.actions),r(7),g(d.formatDateTime(e.requestedAt)),r(),_(e.reason?19:-1),r(),_(e.adminAdjustment!==0?20:-1),r(),_(e.adminAdjustmentReason?21:-1),r(),_(e.processedAt?22:-1),r(),_(e.adminNotes?23:-1),r(2),_(e.status==="pending"?25:-1)}}function et(i,o){if(i&1&&(t(0,"div",32)(1,"h2"),a(2,"Change Requests"),n(),t(3,"div",68),b(4,Xe,26,11,"div",69,be),n()()),i&2){let e=s(2);r(4),y(e.changeRequests())}}function tt(i,o){if(i&1&&(t(0,"div",87),a(1),n()),i&2){let e=s().$implicit;r(),g(e.details)}}function nt(i,o){if(i&1&&(t(0,"div",83)(1,"div",84),a(2),n(),t(3,"div",85)(4,"div",86),a(5),n(),u(6,tt,2,1,"div",87),n()()),i&2){let e=o.$implicit,d=s(3);r(2),g(d.formatDateTime(e.timestamp)),r(3),g(e.action),r(),_(e.details?6:-1)}}function it(i,o){if(i&1&&(t(0,"div",33)(1,"h2"),a(2,"Order History"),n(),t(3,"div",82),b(4,nt,7,3,"div",83,E),n()()),i&2){let e=s(2);r(4),y(e.order().history)}}function ot(i,o){if(i&1){let e=h();t(0,"div",3)(1,"div",7)(2,"div",8)(3,"a",9),a(4,"\u2190 Back to Orders"),n(),t(5,"h1"),a(6,"Order Details"),n(),t(7,"div",10)(8,"span",11),a(9),n(),t(10,"span",12),a(11),n()()(),t(12,"div",13)(13,"button",14),x("click",function(){c(e);let l=s();return m(l.openRecordPaymentDialog())}),a(14," Record Payment "),n()()(),u(15,Me,16,4,"div",15),t(16,"div",16)(17,"h2"),a(18,"Order Status"),n(),t(19,"div",17)(20,"div",18)(21,"span",19),a(22,"Status:"),n(),t(23,"span",20),a(24),n()(),u(25,Pe,6,6,"div",18),t(26,"div",18)(27,"span",19),a(28,"Created:"),n(),t(29,"span",21),a(30),n()(),t(31,"div",18)(32,"span",19),a(33,"Last Updated:"),n(),t(34,"span",21),a(35),n()()(),u(36,Ee,4,0,"div",22),n(),t(37,"div",23)(38,"div",24)(39,"h2"),a(40,"Order Items"),n(),u(41,Ie,2,0,"button",25),n(),u(42,ke,8,1,"div",26),u(43,qe,8,1,"div",26),u(44,Ve,8,1,"div",26),u(45,Ne,3,0,"div",27),n(),u(46,Le,2,1,"div",28),u(47,We,25,9,"div",29),u(48,Be,19,0,"div",30),u(49,Ue,6,0,"div",31),u(50,et,6,0,"div",32),u(51,it,6,0,"div",33),n()}if(i&2){let e=s();r(9),f("User: ",e.order().userDisplayId),r(),C("ngClass",e.getStatusBadgeClass(e.getOrderStatus(e.order()))),r(),f(" ",e.getStatusLabel(e.getOrderStatus(e.order()))," "),r(2),C("disabled",!e.canRecordPayment()),r(2),_(e.userData()?15:-1),r(8),C("ngClass",e.getStatusBadgeClass(e.getOrderStatus(e.order()))),r(),f(" ",e.getStatusLabel(e.getOrderStatus(e.order()))," "),r(),_(e.order().lockExpiresAt?25:-1),r(5),g(e.formatDateTime(e.order().createdAt)),r(5),g(e.formatDateTime(e.order().updatedAt)),r(),_(e.isOverdue()?36:-1),r(5),_(e.cancellableItems().length>0?41:-1),r(),_(e.lockedItems().length>0?42:-1),r(),_(e.paidItems().length>0?43:-1),r(),_(e.submittedItems().length>0?44:-1),r(),_(e.allItems().length===0?45:-1),r(),_(e.order().paymentScreenshots.length>0?46:-1),r(),_(e.order().pricing?47:-1),r(),_(e.payments().length>0?48:-1),r(),_(e.waitlistEntries().length>0?49:-1),r(),_(e.changeRequests().length>0?50:-1),r(),_(e.order().history&&e.order().history.length>0?51:-1)}}function at(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function rt(i,o){i&1&&(S(0,"span",110),a(1," Recording... "))}function dt(i,o){i&1&&a(0," Record Payment ")}function lt(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Record Payment"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.recordPayment())}),t(9,"div",93)(10,"label",94),a(11,"Amount *"),n(),t(12,"input",95),M("ngModelChange",function(l){c(e);let p=s();return w(p.formPayment.amountInput,l)||(p.formPayment.amountInput=l),m(l)}),n(),t(13,"small",96),a(14),n()(),t(15,"div",93)(16,"label",97),a(17,"Payment Method *"),n(),t(18,"select",98),M("ngModelChange",function(l){c(e);let p=s();return w(p.formPayment.method,l)||(p.formPayment.method=l),m(l)}),t(19,"option",99),a(20,"Zelle"),n(),t(21,"option",100),a(22,"Check"),n(),t(23,"option",101),a(24,"Cash"),n(),t(25,"option",102),a(26,"Other"),n()()(),t(27,"div",93)(28,"label",103),a(29," Reference (optional) "),n(),t(30,"input",104),M("ngModelChange",function(l){c(e);let p=s();return w(p.formPayment.reference,l)||(p.formPayment.reference=l),m(l)}),n()(),t(31,"div",93)(32,"label",105),a(33,"Notes"),n(),t(34,"textarea",106),M("ngModelChange",function(l){c(e);let p=s();return w(p.formPayment.notes,l)||(p.formPayment.notes=l),m(l)}),n()(),u(35,at,2,1,"div",22),t(36,"div",107)(37,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(38," Cancel "),n(),t(39,"button",109),u(40,rt,2,0)(41,dt,1,0),n()()()()()()}if(i&2){let e=s();r(12),O("ngModel",e.formPayment.amountInput),r(2),f(" Amount due: ",e.formatCurrency(e.amountDue())," "),r(4),O("ngModel",e.formPayment.method),r(12),O("ngModel",e.formPayment.reference),r(4),O("ngModel",e.formPayment.notes),r(),_(e.actionError()?35:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()),r(),_(e.actionLoading()?40:41)}}function st(i,o){if(i&1){let e=h();t(0,"label",112)(1,"input",117),x("change",function(){let l=c(e).$implicit,p=s(2);return m(p.toggleItemSelection(l))}),n(),t(2,"span",118)(3,"span",43),a(4),n(),a(5," - "),t(6,"span",119),a(7),n(),t(8,"span",44),a(9),n()()()}if(i&2){let e=o.$implicit,d=s(2);r(),C("checked",d.isItemSelected(e)),r(3),g(d.getClassName(e.sessionId)),r(3),g(d.getStudentName(e.studentId)),r(),C("ngClass",d.getItemStatusBadgeClass(e.status)),r(),f(" ",d.getItemStatusLabel(e.status)," ")}}function ct(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function mt(i,o){i&1&&(S(0,"span",110),a(1," Cancelling... "))}function pt(i,o){if(i&1&&a(0),i&2){let e=s(2);f(" Cancel ",e.selectedItems().size," Item(s) ")}}function ut(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Cancel Order Items"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.cancelItems())}),t(9,"div",93)(10,"label"),a(11,"Select items to cancel:"),n(),t(12,"div",111),b(13,st,10,5,"label",112,I),n()(),t(15,"div",93)(16,"label",113),a(17,"Cancellation Reason *"),n(),t(18,"textarea",114),M("ngModelChange",function(l){c(e);let p=s();return w(p.formCancel.reason,l)||(p.formCancel.reason=l),m(l)}),n()(),t(19,"div",115)(20,"strong"),a(21,"Refund Policy:"),n(),a(22),n(),u(23,ct,2,1,"div",22),t(24,"div",107)(25,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(26," Cancel "),n(),t(27,"button",116),u(28,mt,2,0)(29,pt,1,1),n()()()()()()}if(i&2){let e=s();r(13),y(e.cancellableItems()),r(5),O("ngModel",e.formCancel.reason),r(4),f(" Cancelling paid items may incur a refund processing fee of ",e.formatCurrency(e.refundFee()),". "),r(),_(e.actionError()?23:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()||e.selectedItems().size===0),r(),_(e.actionLoading()?28:29)}}function _t(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function gt(i,o){i&1&&(S(0,"span",110),a(1," Removing... "))}function xt(i,o){i&1&&a(0," Remove Entry ")}function Ct(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Remove Waitlist Entry"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.removeWaitlist())}),t(9,"div",93)(10,"label"),a(11,"Class:"),n(),t(12,"div",120),a(13),n()(),t(14,"div",115),a(15," This will remove the user from the waitlist for this class. "),n(),u(16,_t,2,1,"div",22),t(17,"div",107)(18,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(19," Cancel "),n(),t(20,"button",116),u(21,gt,2,0)(22,xt,1,0),n()()()()()()}if(i&2){let e=s();r(13),f(" ",e.getClassName(e.formRemoveWaitlist.sessionId)," "),r(3),_(e.actionError()?16:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()),r(),_(e.actionLoading()?21:22)}}function ft(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function vt(i,o){i&1&&(S(0,"span",110),a(1," Saving... "))}function ht(i,o){i&1&&a(0," Save Adjustment ")}function bt(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Update Adjustment"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.updateAdjustment())}),t(9,"div",93)(10,"label"),a(11,"Request ID:"),n(),t(12,"div",120),a(13),n()(),t(14,"div",93)(15,"label",121),a(16,"Extra Fee (+) or Credit (-)"),n(),t(17,"input",122),M("ngModelChange",function(l){c(e);let p=s();return w(p.formChangeRequest.adjustmentInput,l)||(p.formChangeRequest.adjustmentInput=l),m(l)}),n(),t(18,"small",96),a(19,"Positive values add a fee, negative values give a credit"),n()(),t(20,"div",93)(21,"label",123),a(22,"Reason"),n(),t(23,"textarea",124),M("ngModelChange",function(l){c(e);let p=s();return w(p.formChangeRequest.adjustmentReason,l)||(p.formChangeRequest.adjustmentReason=l),m(l)}),n()(),t(24,"div",93)(25,"label",125),a(26,"Admin Notes"),n(),t(27,"textarea",126),M("ngModelChange",function(l){c(e);let p=s();return w(p.formChangeRequest.adminNotes,l)||(p.formChangeRequest.adminNotes=l),m(l)}),n()(),t(28,"div",127),a(29," The user will see this adjustment. You can update it multiple times before approving. "),n(),u(30,ft,2,1,"div",22),t(31,"div",107)(32,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(33," Cancel "),n(),t(34,"button",109),u(35,vt,2,0)(36,ht,1,0),n()()()()()()}if(i&2){let e=s();r(13),g(e.formChangeRequest.requestId),r(4),O("ngModel",e.formChangeRequest.adjustmentInput),r(6),O("ngModel",e.formChangeRequest.adjustmentReason),r(4),O("ngModel",e.formChangeRequest.adminNotes),r(3),_(e.actionError()?30:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()),r(),_(e.actionLoading()?35:36)}}function yt(i,o){if(i&1&&(t(0,"div",129),a(1),n()),i&2){let e=o.$implicit,d=s(2);r(),g(d.getActionDescription(e))}}function St(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function Ot(i,o){i&1&&(S(0,"span",110),a(1," Approving... "))}function wt(i,o){i&1&&a(0," Approve Changes ")}function Mt(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Approve Change Request"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.approveChange())}),t(9,"div",93)(10,"label"),a(11,"Request ID:"),n(),t(12,"div",120),a(13),n()(),t(14,"div",93)(15,"label"),a(16,"Actions to apply:"),n(),t(17,"div",128),b(18,yt,2,1,"div",129,E),n()(),t(20,"div",93)(21,"label",130),a(22,"Admin Notes"),n(),t(23,"textarea",131),M("ngModelChange",function(l){c(e);let p=s();return w(p.formChangeRequest.adminNotes,l)||(p.formChangeRequest.adminNotes=l),m(l)}),n()(),t(24,"div",115),a(25," Approving will apply all changes to the order. Class removals will create vacancy holds for waitlist members. The order pricing will be recalculated. "),n(),u(26,St,2,1,"div",22),t(27,"div",107)(28,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(29," Cancel "),n(),t(30,"button",109),u(31,Ot,2,0)(32,wt,1,0),n()()()()()()}if(i&2){let e=s();r(13),g(e.formChangeRequest.requestId),r(5),y(e.formChangeRequest.actions),r(5),O("ngModel",e.formChangeRequest.adminNotes),r(3),_(e.actionError()?26:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()),r(),_(e.actionLoading()?31:32)}}function Dt(i,o){if(i&1&&(t(0,"div",22),a(1),n()),i&2){let e=s(2);r(),g(e.actionError())}}function Pt(i,o){i&1&&(S(0,"span",110),a(1," Denying... "))}function Et(i,o){i&1&&a(0," Deny Request ")}function It(i,o){if(i&1){let e=h();t(0,"div",88),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),t(1,"div",89),x("click",function(l){return c(e),m(l.stopPropagation())}),t(2,"div",90)(3,"h3"),a(4,"Deny Change Request"),n(),t(5,"button",6),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(6,"\xD7"),n()(),t(7,"div",91)(8,"form",92),x("ngSubmit",function(){c(e);let l=s();return m(l.denyChange())}),t(9,"div",93)(10,"label"),a(11,"Request ID:"),n(),t(12,"div",120),a(13),n()(),t(14,"div",93)(15,"label",132),a(16,"Reason for Denial *"),n(),t(17,"textarea",133),M("ngModelChange",function(l){c(e);let p=s();return w(p.formChangeRequest.adminNotes,l)||(p.formChangeRequest.adminNotes=l),m(l)}),n()(),t(18,"div",127),a(19," The user will be notified that their change request was denied. No changes will be applied to their order. "),n(),u(20,Dt,2,1,"div",22),t(21,"div",107)(22,"button",108),x("click",function(){c(e);let l=s();return m(l.closeDialog())}),a(23," Cancel "),n(),t(24,"button",116),u(25,Pt,2,0)(26,Et,1,0),n()()()()()()}if(i&2){let e=s();r(13),g(e.formChangeRequest.requestId),r(4),O("ngModel",e.formChangeRequest.adminNotes),r(3),_(e.actionError()?20:-1),r(2),C("disabled",e.actionLoading()),r(2),C("disabled",e.actionLoading()||!e.formChangeRequest.adminNotes.trim()),r(),_(e.actionLoading()?25:26)}}var ge=class i{orderId=V.required();adminOrdersStore=D(de);orderRpc=D($);userService=D(Y);seasonService=D(G);configService=D(U);router=D(j);order=P(null);loading=P(!1);error=P(null);userData=P(null);actionLoading=this.orderRpc.loading;actionError=this.orderRpc.error;dialogMode=P(null);formPayment={amountInput:"",method:"zelle",reference:"",notes:""};formCancel={reason:""};selectedItems=P(new Set);formRemoveWaitlist={sessionId:""};formChangeRequest={requestId:"",actions:[],adjustmentInput:"",adjustmentReason:"",adminNotes:""};Math=Math;allItems=v(()=>this.order()?.items??[]);paidItems=v(()=>{let o=this.order();return o?z(o):[]});submittedItems=v(()=>{let o=this.order();return o?W(o):[]});lockedItems=v(()=>this.allItems().filter(o=>o.status==="locked"));cancellableItems=v(()=>[...this.lockedItems(),...this.paidItems(),...this.submittedItems()]);waitlistEntries=v(()=>this.order()?.waitlist??[]);payments=v(()=>this.order()?.payments??[]);changeRequests=v(()=>this.order()?.changeRequests??[]);totalDue=v(()=>{let o=this.order()?.pricing;return o?o.subtotal+o.discounts.reduce((e,d)=>e+d.amount,0):0});amountDue=v(()=>{let o=this.order();return o?this.totalDue()-o.totalPaid:0});refundFee=v(()=>this.seasonService.selectedSeason()?.refundProcessingFee??2e3);isOverdue=v(()=>{let o=this.order();if(!o||!o.lockExpiresAt)return!1;let e=this.configService.currentTime();return new Date(o.lockExpiresAt)<new Date(e)});isExpiringSoon=v(()=>{let o=this.order();if(!o||!o.lockExpiresAt)return!1;let e=this.configService.currentTime(),d=new Date(o.lockExpiresAt),l=new Date(e),p=(d.getTime()-l.getTime())/(1e3*60*60);return p>0&&p<=12});remainingLockTime=v(()=>{let o=this.order();if(!o||!o.lockExpiresAt)return null;let e=this.configService.currentTime(),d=new Date(o.lockExpiresAt),l=new Date(e),p=d.getTime()-l.getTime();if(p<=0)return null;let xe=Math.floor(p/(1e3*60*60)),Ce=Math.floor(p%(1e3*60*60)/(1e3*60));return{hours:xe,minutes:Ce}});canRecordPayment=v(()=>this.amountDue()>0);formatCurrency=pe;formatDate=ue;formatDateTime=_e;getOrderStatus=B;getStatusBadgeClass=le;getStatusLabel=se;getItemStatusBadgeClass=ce;getItemStatusLabel=me;async ngOnInit(){if(!this.userService.isAuthenticated()){await this.router.navigate(["/login"]);return}await this.loadOrder()}async loadOrder(){this.loading.set(!0),this.error.set(null);try{let o=await this.adminOrdersStore.getOrder(this.orderId());this.order.set(o),await this.loadUserData(o.userDisplayId)}catch(o){let e=o instanceof Error?o.message:String(o);this.error.set(e)}finally{this.loading.set(!1)}}async loadUserData(o){try{let e=await this.userService.getUserByDisplayId(o);e&&this.userData.set({displayName:e.displayName,email:e.email,phone:e.primaryGuardian?.phone,address:e.primaryGuardian?.address?`${e.primaryGuardian.address.street}, ${e.primaryGuardian.address.city}, ${e.primaryGuardian.address.state} ${e.primaryGuardian.address.zipCode}`:void 0})}catch(e){console.error("Failed to load user data:",e)}}getClassName(o){return this.seasonService.classes().find(d=>d.id===o)?.name??o}getStudentName(o){return this.userData()?o:"Unknown Student"}openRecordPaymentDialog(){this.formPayment.amountInput=q(this.amountDue()),this.formPayment.method="zelle",this.formPayment.reference="",this.formPayment.notes="",this.dialogMode.set("record-payment")}openCancelItemsDialog(){this.selectedItems.set(new Set),this.formCancel.reason="",this.dialogMode.set("cancel-items")}openRemoveWaitlistDialog(o){this.formRemoveWaitlist.sessionId=o,this.dialogMode.set("remove-waitlist")}closeDialog(){this.dialogMode.set(null),this.orderRpc.clearError()}isItemSelected(o){let e=`${o.sessionId}-${o.studentId}`;return this.selectedItems().has(e)}toggleItemSelection(o){let e=`${o.sessionId}-${o.studentId}`,d=new Set(this.selectedItems());d.has(e)?d.delete(e):d.add(e),this.selectedItems.set(d)}async recordPayment(){let o=this.order();if(!o)return;let e=T(this.formPayment.amountInput);if(e<=0){alert("Please enter a valid payment amount.");return}try{await this.orderRpc.recordPayment({year:this.configService.currentActiveYear(),userAuthId:o.userAuthId,amount:e,reference:this.formPayment.reference||null,method:this.formPayment.method,notes:this.formPayment.notes||null}),await this.loadOrder(),this.closeDialog()}catch(d){console.error("Failed to record payment:",d)}}async cancelItems(){if(this.order()){if(this.selectedItems().size===0){alert("Please select at least one item to cancel.");return}if(!this.formCancel.reason.trim()){alert("Please enter a cancellation reason.");return}try{let e=Array.from(this.selectedItems()).map(d=>{let[l,p]=d.split("-");return{sessionId:l,studentId:p}});await this.orderRpc.cancelItems({year:this.configService.currentActiveYear(),items:e,reason:this.formCancel.reason}),await this.loadOrder(),this.closeDialog()}catch(e){console.error("Failed to cancel items:",e)}}}async removeWaitlist(){let o=this.order();if(o)try{await this.orderRpc.removeWaitlistEntry({year:this.configService.currentActiveYear(),userAuthId:o.userAuthId,sessionId:this.formRemoveWaitlist.sessionId}),await this.loadOrder(),this.closeDialog()}catch(e){console.error("Failed to remove waitlist entry:",e)}}getChangeStatusLabel(o){switch(o){case"pending":return"Pending";case"approved":return"Approved";case"denied":return"Denied";default:return o}}getActionDescription(o){let e=this.getClassName(o.target.sessionId),d=this.getStudentName(o.target.studentId);switch(o.type){case"remove_class":return`Remove from class: ${e} - ${d}`;case"add_addon":return`Add ${o.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${d}`;case"remove_addon":return`Remove ${o.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${d}`}}openUpdateAdjustmentDialog(o){this.formChangeRequest.requestId=o.id,this.formChangeRequest.actions=[...o.actions],this.formChangeRequest.adjustmentInput=o.adminAdjustment!==0?q(o.adminAdjustment):"",this.formChangeRequest.adjustmentReason=o.adminAdjustmentReason??"",this.formChangeRequest.adminNotes=o.adminNotes??"",this.dialogMode.set("update-adjustment")}openApproveChangeDialog(o){this.formChangeRequest.requestId=o.id,this.formChangeRequest.actions=[...o.actions],this.formChangeRequest.adminNotes=o.adminNotes??"",this.dialogMode.set("approve-change")}openDenyChangeDialog(o){this.formChangeRequest.requestId=o.id,this.formChangeRequest.actions=[...o.actions],this.formChangeRequest.adminNotes="",this.dialogMode.set("deny-change")}async updateAdjustment(){let o=this.order();if(o)try{let e=this.formChangeRequest.adjustmentInput.trim()?T(this.formChangeRequest.adjustmentInput):0;await this.orderRpc.updateChangeRequest({year:this.configService.currentActiveYear(),userAuthId:o.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminAdjustment:e,adminAdjustmentReason:this.formChangeRequest.adjustmentReason||null,adminNotes:this.formChangeRequest.adminNotes||null}),await this.loadOrder(),this.closeDialog()}catch(e){console.error("Failed to update adjustment:",e)}}async approveChange(){let o=this.order();if(o)try{await this.orderRpc.approveChangeRequest({year:this.configService.currentActiveYear(),userAuthId:o.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminNotes:this.formChangeRequest.adminNotes||null}),await this.loadOrder(),this.closeDialog()}catch(e){console.error("Failed to approve change request:",e)}}async denyChange(){let o=this.order();if(o&&this.formChangeRequest.adminNotes.trim())try{await this.orderRpc.denyChangeRequest({year:this.configService.currentActiveYear(),userAuthId:o.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminNotes:this.formChangeRequest.adminNotes}),await this.loadOrder(),this.closeDialog()}catch(e){console.error("Failed to deny change request:",e)}}clearError(){this.error.set(null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=R({type:i,selectors:[["app-admin-order-detail"]],inputs:{orderId:[1,"orderId"]},decls:10,vars:9,consts:[[1,"admin-order-detail-container"],[1,"loading-state"],[1,"error-banner"],[1,"order-content"],[1,"modal-overlay"],[1,"spinner"],["type","button",1,"btn-close",3,"click"],[1,"order-header"],[1,"header-left"],["routerLink","/admin/orders",1,"back-link"],[1,"order-meta"],[1,"user-id"],[1,"status-badge",3,"ngClass"],[1,"header-actions"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"info-card","user-info-card"],[1,"info-card","status-card"],[1,"status-details"],[1,"detail-row"],[1,"label"],[1,"value","status-badge",3,"ngClass"],[1,"value"],[1,"alert","alert-danger"],[1,"info-card","items-card"],[1,"card-header"],["type","button",1,"btn","btn-danger-outline","btn-sm"],[1,"items-section"],[1,"empty-state"],[1,"info-card"],[1,"info-card","pricing-card"],[1,"info-card","payments-card"],[1,"info-card","waitlist-card"],[1,"info-card","change-requests-card"],[1,"info-card","history-card"],[1,"user-details"],[1,"value",3,"ngClass"],[1,"remaining-time"],["type","button",1,"btn","btn-danger-outline","btn-sm",3,"click"],[1,"section-title"],[1,"item-count"],[1,"items-list"],[1,"item-card","locked"],[1,"item-header"],[1,"class-name"],[1,"item-status-badge",3,"ngClass"],[1,"item-details"],[1,"detail-item"],[3,"options","showEmpty"],[1,"item-card"],[1,"item-card","pending"],[3,"screenshots"],[1,"pricing-details"],[1,"pricing-row"],[1,"discounts-section"],[1,"pricing-row","total-row"],[1,"value","total"],[1,"pricing-row","balance-row",3,"ngClass"],[1,"value","balance"],[1,"discounts-header"],[1,"pricing-row","discount-row"],[1,"value","text-success"],[1,"payments-table"],[1,"amount"],[1,"method-badge"],[1,"waitlist-list"],[1,"waitlist-item"],[1,"waitlist-header"],[1,"waitlist-details"],[1,"change-requests-list"],[1,"change-request-item",3,"ngClass"],[1,"request-header"],[1,"request-info"],[1,"request-id"],[1,"request-status-badge",3,"ngClass"],[1,"request-details"],[1,"request-actions-list"],[1,"request-action-row"],[1,"request-meta"],[1,"meta-item"],[1,"request-actions"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"history-timeline"],[1,"history-event"],[1,"event-time"],[1,"event-details"],[1,"event-action"],[1,"event-metadata"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-header"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","payment-amount"],["type","text","id","payment-amount","name","amount","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text"],["for","payment-method"],["id","payment-method","name","method","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","zelle"],["value","check"],["value","cash"],["value","other"],["for","payment-reference"],["type","text","id","payment-reference","name","reference","placeholder","Confirmation number, check number, etc.",1,"form-control",3,"ngModelChange","ngModel"],["for","payment-notes"],["id","payment-notes","name","notes","rows","3","placeholder","Optional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"spinner-small"],[1,"items-checklist"],[1,"checkbox-item"],["for","cancel-reason"],["id","cancel-reason","name","reason","rows","3","placeholder","Enter reason for cancellation...","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-warning"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","checkbox",3,"change","checked"],[1,"item-info"],[1,"student-name"],[1,"read-only-value"],["for","adjustment-amount"],["type","text","id","adjustment-amount","name","adjustment","placeholder","0.00 (positive = fee, negative = credit)",1,"form-control",3,"ngModelChange","ngModel"],["for","adjustment-reason"],["id","adjustment-reason","name","adjustmentReason","rows","2","placeholder","Explain the adjustment...",1,"form-control",3,"ngModelChange","ngModel"],["for","adjustment-notes"],["id","adjustment-notes","name","notes","rows","2","placeholder","Optional notes (visible to user)...",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-info"],[1,"items-list-readonly"],[1,"item-row"],["for","approve-notes"],["id","approve-notes","name","notes","rows","3","placeholder","Optional notes...",1,"form-control",3,"ngModelChange","ngModel"],["for","deny-notes"],["id","deny-notes","name","notes","rows","3","placeholder","Please provide a reason for denying this request...","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,d){e&1&&(t(0,"div",0),u(1,ye,4,0,"div",1),u(2,Se,6,1,"div",2),u(3,ot,52,22,"div",3),u(4,lt,42,9,"div",4),u(5,ut,30,6,"div",4),u(6,Ct,23,5,"div",4),u(7,bt,37,8,"div",4),u(8,Mt,33,6,"div",4),u(9,It,27,6,"div",4),n()),e&2&&(r(),_(d.loading()?1:-1),r(),_(d.error()&&!d.loading()?2:-1),r(),_(d.order()&&!d.loading()?3:-1),r(),_(d.dialogMode()==="record-payment"?4:-1),r(),_(d.dialogMode()==="cancel-items"?5:-1),r(),_(d.dialogMode()==="remove-waitlist"?6:-1),r(),_(d.dialogMode()==="update-adjustment"?7:-1),r(),_(d.dialogMode()==="approve-change"?8:-1),r(),_(d.dialogMode()==="deny-change"?9:-1))},dependencies:[L,N,oe,X,te,ne,H,ee,J,Z,ie,Q,K,F,ae,re],styles:[".admin-order-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:15px;border-radius:4px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:24px;cursor:pointer;color:inherit}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.header-left[_ngcontent-%COMP%]{flex:1}.back-link[_ngcontent-%COMP%]{color:#3498db;text-decoration:none;margin-bottom:10px;display:inline-block}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.order-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:10px 0;font-size:28px}.order-meta[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;margin-top:10px}.user-id[_ngcontent-%COMP%]{color:#666;font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.info-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;color:#333}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.user-details[_ngcontent-%COMP%], .status-details[_ngcontent-%COMP%], .pricing-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-size:12px;font-weight:600;text-transform:uppercase;display:inline-block}.status-submitted[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-paid[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-cancelled[_ngcontent-%COMP%], .status-refunded[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-partial[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.status-empty[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.remaining-time[_ngcontent-%COMP%]{font-size:12px;color:#666}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-top:15px}.alert-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.alert-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.items-section[_ngcontent-%COMP%]{margin-bottom:30px}.items-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:15px;color:#333}.item-count[_ngcontent-%COMP%]{color:#666;font-weight:400;font-size:14px}.items-list[_ngcontent-%COMP%]{display:grid;gap:12px}.item-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:15px}.item-card.locked[_ngcontent-%COMP%]{background:#f3e5f5;border-color:#ce93d8}.item-card.pending[_ngcontent-%COMP%]{background:#fff3cd;border-color:#ffeaa7}.item-card.cancelled[_ngcontent-%COMP%]{background:#f8d7da;border-color:#f5c6cb;opacity:.7}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.class-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.item-status-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:3px;font-size:11px;font-weight:600;text-transform:uppercase}.item-status-locked[_ngcontent-%COMP%]{background:#7b1fa2;color:#fff}.item-status-submitted[_ngcontent-%COMP%]{background:#ffc107;color:#000}.item-status-paid[_ngcontent-%COMP%]{background:#28a745;color:#fff}.item-status-cancelled[_ngcontent-%COMP%], .item-status-refunded[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:14px}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.option-badge[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:2px 8px;border-radius:3px;font-size:11px;margin-right:4px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.pricing-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0}.pricing-row.total-row[_ngcontent-%COMP%]{border-top:2px solid #dee2e6;padding-top:12px;margin-top:8px;font-size:18px;font-weight:600}.pricing-row.balance-row[_ngcontent-%COMP%]{border-top:2px solid #dee2e6;padding-top:12px;margin-top:8px;font-size:18px;font-weight:700}.discounts-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;border-radius:4px;margin:8px 0}.discounts-header[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;color:#666}.discount-row[_ngcontent-%COMP%]{padding:4px 0}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #dee2e6}.payments-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600}.method-badge[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:4px 8px;border-radius:3px;font-size:12px;text-transform:uppercase}.waitlist-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.waitlist-item[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:15px}.waitlist-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.promoted-badge[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:4px 8px;border-radius:3px;font-size:12px;font-weight:600}.waitlist-details[_ngcontent-%COMP%]{margin-bottom:10px}.history-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.history-event[_ngcontent-%COMP%]{display:flex;gap:15px;padding:12px;background:#f8f9fa;border-radius:6px}.event-time[_ngcontent-%COMP%]{color:#666;font-size:12px;white-space:nowrap;min-width:150px}.event-details[_ngcontent-%COMP%]{flex:1}.event-action[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.event-metadata[_ngcontent-%COMP%]{color:#666;font-size:14px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.btn-primary-outline[_ngcontent-%COMP%]{background:#fff;color:#007bff;border:1px solid #007bff}.btn-primary-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6268}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}.btn-danger-outline[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:1px solid #dc3545}.btn-danger-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc3545;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #dee2e6}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:8px;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.form-text[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:12px;color:#6c757d}.items-checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto;padding:8px;background:#f8f9fa;border-radius:4px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px;cursor:pointer}.checkbox-item[_ngcontent-%COMP%]:hover{background:#e9ecef;border-radius:4px}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.item-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.read-only-value[_ngcontent-%COMP%]{padding:8px 12px;background:#f8f9fa;border-radius:4px;font-weight:500}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px;padding-top:20px;border-top:1px solid #dee2e6}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite;margin-right:8px}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.change-requests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.change-request-item[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:8px;padding:16px;background:#f8f9fa}.change-request-item.status-pending[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.change-request-item.status-approved[_ngcontent-%COMP%]{border-left:4px solid #28a745}.change-request-item.status-denied[_ngcontent-%COMP%]{border-left:4px solid #dc3545;opacity:.7}.change-request-item[_ngcontent-%COMP%]   .request-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.change-request-item[_ngcontent-%COMP%]   .request-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.change-request-item[_ngcontent-%COMP%]   .request-id[_ngcontent-%COMP%]{font-weight:600;color:#495057}.request-status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.request-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.request-status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.request-status-badge.status-denied[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.change-request-item[_ngcontent-%COMP%]   .request-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.change-request-item[_ngcontent-%COMP%]   .request-actions-list[_ngcontent-%COMP%]{font-size:14px}.change-request-item[_ngcontent-%COMP%]   .request-action-row[_ngcontent-%COMP%]{margin-left:16px;color:#666;padding:4px 0}.change-request-item[_ngcontent-%COMP%]   .request-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:13px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;gap:8px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:130px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.change-request-item[_ngcontent-%COMP%]   .request-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding-top:12px;border-top:1px solid #dee2e6}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.items-list-readonly[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;border-radius:4px}.items-list-readonly[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{padding:4px 0;color:#495057}"]})};export{ge as AdminOrderDetailComponent};
