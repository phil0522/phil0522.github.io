import{a as Pe,b as Ie,c as Ae,d as Ee,e as ke,f as W,g as j}from"./chunk-6CU2GE2E.js";import{a as De}from"./chunk-WBANG4HG.js";import{a as we}from"./chunk-6NFWQA35.js";import{a as Me}from"./chunk-UDKHSBCD.js";import{a as me,b as pe,c as ue,d as _e,e as ge,f as Ce,g as xe,i as fe,j as he,k as ve,m as ye,q as be}from"./chunk-CUVJ762Q.js";import{a as Oe,b as Se}from"./chunk-UZZ5MCL4.js";import"./chunk-LMHMUSIE.js";import{a as le,b as ce}from"./chunk-RYIKU5Y3.js";import{E as Z,F as Q,G as X,H as ee,O as te,P as ne,Q as ie,R as oe,Y as re,Z as ae,_ as de,aa as se,b as K,d as Y,j as J}from"./chunk-YGANRGOF.js";import"./chunk-UYHN5VVP.js";import{$a as V,Ab as y,Bb as z,Ea as d,Eb as O,Fb as S,Gb as M,Kb as U,N as T,Ob as f,Pa as $,Rb as H,S as m,T as p,Za as u,_a as _,bb as A,cb as E,da as I,db as x,eb as n,fb as i,gb as D,kb as v,mb as g,ob as l,yb as a,zb as C}from"./chunk-AFX6RXNX.js";import"./chunk-Q7L6LLAK.js";var Le=r=>({"text-warning":r}),We=(r,t)=>t.sessionId,Fe=(r,t)=>t.id,ze=(r,t)=>t.sessionId+"-"+t.studentId;function Be(r,t){r&1&&(n(0,"div",2),D(1,"div",6),n(2,"p"),a(3,"Loading order details..."),i()())}function Ge(r,t){if(r&1){let e=v();n(0,"div",3)(1,"strong"),a(2,"Error:"),i(),a(3),n(4,"button",7),g("click",function(){m(e);let o=l();return p(o.clearError())}),a(5,"\xD7"),i()()}if(r&2){let e=l();d(3),y(" ",e.error()," ")}}function $e(r,t){if(r&1&&(n(0,"div",18)(1,"span",10),a(2,"Phone:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l(3);d(4),C(e.userData().phone)}}function Ue(r,t){if(r&1&&(n(0,"div",18)(1,"span",10),a(2,"Address:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l(3);d(4),C(e.userData().address)}}function He(r,t){if(r&1&&(n(0,"div",15)(1,"h2"),a(2,"User Information"),i(),n(3,"div",28)(4,"div",18)(5,"span",10),a(6,"Name:"),i(),n(7,"span",11),a(8),i()(),n(9,"div",18)(10,"span",10),a(11,"Email:"),i(),n(12,"span",11),a(13),i()(),u(14,$e,5,1,"div",18),u(15,Ue,5,1,"div",18),i()()),r&2){let e=l(2);d(8),C(e.userData().displayName),d(5),C(e.userData().email),d(),_(e.userData().phone?14:-1),d(),_(e.userData().address?15:-1)}}function Ke(r,t){if(r&1&&(n(0,"span",30),a(1),i()),r&2){let e=l(3);d(),z(" (",e.remainingLockTime().hours,"h ",e.remainingLockTime().minutes,"m remaining) ")}}function Ye(r,t){if(r&1&&(n(0,"div",18)(1,"span",10),a(2,"Lock Expires:"),i(),n(3,"span",29),a(4),u(5,Ke,2,2,"span",30),i()()),r&2){let e=l(2);d(3),x("ngClass",U(3,Le,e.isExpiringSoon())),d(),y(" ",e.formatDateTime(e.order().lockExpiresAt)," "),d(),_(e.remainingLockTime()?5:-1)}}function Je(r,t){r&1&&(n(0,"div",20)(1,"p"),a(2,"No items in this order."),i()())}function Ze(r,t){if(r&1){let e=v();n(0,"app-ledger-order-items",31),g("cancelItemsClick",function(){m(e);let o=l(2);return p(o.openCancelItemsDialog())})("confirmScreenshot",function(o){m(e);let c=l(2);return p(c.confirmScreenshotPayment(o))})("rejectScreenshot",function(o){m(e);let c=l(2);return p(c.rejectScreenshotPayment(o))}),i()}if(r&2){let e=l(2);x("lockedItems",e.lockedItemsTransformed())("submittedItems",e.submittedItemsTransformed())("securedItems",e.securedItemsTransformed())("paidItems",e.paidItemsTransformed())("editable",!1)("isAdmin",!0)("screenshotGroups",e.screenshotGroups())}}function Qe(r,t){if(r&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td",33),a(4),i(),n(5,"td")(6,"span",34),a(7),i()(),n(8,"td"),a(9),i(),n(10,"td"),a(11),i()()),r&2){let e=t.$implicit,s=l(3);d(2),C(s.formatDateTime(e.recordedAt)),d(2),C(s.formatCurrency(e.amount)),d(3),C(e.method),d(2),C(e.reference),d(2),C(e.notes||"-")}}function Xe(r,t){if(r&1&&(n(0,"div",22)(1,"h2"),a(2,"Payment History"),i(),n(3,"table",32)(4,"thead")(5,"tr")(6,"th"),a(7,"Date"),i(),n(8,"th"),a(9,"Amount"),i(),n(10,"th"),a(11,"Method"),i(),n(12,"th"),a(13,"Reference"),i(),n(14,"th"),a(15,"Notes"),i()()(),n(16,"tbody"),A(17,Qe,12,5,"tr",null,V),i()()()),r&2){let e=l(2);d(17),E(e.payments())}}function et(r,t){if(r&1){let e=v();n(0,"div",36)(1,"div",37)(2,"span",38),a(3),i()(),n(4,"div",39)(5,"div",40)(6,"span",10),a(7,"Joined:"),i(),n(8,"span",11),a(9),i()()(),n(10,"button",41),g("click",function(){let o=m(e).$implicit,c=l(3);return p(c.openRemoveWaitlistDialog(o.sessionId))}),a(11," Remove Entry "),i()()}if(r&2){let e=t.$implicit,s=l(3);d(3),C(s.getClassName(e.sessionId)),d(6),C(s.formatDateTime(e.joinedAt))}}function tt(r,t){if(r&1&&(n(0,"div",23)(1,"h2"),a(2,"Waitlist Entries"),i(),n(3,"div",35),A(4,et,12,2,"div",36,We),i()()),r&2){let e=l(2);d(4),E(e.waitlistEntries())}}function nt(r,t){if(r&1&&(n(0,"div",50),a(1),i()),r&2){let e=t.$implicit,s=l(4);d(),y(" ",s.getActionDescription(e)," ")}}function it(r,t){if(r&1&&(n(0,"div",52)(1,"span",10),a(2,"Reason:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l().$implicit;d(4),C(e.reason)}}function ot(r,t){if(r&1&&(n(0,"div",52)(1,"span",10),a(2,"Admin Adjustment:"),i(),n(3,"span",29),a(4),i()()),r&2){let e=l().$implicit,s=l(3);d(3),x("ngClass",e.adminAdjustment<0?"text-success":"text-danger"),d(),z(" ",e.adminAdjustment<0?"-":"+","",s.formatCurrency(s.Math.abs(e.adminAdjustment))," ")}}function rt(r,t){if(r&1&&(n(0,"div",52)(1,"span",10),a(2,"Adjustment Reason:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l().$implicit;d(4),C(e.adminAdjustmentReason)}}function at(r,t){if(r&1&&(n(0,"div",52)(1,"span",10),a(2,"Processed:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l().$implicit,s=l(3);d(4),C(s.formatDateTime(e.processedAt))}}function dt(r,t){if(r&1&&(n(0,"div",52)(1,"span",10),a(2,"Admin Notes:"),i(),n(3,"span",11),a(4),i()()),r&2){let e=l().$implicit;d(4),C(e.adminNotes)}}function st(r,t){if(r&1){let e=v();n(0,"button",54),g("click",function(){m(e);let o=l().$implicit,c=l(3);return p(c.openUpdateAdjustmentDialog(o))}),a(1," Edit Adjustment "),i(),n(2,"button",55),g("click",function(){m(e);let o=l().$implicit,c=l(3);return p(c.openApproveChangeDialog(o))}),a(3," Approve "),i(),n(4,"button",41),g("click",function(){m(e);let o=l().$implicit,c=l(3);return p(c.openDenyChangeDialog(o))}),a(5," Deny "),i()}}function lt(r,t){if(r&1&&(n(0,"div",43)(1,"div",44)(2,"div",45)(3,"span",46),a(4),i(),n(5,"span",47),a(6),i()()(),n(7,"div",48)(8,"div",49)(9,"strong"),a(10,"Actions:"),i(),A(11,nt,2,1,"div",50,V),i(),n(13,"div",51)(14,"div",52)(15,"span",10),a(16,"Requested:"),i(),n(17,"span",11),a(18),i()(),u(19,it,5,1,"div",52),u(20,ot,5,3,"div",52),u(21,rt,5,1,"div",52),u(22,at,5,1,"div",52),u(23,dt,5,1,"div",52),i()(),n(24,"div",53),u(25,st,6,0),i()()),r&2){let e=t.$implicit,s=l(3);x("ngClass","status-"+e.status),d(4),C(e.id),d(),x("ngClass","status-"+e.status),d(),y(" ",s.getChangeStatusLabel(e.status)," "),d(5),E(e.actions),d(7),C(s.formatDateTime(e.requestedAt)),d(),_(e.reason?19:-1),d(),_(e.adminAdjustment!==0?20:-1),d(),_(e.adminAdjustmentReason?21:-1),d(),_(e.processedAt?22:-1),d(),_(e.adminNotes?23:-1),d(2),_(e.status==="pending"?25:-1)}}function ct(r,t){if(r&1&&(n(0,"div",24)(1,"h2"),a(2,"Change Requests"),i(),n(3,"div",42),A(4,lt,26,11,"div",43,Fe),i()()),r&2){let e=l(2);d(4),E(e.changeRequests())}}function mt(r,t){if(r&1&&(n(0,"div",63),a(1),i()),r&2){let e=l().$implicit;d(),C(e.details)}}function pt(r,t){r&1&&(n(0,"span",69),a(1,"Lunch"),i())}function ut(r,t){r&1&&(n(0,"span",69),a(1,"Extended Care"),i())}function _t(r,t){if(r&1&&(n(0,"span",68),u(1,pt,2,0,"span",69),u(2,ut,2,0,"span",69),i()),r&2){let e=l().$implicit;d(),_(e.options.lunch?1:-1),d(),_(e.options.extendedCare?2:-1)}}function gt(r,t){if(r&1&&(n(0,"div",65)(1,"span",66),a(2),i(),n(3,"span",67),a(4),i(),u(5,_t,3,2,"span",68),i()),r&2){let e=t.$implicit,s=l(6);d(2),C(e.className),d(2),C(s.getStudentName(e.studentId)),d(),_(e.options?5:-1)}}function Ct(r,t){if(r&1&&(n(0,"div",64),A(1,gt,6,3,"div",65,V),i()),r&2){let e=l().$implicit;d(),E(e.affectedItems)}}function xt(r,t){if(r&1&&(n(0,"div",59)(1,"div",60),a(2),i(),n(3,"div",61)(4,"div",62),a(5),i(),u(6,mt,2,1,"div",63),u(7,Ct,3,0,"div",64),i()()),r&2){let e=t.$implicit,s=l(4);d(2),C(s.formatDateTime(e.timestamp)),d(3),C(e.action),d(),_(e.details?6:-1),d(),_(e.affectedItems&&e.affectedItems.length>0?7:-1)}}function ft(r,t){if(r&1&&(n(0,"div",58),A(1,xt,8,4,"div",59,V),i()),r&2){let e=l(3);d(),E(e.reversedHistory())}}function ht(r,t){if(r&1){let e=v();n(0,"div",25)(1,"div",56),g("click",function(){m(e);let o=l(2);return p(o.historyExpanded.set(!o.historyExpanded()))}),n(2,"h2"),a(3),i(),n(4,"button",57),a(5),i()(),u(6,ft,3,0,"div",58),i()}if(r&2){let e=l(2);d(3),y("Order History (",e.reversedHistory().length,")"),d(2),y(" ",e.historyExpanded()?"\u25BC":"\u25B6"," "),d(),_(e.historyExpanded()?6:-1)}}function vt(r,t){if(r&1){let e=v();n(0,"div",4)(1,"div",8)(2,"div",9)(3,"span",10),a(4,"User ID:"),i(),n(5,"span",11),a(6),i()(),n(7,"span",12),a(8),i()(),n(9,"div",13)(10,"div",14),u(11,He,16,4,"div",15),n(12,"div",16)(13,"h2"),a(14,"Order Status"),i(),n(15,"div",17)(16,"div",18)(17,"span",10),a(18,"Status:"),i(),n(19,"span",19),a(20),i()(),u(21,Ye,6,5,"div",18),n(22,"div",18)(23,"span",10),a(24,"Created:"),i(),n(25,"span",11),a(26),i()(),n(27,"div",18)(28,"span",10),a(29,"Last Updated:"),i(),n(30,"span",11),a(31),i()()()(),u(32,Je,3,0,"div",20)(33,Ze,1,7,"app-ledger-order-items",21),u(34,Xe,19,0,"div",22),u(35,tt,6,0,"div",23),u(36,ct,6,0,"div",24),u(37,ht,7,3,"div",25),i(),n(38,"div",26)(39,"app-ledger-settlement-sidebar",27),g("recordPaymentClick",function(){m(e);let o=l();return p(o.openRecordPaymentDialog())})("addAdjustmentClick",function(){m(e);let o=l();return p(o.openAddAdjustmentDialog())}),i()()()()}if(r&2){let e=l();d(6),C(e.order().userDisplayId),d(),x("ngClass",e.getStatusBadgeClass(e.getOrderStatus(e.order()))),d(),y(" ",e.getStatusLabel(e.getOrderStatus(e.order()))," "),d(3),_(e.userData()?11:-1),d(8),x("ngClass",e.getStatusBadgeClass(e.getOrderStatus(e.order()))),d(),y(" ",e.getStatusLabel(e.getOrderStatus(e.order()))," "),d(),_(e.order().lockExpiresAt?21:-1),d(5),C(e.formatDateTime(e.order().createdAt)),d(5),C(e.formatDateTime(e.order().updatedAt)),d(),_(e.allItems().length===0?32:33),d(2),_(e.payments().length>0?34:-1),d(),_(e.waitlistEntries().length>0?35:-1),d(),_(e.changeRequests().length>0?36:-1),d(),_(e.reversedHistory().length>0?37:-1),d(2),x("isAdmin",!0)("canRecordPayment",e.canRecordPayment())("orderSummary",e.orderSummaryData())}}function yt(r,t){if(r&1&&(n(0,"div",85)(1,"div",95)(2,"span"),a(3,"Original Amount Due:"),i(),n(4,"span"),a(5),i()(),n(6,"div",96)(7,"span"),a(8,"Cash Discount (3%):"),i(),n(9,"span"),a(10),i()(),n(11,"div",97)(12,"span"),a(13,"Cash Amount Due:"),i(),n(14,"span"),a(15),i()(),n(16,"small",78),a(17),i()()),r&2){let e=l(2);d(5),C(e.formatCurrency(e.amountDue())),d(5),y("-",e.formatCurrency(e.cashDiscount())),d(5),C(e.formatCurrency(e.cashAmountDue())),d(2),y(" A credit of ",e.formatCurrency(e.cashDiscount())," will be automatically applied. ")}}function bt(r,t){if(r&1){let e=v();n(0,"div",90)(1,"label",98)(2,"input",99),M("ngModelChange",function(o){m(e);let c=l(2);return S(c.formPayment.isDepositConfirmation,o)||(c.formPayment.isDepositConfirmation=o),p(o)}),i(),n(3,"span"),a(4,"Deposit Only (mark as secured, not fully paid)"),i()(),n(5,"small",78),a(6,' Check this for cash deposit confirmations. Items will be marked as "secured" instead of "paid", and user keeps their spot until full payment. '),i()()}if(r&2){let e=l(2);d(2),O("ngModel",e.formPayment.isDepositConfirmation)}}function Ot(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function St(r,t){r&1&&(D(0,"span",100),a(1," Recording... "))}function Mt(r,t){r&1&&a(0," Record Payment ")}function wt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Record Payment"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.recordPayment())}),n(9,"div",75)(10,"label",76),a(11,"Amount *"),i(),n(12,"input",77),M("ngModelChange",function(o){m(e);let c=l();return S(c.formPayment.amountInput,o)||(c.formPayment.amountInput=o),p(o)}),i(),n(13,"small",78),a(14),i()(),n(15,"div",75)(16,"label",79),a(17,"Payment Method *"),i(),n(18,"select",80),M("ngModelChange",function(o){m(e);let c=l();return S(c.formPayment.method,o)||(c.formPayment.method=o),p(o)}),g("ngModelChange",function(o){m(e);let c=l();return p(c.onPaymentMethodChange(o))}),n(19,"option",81),a(20,"Zelle"),i(),n(21,"option",82),a(22,"Check"),i(),n(23,"option",83),a(24,"Cash (3% off)"),i(),n(25,"option",84),a(26,"Other"),i()()(),u(27,yt,18,4,"div",85),n(28,"div",75)(29,"label",86),a(30," Reference (optional) "),i(),n(31,"input",87),M("ngModelChange",function(o){m(e);let c=l();return S(c.formPayment.reference,o)||(c.formPayment.reference=o),p(o)}),i()(),n(32,"div",75)(33,"label",88),a(34,"Notes"),i(),n(35,"textarea",89),M("ngModelChange",function(o){m(e);let c=l();return S(c.formPayment.notes,o)||(c.formPayment.notes=o),p(o)}),i()(),u(36,bt,7,1,"div",90),u(37,Ot,2,1,"div",91),n(38,"div",92)(39,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(40," Cancel "),i(),n(41,"button",94),u(42,St,2,0)(43,Mt,1,0),i()()()()()()}if(r&2){let e=l();d(12),O("ngModel",e.formPayment.amountInput),d(2),y(" Amount due: ",e.formatCurrency(e.amountDue())," "),d(4),O("ngModel",e.formPayment.method),d(9),_(e.formPayment.method==="cash"&&e.cashDiscount()>0?27:-1),d(4),O("ngModel",e.formPayment.reference),d(4),O("ngModel",e.formPayment.notes),d(),_(e.submittedItems().length>0?36:-1),d(),_(e.actionError()?37:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()),d(),_(e.actionLoading()?42:43)}}function Dt(r,t){if(r&1){let e=v();n(0,"label",102)(1,"input",106),g("change",function(){let o=m(e).$implicit,c=l(2);return p(c.toggleItemSelection(o))}),i(),n(2,"span",107)(3,"span",38),a(4),i(),a(5," - "),n(6,"span",108),a(7),i(),n(8,"span",109),a(9),i()()()}if(r&2){let e=t.$implicit,s=l(2);d(),x("checked",s.isItemSelected(e)),d(3),C(s.getClassName(e.sessionId)),d(3),C(s.getStudentName(e.studentId)),d(),x("ngClass",s.getItemStatusBadgeClass(e.status)),d(),y(" ",s.getItemStatusLabel(e.status)," ")}}function Pt(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function It(r,t){r&1&&(D(0,"span",100),a(1," Cancelling... "))}function At(r,t){if(r&1&&a(0),r&2){let e=l(2);y(" Cancel ",e.selectedItems().size," Item(s) ")}}function Et(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Cancel Order Items"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.cancelItems())}),n(9,"div",75)(10,"label"),a(11,"Select items to cancel:"),i(),n(12,"div",101),A(13,Dt,10,5,"label",102,ze),i()(),n(15,"div",75)(16,"label",103),a(17,"Cancellation Reason *"),i(),n(18,"textarea",104),M("ngModelChange",function(o){m(e);let c=l();return S(c.formCancel.reason,o)||(c.formCancel.reason=o),p(o)}),i()(),u(19,Pt,2,1,"div",91),n(20,"div",92)(21,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(22," Cancel "),i(),n(23,"button",105),u(24,It,2,0)(25,At,1,1),i()()()()()()}if(r&2){let e=l();d(13),E(e.cancellableItems()),d(5),O("ngModel",e.formCancel.reason),d(),_(e.actionError()?19:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()||e.selectedItems().size===0),d(),_(e.actionLoading()?24:25)}}function kt(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function Tt(r,t){r&1&&(D(0,"span",100),a(1," Removing... "))}function Vt(r,t){r&1&&a(0," Remove Entry ")}function Rt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Remove Waitlist Entry"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.removeWaitlist())}),n(9,"div",75)(10,"label"),a(11,"Class:"),i(),n(12,"div",110),a(13),i()(),n(14,"div",111),a(15," This will remove the user from the waitlist for this class. "),i(),u(16,kt,2,1,"div",91),n(17,"div",92)(18,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(19," Cancel "),i(),n(20,"button",105),u(21,Tt,2,0)(22,Vt,1,0),i()()()()()()}if(r&2){let e=l();d(13),y(" ",e.getClassName(e.formRemoveWaitlist.sessionId)," "),d(3),_(e.actionError()?16:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()),d(),_(e.actionLoading()?21:22)}}function jt(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function qt(r,t){r&1&&(D(0,"span",100),a(1," Saving... "))}function Nt(r,t){r&1&&a(0," Save Adjustment ")}function Lt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Update Adjustment"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.updateAdjustment())}),n(9,"div",75)(10,"label"),a(11,"Request ID:"),i(),n(12,"div",110),a(13),i()(),n(14,"div",75)(15,"label",112),a(16,"Extra Fee (+) or Credit (-)"),i(),n(17,"input",113),M("ngModelChange",function(o){m(e);let c=l();return S(c.formChangeRequest.adjustmentInput,o)||(c.formChangeRequest.adjustmentInput=o),p(o)}),i(),n(18,"small",78),a(19,"Positive values add a fee, negative values give a credit"),i()(),n(20,"div",75)(21,"label",114),a(22,"Reason"),i(),n(23,"textarea",115),M("ngModelChange",function(o){m(e);let c=l();return S(c.formChangeRequest.adjustmentReason,o)||(c.formChangeRequest.adjustmentReason=o),p(o)}),i()(),n(24,"div",75)(25,"label",116),a(26,"Admin Notes"),i(),n(27,"textarea",117),M("ngModelChange",function(o){m(e);let c=l();return S(c.formChangeRequest.adminNotes,o)||(c.formChangeRequest.adminNotes=o),p(o)}),i()(),n(28,"div",118),a(29," The user will see this adjustment. You can update it multiple times before approving. "),i(),u(30,jt,2,1,"div",91),n(31,"div",92)(32,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(33," Cancel "),i(),n(34,"button",94),u(35,qt,2,0)(36,Nt,1,0),i()()()()()()}if(r&2){let e=l();d(13),C(e.formChangeRequest.requestId),d(4),O("ngModel",e.formChangeRequest.adjustmentInput),d(6),O("ngModel",e.formChangeRequest.adjustmentReason),d(4),O("ngModel",e.formChangeRequest.adminNotes),d(3),_(e.actionError()?30:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()),d(),_(e.actionLoading()?35:36)}}function Wt(r,t){if(r&1&&(n(0,"div",120),a(1),i()),r&2){let e=t.$implicit,s=l(2);d(),C(s.getActionDescription(e))}}function Ft(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function zt(r,t){r&1&&(D(0,"span",100),a(1," Approving... "))}function Bt(r,t){r&1&&a(0," Approve Changes ")}function Gt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Approve Change Request"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.approveChange())}),n(9,"div",75)(10,"label"),a(11,"Request ID:"),i(),n(12,"div",110),a(13),i()(),n(14,"div",75)(15,"label"),a(16,"Actions to apply:"),i(),n(17,"div",119),A(18,Wt,2,1,"div",120,V),i()(),n(20,"div",75)(21,"label",121),a(22,"Admin Notes"),i(),n(23,"textarea",122),M("ngModelChange",function(o){m(e);let c=l();return S(c.formChangeRequest.adminNotes,o)||(c.formChangeRequest.adminNotes=o),p(o)}),i()(),n(24,"div",111),a(25," Approving will apply all changes to the order. Class removals will create vacancy holds for waitlist members. The order pricing will be recalculated. "),i(),u(26,Ft,2,1,"div",91),n(27,"div",92)(28,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(29," Cancel "),i(),n(30,"button",94),u(31,zt,2,0)(32,Bt,1,0),i()()()()()()}if(r&2){let e=l();d(13),C(e.formChangeRequest.requestId),d(5),E(e.formChangeRequest.actions),d(5),O("ngModel",e.formChangeRequest.adminNotes),d(3),_(e.actionError()?26:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()),d(),_(e.actionLoading()?31:32)}}function $t(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function Ut(r,t){r&1&&(D(0,"span",100),a(1," Denying... "))}function Ht(r,t){r&1&&a(0," Deny Request ")}function Kt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Deny Change Request"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.denyChange())}),n(9,"div",75)(10,"label"),a(11,"Request ID:"),i(),n(12,"div",110),a(13),i()(),n(14,"div",75)(15,"label",123),a(16,"Reason for Denial *"),i(),n(17,"textarea",124),M("ngModelChange",function(o){m(e);let c=l();return S(c.formChangeRequest.adminNotes,o)||(c.formChangeRequest.adminNotes=o),p(o)}),i()(),n(18,"div",118),a(19," The user will be notified that their change request was denied. No changes will be applied to their order. "),i(),u(20,$t,2,1,"div",91),n(21,"div",92)(22,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(23," Cancel "),i(),n(24,"button",105),u(25,Ut,2,0)(26,Ht,1,0),i()()()()()()}if(r&2){let e=l();d(13),C(e.formChangeRequest.requestId),d(4),O("ngModel",e.formChangeRequest.adminNotes),d(3),_(e.actionError()?20:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()||!e.formChangeRequest.adminNotes.trim()),d(),_(e.actionLoading()?25:26)}}function Yt(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function Jt(r,t){r&1&&(D(0,"span",100),a(1," Adding... "))}function Zt(r,t){if(r&1&&a(0),r&2){let e=l(2);y(" Add ",e.formAdjustment.type==="credit"?"Credit":"Fee"," ")}}function Qt(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Add Credit or Fee"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.addAdjustment())}),n(9,"div",75)(10,"label",125),a(11,"Type *"),i(),n(12,"select",126),M("ngModelChange",function(o){m(e);let c=l();return S(c.formAdjustment.type,o)||(c.formAdjustment.type=o),p(o)}),n(13,"option",127),a(14,"Credit (reduce amount due)"),i(),n(15,"option",128),a(16,"Fee (increase amount due)"),i()()(),n(17,"div",75)(18,"label",112),a(19,"Amount *"),i(),n(20,"input",129),M("ngModelChange",function(o){m(e);let c=l();return S(c.formAdjustment.amountInput,o)||(c.formAdjustment.amountInput=o),p(o)}),i(),n(21,"small",78),a(22," Enter the amount in dollars (e.g., 25.00) "),i()(),n(23,"div",75)(24,"label",114),a(25,"Reason *"),i(),n(26,"textarea",130),M("ngModelChange",function(o){m(e);let c=l();return S(c.formAdjustment.reason,o)||(c.formAdjustment.reason=o),p(o)}),i()(),n(27,"div",118),a(28),i(),u(29,Yt,2,1,"div",91),n(30,"div",92)(31,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(32," Cancel "),i(),n(33,"button",94),u(34,Jt,2,0)(35,Zt,1,1),i()()()()()()}if(r&2){let e=l();d(12),O("ngModel",e.formAdjustment.type),d(8),O("ngModel",e.formAdjustment.amountInput),d(6),O("ngModel",e.formAdjustment.reason),d(2),y(" ",e.formAdjustment.type==="credit"?"A credit will reduce the amount the user owes.":"A fee will increase the amount the user owes."," "),d(),_(e.actionError()?29:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()||!e.formAdjustment.amountInput||!e.formAdjustment.reason.trim()),d(),_(e.actionLoading()?34:35)}}function Xt(r,t){if(r&1&&(n(0,"div",91),a(1),i()),r&2){let e=l(2);d(),C(e.actionError())}}function en(r,t){r&1&&(D(0,"span",100),a(1," Rejecting... "))}function tn(r,t){r&1&&a(0," Reject Screenshot ")}function nn(r,t){if(r&1){let e=v();n(0,"div",70),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),n(1,"div",71),g("click",function(o){return m(e),p(o.stopPropagation())}),n(2,"div",72)(3,"h3"),a(4,"Reject Screenshot"),i(),n(5,"button",7),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(6,"\xD7"),i()(),n(7,"div",73)(8,"form",74),g("ngSubmit",function(){m(e);let o=l();return p(o.submitRejectScreenshot())}),n(9,"div",75)(10,"label",131),a(11,"Rejection Reason *"),i(),n(12,"textarea",132),M("ngModelChange",function(o){m(e);let c=l();return S(c.formRejectScreenshot.reason,o)||(c.formRejectScreenshot.reason=o),p(o)}),i(),n(13,"small",78),a(14," This message will be shown to the user explaining why their screenshot was rejected. "),i()(),u(15,Xt,2,1,"div",91),n(16,"div",92)(17,"button",93),g("click",function(){m(e);let o=l();return p(o.closeDialog())}),a(18," Cancel "),i(),n(19,"button",105),u(20,en,2,0)(21,tn,1,0),i()()()()()()}if(r&2){let e=l();d(12),O("ngModel",e.formRejectScreenshot.reason),d(3),_(e.actionError()?15:-1),d(2),x("disabled",e.actionLoading()),d(2),x("disabled",e.actionLoading()||!e.formRejectScreenshot.reason.trim()),d(),_(e.actionLoading()?20:21)}}var Te=class r{orderId=H.required();adminOrdersStore=T(De);orderRpc=T(re);userService=T(se);seasonService=T(de);configService=T(ae);router=T(J);notificationService=T(Me);unsubscribeOrder=null;order=I(null);loading=I(!1);error=I(null);userData=I(null);studentMap=I(new Map);actionLoading=this.orderRpc.loading;actionError=this.orderRpc.error;dialogMode=I(null);formPayment={amountInput:"",method:"zelle",reference:"",notes:"",isDepositConfirmation:!1};formCancel={reason:""};selectedItems=I(new Set);historyExpanded=I(!1);reversedHistory=f(()=>{let t=this.order()?.history;return t?[...t].reverse():[]});formRemoveWaitlist={sessionId:""};formChangeRequest={requestId:"",actions:[],adjustmentInput:"",adjustmentReason:"",adminNotes:""};formAdjustment={type:"credit",amountInput:"",reason:""};formRejectScreenshot={screenshotId:"",reason:"Please re-upload a clearer image of your payment receipt."};Math=Math;allItems=f(()=>this.order()?.items??[]);paidItems=f(()=>{let t=this.order();return t?Q(t):[]});submittedItems=f(()=>{let t=this.order();return t?Z(t):[]});securedItems=f(()=>{let t=this.order();return t?X(t):[]});lockedItems=f(()=>this.allItems().filter(t=>t.status==="locked"));cancellableItems=f(()=>[...this.lockedItems(),...this.paidItems(),...this.submittedItems(),...this.securedItems()]);waitlistEntries=f(()=>this.order()?.waitlist??[]);payments=f(()=>this.order()?.payments??[]);changeRequests=f(()=>this.order()?.changeRequests??[]);totalDue=f(()=>{let t=this.order();return t?te(t):0});amountDue=f(()=>{let t=this.order();return t?ee(t):0});cashDiscount=f(()=>{let t=this.amountDue();return t<=0?0:ie(t)});cashAmountDue=f(()=>{let t=this.amountDue();return t<=0?0:oe(t)});isExpiringSoon=f(()=>{let t=this.order();if(!t||!t.lockExpiresAt)return!1;let e=this.configService.currentTime(),s=new Date(t.lockExpiresAt),o=new Date(e),c=(s.getTime()-o.getTime())/(1e3*60*60);return c>0&&c<=12});remainingLockTime=f(()=>{let t=this.order();if(!t||!t.lockExpiresAt)return null;let e=this.configService.currentTime(),s=new Date(t.lockExpiresAt),o=new Date(e),c=s.getTime()-o.getTime();if(c<=0)return null;let P=Math.floor(c/(1e3*60*60)),w=Math.floor(c%(1e3*60*60)/(1e3*60));return{hours:P,minutes:w}});canRecordPayment=f(()=>this.amountDue()>0);transformToLedgerItem(t){return{sessionId:t.sessionId,studentId:t.studentId,studentName:this.getStudentName(t.studentId),className:this.getClassName(t.sessionId),startDate:t.snapshot?.startDate??"",endDate:t.snapshot?.endDate??"",status:t.status,options:t.options,pricing:{basePrice:t.snapshot?.priceSnapshot?.basePrice??0,lunchPrice:t.snapshot?.priceSnapshot?.lunchPrice??0,extendedCarePrice:t.snapshot?.priceSnapshot?.extendedCarePrice??0,itemTotal:t.snapshot?.priceSnapshot?.itemTotal??0}}}lockedItemsTransformed=f(()=>this.lockedItems().map(t=>this.transformToLedgerItem(t)));submittedItemsTransformed=f(()=>this.submittedItems().map(t=>this.transformToLedgerItem(t)));securedItemsTransformed=f(()=>this.securedItems().map(t=>this.transformToLedgerItem(t)));paidItemsTransformed=f(()=>this.paidItems().map(t=>this.transformToLedgerItem(t)));screenshotGroups=f(()=>{let t=this.order();if(!t)return[];let e=t.paymentScreenshots??[],s=this.submittedItemsTransformed();return e.map(o=>{let c=new Set(o.lockedItemKeys),P=s.filter(w=>{let B=`${w.sessionId}:${w.studentId}`;return c.has(B)});return{screenshot:o,items:P}}).filter(o=>o.items.length>0)});orderSummaryData=f(()=>{let t=this.order(),e=t?.pricing;if(!e)return null;let o=[...this.lockedItemsTransformed(),...this.submittedItemsTransformed(),...this.securedItemsTransformed(),...this.paidItemsTransformed()].reduce((h,b)=>h+b.pricing.itemTotal,0),c=new Map;for(let h of e.discounts){let b=c.get(h.type)??0;c.set(h.type,b+h.amount)}for(let h of t.processingFees??[]){let b=c.get(h.type)??0;c.set(h.type,b+h.amount)}let P=[],w={returning_family:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467} Returning Family",returning_student:"\u{1F393} Returning Student",sibling:"\u{1F46B} Sibling Discount",multi_session:"\u{1F4C5} Multi-Session",coupon:"\u{1F39F}\uFE0F Coupon Credit",manual:"\u270F\uFE0F Manual Adjustment",referral:"\u{1F91D} Referral Bonus",cash_discount:"\u{1F4B5} Cash Discount (3%)",adjustment:"\u270F\uFE0F Adjustment",forfeited_deposit:"\u26A0\uFE0F Forfeited Deposit"};for(let[h,b]of c)b!==0&&P.push({type:h,label:w[h]??h,amount:b});let Ve=(t.paymentScreenshots??[]).reduce((h,b)=>h+(b.claimedAmountCents??0),0),q=(t.payments??[]).reduce((h,b)=>h+b.amount,0),R=this.securedItems().length,N=this.paidItems().length,Re=5e3,L=0,F=0;R>0&&N===0?L=q:R===0&&N>0?F=q:R>0&&N>0&&(L=Math.min(R*Re,q),F=q-L);let je=[{status:"locked",label:"Awaiting Payment",count:this.lockedItems().length,total:this.lockedItemsTransformed().reduce((h,b)=>h+b.pricing.itemTotal,0)},{status:"submitted",label:"Pending Verification",count:this.submittedItems().length,total:Ve},{status:"secured",label:"Deposit Confirmed",count:R,total:L},{status:"paid",label:"Payment Confirmed",count:N,total:F}],qe=P.reduce((h,b)=>h+b.amount,0),G=t.totalPaid??0,Ne=Math.max(0,o+qe-G);return{subtotal:o,totalPaid:G,discounts:P,amountDue:Ne,statusCounts:je}});formatCurrency=ke;formatDate=le;formatDateTime=ce;getOrderStatus=ne;getStatusBadgeClass=Pe;getStatusLabel=Ie;getItemStatusBadgeClass=Ae;getItemStatusLabel=Ee;async ngOnInit(){if(!this.userService.isAuthenticated()){await this.router.navigate(["/login"]);return}this.subscribeToOrder()}ngOnDestroy(){this.unsubscribeOrder&&(this.unsubscribeOrder(),this.unsubscribeOrder=null)}subscribeToOrder(){this.loading.set(!0),this.error.set(null),this.unsubscribeOrder=this.adminOrdersStore.subscribeToOrder(this.orderId(),async t=>{this.order.set(t),this.loading.set(!1),t&&await this.loadUserData(t.userDisplayId)},t=>{let e=t instanceof Error?t.message:String(t);this.error.set(e),this.loading.set(!1)})}async loadUserData(t){try{let e=await this.userService.getUserByDisplayId(t);if(e){this.userData.set({displayName:e.displayName,email:e.email,phone:e.primaryGuardian?.phone,address:e.primaryGuardian?.address?`${e.primaryGuardian.address.street}, ${e.primaryGuardian.address.city}, ${e.primaryGuardian.address.state} ${e.primaryGuardian.address.zipCode}`:void 0});let s=new Map;for(let o of e.students??[])s.set(o.id,`${o.firstName} ${o.lastName}`);this.studentMap.set(s)}}catch(e){console.error("Failed to load user data:",e)}}getClassName(t){return this.seasonService.classes().find(s=>s.id===t)?.name??t}getStudentName(t){return this.studentMap().get(t)??t}getItemsTotal(t){return t.reduce((e,s)=>e+(s.snapshot?.priceSnapshot?.itemTotal??0),0)}openRecordPaymentDialog(){this.formPayment.amountInput=j(this.amountDue()),this.formPayment.method="zelle",this.formPayment.reference="",this.formPayment.notes="",this.formPayment.isDepositConfirmation=!1,this.dialogMode.set("record-payment")}openCancelItemsDialog(){this.selectedItems.set(new Set),this.formCancel.reason="",this.dialogMode.set("cancel-items")}openRemoveWaitlistDialog(t){this.formRemoveWaitlist.sessionId=t,this.dialogMode.set("remove-waitlist")}openAddAdjustmentDialog(){this.formAdjustment.type="credit",this.formAdjustment.amountInput="",this.formAdjustment.reason="",this.dialogMode.set("add-adjustment")}closeDialog(){this.dialogMode.set(null),this.orderRpc.clearError()}onPaymentMethodChange(t){t==="cash"?this.formPayment.amountInput=j(this.cashAmountDue()):this.formPayment.amountInput=j(this.amountDue())}isItemSelected(t){let e=`${t.sessionId}::${t.studentId}`;return this.selectedItems().has(e)}toggleItemSelection(t){let e=`${t.sessionId}::${t.studentId}`,s=new Set(this.selectedItems());s.has(e)?s.delete(e):s.add(e),this.selectedItems.set(s)}async recordPayment(){let t=this.order();if(!t)return;let e=W(this.formPayment.amountInput);if(e<=0){this.notificationService.warning("Please enter a valid payment amount.");return}try{this.formPayment.method==="cash"&&this.cashDiscount()>0&&await this.orderRpc.addAdjustment({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,amount:-this.cashDiscount(),reason:"Cash payment discount (3%)"}),await this.orderRpc.recordPayment({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,amount:e,reference:this.formPayment.reference||null,method:this.formPayment.method,notes:this.formPayment.notes||null,isDepositConfirmation:this.formPayment.isDepositConfirmation,itemKeys:null}),this.closeDialog()}catch(s){console.error("Failed to record payment:",s)}}async confirmScreenshotPayment(t){let e=this.order();if(!e)return;let s=e.paymentScreenshots?.find(w=>w.id===t);if(!s){this.notificationService.error("Screenshot not found");return}let o=s.claimedAmountCents??0;if(o<=0){this.notificationService.warning("No claimed amount on this screenshot");return}let c=s.paymentOption==="cash_deposit",P=c?"cash":"zelle";try{await this.orderRpc.recordPayment({year:2026,seasonId:e.seasonId,userAuthId:e.userAuthId,amount:o,reference:t,method:P,notes:c?"Deposit confirmed via screenshot":"Payment confirmed via screenshot",isDepositConfirmation:c,itemKeys:s.lockedItemKeys}),this.notificationService.success(c?"Deposit confirmed":"Payment confirmed")}catch(w){console.error("Failed to confirm screenshot payment:",w),this.notificationService.error("Failed to confirm payment")}}rejectScreenshotPayment(t){this.formRejectScreenshot.screenshotId=t,this.formRejectScreenshot.reason="Please re-upload a clearer image of your payment receipt.",this.dialogMode.set("reject-screenshot")}async submitRejectScreenshot(){let t=this.order();if(!t)return;let{screenshotId:e,reason:s}=this.formRejectScreenshot;if(!(!e||!s.trim()))try{await this.orderRpc.deleteScreenshot({seasonId:t.seasonId,screenshotId:e,userAuthId:t.userAuthId,rejectionReason:s.trim()}),this.notificationService.success("Screenshot rejected, items reverted to awaiting payment"),this.closeDialog()}catch(o){console.error("Failed to reject screenshot:",o),this.notificationService.error("Failed to reject screenshot")}}async cancelItems(){let t=this.order();if(t){if(this.selectedItems().size===0){this.notificationService.warning("Please select at least one item to cancel.");return}if(!this.formCancel.reason.trim()){this.notificationService.warning("Please enter a cancellation reason.");return}try{let e=Array.from(this.selectedItems()).map(s=>{let[o,c]=s.split("::");return{sessionId:o,studentId:c}});await this.orderRpc.cancelItems({year:2026,seasonId:t.seasonId,items:e,reason:this.formCancel.reason,userAuthId:t.userAuthId}),this.closeDialog()}catch(e){console.error("Failed to cancel items:",e)}}}async removeWaitlist(){let t=this.order();if(t)try{await this.orderRpc.removeWaitlistEntry({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,sessionId:this.formRemoveWaitlist.sessionId}),this.closeDialog()}catch(e){console.error("Failed to remove waitlist entry:",e)}}async addAdjustment(){let t=this.order();if(!t)return;let e=W(this.formAdjustment.amountInput);if(e<=0){this.notificationService.warning("Please enter a valid amount.");return}if(!this.formAdjustment.reason.trim()){this.notificationService.warning("Please enter a reason for the adjustment.");return}let s=this.formAdjustment.type==="credit"?-e:e;try{await this.orderRpc.addAdjustment({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,amount:s,reason:this.formAdjustment.reason}),this.closeDialog(),this.notificationService.success(this.formAdjustment.type==="credit"?"Credit added successfully.":"Fee added successfully.")}catch(o){console.error("Failed to add adjustment:",o)}}getChangeStatusLabel(t){switch(t){case"pending":return"Pending";case"approved":return"Approved";case"denied":return"Denied";default:return t}}getActionDescription(t){let e=this.getClassName(t.target.sessionId),s=this.getStudentName(t.target.studentId);switch(t.type){case"remove_class":return`Remove from class: ${e} - ${s}`;case"add_addon":return`Add ${t.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${s}`;case"remove_addon":return`Remove ${t.addon==="lunch"?"Lunch":"Extended Care"}: ${e} - ${s}`}}openUpdateAdjustmentDialog(t){this.formChangeRequest.requestId=t.id,this.formChangeRequest.actions=[...t.actions],this.formChangeRequest.adjustmentInput=t.adminAdjustment!==0?j(t.adminAdjustment):"",this.formChangeRequest.adjustmentReason=t.adminAdjustmentReason??"",this.formChangeRequest.adminNotes=t.adminNotes??"",this.dialogMode.set("update-adjustment")}openApproveChangeDialog(t){this.formChangeRequest.requestId=t.id,this.formChangeRequest.actions=[...t.actions],this.formChangeRequest.adminNotes=t.adminNotes??"",this.dialogMode.set("approve-change")}openDenyChangeDialog(t){this.formChangeRequest.requestId=t.id,this.formChangeRequest.actions=[...t.actions],this.formChangeRequest.adminNotes="",this.dialogMode.set("deny-change")}async updateAdjustment(){let t=this.order();if(t)try{let e=this.formChangeRequest.adjustmentInput.trim()?W(this.formChangeRequest.adjustmentInput):0;await this.orderRpc.updateChangeRequest({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminAdjustment:e,adminAdjustmentReason:this.formChangeRequest.adjustmentReason||null,adminNotes:this.formChangeRequest.adminNotes||null}),this.closeDialog()}catch(e){console.error("Failed to update adjustment:",e)}}async approveChange(){let t=this.order();if(t)try{await this.orderRpc.approveChangeRequest({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminNotes:this.formChangeRequest.adminNotes||null}),this.closeDialog()}catch(e){console.error("Failed to approve change request:",e)}}async denyChange(){let t=this.order();if(t&&this.formChangeRequest.adminNotes.trim())try{await this.orderRpc.denyChangeRequest({year:2026,seasonId:t.seasonId,userAuthId:t.userAuthId,changeRequestId:this.formChangeRequest.requestId,adminNotes:this.formChangeRequest.adminNotes}),this.closeDialog()}catch(e){console.error("Failed to deny change request:",e)}}clearError(){this.error.set(null)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=$({type:r,selectors:[["app-admin-order-detail"]],inputs:{orderId:[1,"orderId"]},decls:13,vars:11,consts:[["pageTitle","Order Details","pageSubtitle","View and manage order"],[1,"admin-order-detail-container"],[1,"loading-state"],[1,"error-banner"],[1,"order-content"],[1,"modal-overlay"],[1,"spinner"],["type","button",1,"btn-close",3,"click"],[1,"order-header-info"],[1,"order-user-id"],[1,"label"],[1,"value"],[1,"status-badge",3,"ngClass"],[1,"order-layout"],[1,"main-column"],[1,"info-card","user-info-card"],[1,"info-card","status-card"],[1,"status-details"],[1,"detail-row"],[1,"value","status-badge",3,"ngClass"],[1,"empty-state"],[3,"lockedItems","submittedItems","securedItems","paidItems","editable","isAdmin","screenshotGroups"],[1,"info-card","payments-card"],[1,"info-card","waitlist-card"],[1,"info-card","change-requests-card"],[1,"info-card","history-card"],[1,"sidebar-column"],[3,"recordPaymentClick","addAdjustmentClick","isAdmin","canRecordPayment","orderSummary"],[1,"user-details"],[1,"value",3,"ngClass"],[1,"remaining-time"],[3,"cancelItemsClick","confirmScreenshot","rejectScreenshot","lockedItems","submittedItems","securedItems","paidItems","editable","isAdmin","screenshotGroups"],[1,"payments-table"],[1,"amount"],[1,"method-badge"],[1,"waitlist-list"],[1,"waitlist-item"],[1,"waitlist-header"],[1,"class-name"],[1,"waitlist-details"],[1,"detail-item"],["type","button",1,"btn","btn-danger-outline","btn-sm",3,"click"],[1,"change-requests-list"],[1,"change-request-item",3,"ngClass"],[1,"request-header"],[1,"request-info"],[1,"request-id"],[1,"request-status-badge",3,"ngClass"],[1,"request-details"],[1,"request-actions-list"],[1,"request-action-row"],[1,"request-meta"],[1,"meta-item"],[1,"request-actions"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"section-header",3,"click"],["type","button",1,"toggle-btn"],[1,"history-timeline"],[1,"history-event"],[1,"event-time"],[1,"event-details"],[1,"event-action"],[1,"event-metadata"],[1,"affected-items"],[1,"affected-item"],[1,"item-class"],[1,"item-student"],[1,"item-options"],[1,"option-tag"],[1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],[1,"modal-header"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","payment-amount"],["type","text","id","payment-amount","name","amount","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text"],["for","payment-method"],["id","payment-method","name","method","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","zelle"],["value","check"],["value","cash"],["value","other"],[1,"cash-discount-info"],["for","payment-reference"],["type","text","id","payment-reference","name","reference","placeholder","Confirmation number, check number, etc.",1,"form-control",3,"ngModelChange","ngModel"],["for","payment-notes"],["id","payment-notes","name","notes","rows","3","placeholder","Optional notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","deposit-confirmation"],[1,"alert","alert-danger"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"cash-info-row"],[1,"cash-info-row","discount"],[1,"cash-info-row","total"],[1,"checkbox-label"],["type","checkbox","name","isDepositConfirmation",3,"ngModelChange","ngModel"],[1,"spinner-small"],[1,"items-checklist"],[1,"checkbox-item"],["for","cancel-reason"],["id","cancel-reason","name","reason","rows","3","placeholder","Enter reason for cancellation...","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","checkbox",3,"change","checked"],[1,"item-info"],[1,"student-name"],[1,"item-status-badge",3,"ngClass"],[1,"read-only-value"],[1,"alert","alert-warning"],["for","adjustment-amount"],["type","text","id","adjustment-amount","name","adjustment","placeholder","0.00 (positive = fee, negative = credit)",1,"form-control",3,"ngModelChange","ngModel"],["for","adjustment-reason"],["id","adjustment-reason","name","adjustmentReason","rows","2","placeholder","Explain the adjustment...",1,"form-control",3,"ngModelChange","ngModel"],["for","adjustment-notes"],["id","adjustment-notes","name","notes","rows","2","placeholder","Optional notes (visible to user)...",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-info"],[1,"items-list-readonly"],[1,"item-row"],["for","approve-notes"],["id","approve-notes","name","notes","rows","3","placeholder","Optional notes...",1,"form-control",3,"ngModelChange","ngModel"],["for","deny-notes"],["id","deny-notes","name","notes","rows","3","placeholder","Please provide a reason for denying this request...","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","adjustment-type"],["id","adjustment-type","name","type","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","credit"],["value","fee"],["type","text","id","adjustment-amount","name","amount","placeholder","0.00","required","",1,"form-control",3,"ngModelChange","ngModel"],["id","adjustment-reason","name","reason","rows","3","placeholder","Explain the reason for this adjustment...","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","reject-reason"],["id","reject-reason","name","reason","rows","3","required","","placeholder","Enter reason shown to user...",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,s){e&1&&(n(0,"app-admin-layout",0)(1,"div",1),u(2,Be,4,0,"div",2),u(3,Ge,6,1,"div",3),u(4,vt,40,17,"div",4),u(5,wt,44,11,"div",5),u(6,Et,26,5,"div",5),u(7,Rt,23,5,"div",5),u(8,Lt,37,8,"div",5),u(9,Gt,33,6,"div",5),u(10,Kt,27,6,"div",5),u(11,Qt,36,8,"div",5),u(12,nn,22,5,"div",5),i()()),e&2&&(d(2),_(s.loading()?2:-1),d(),_(s.error()&&!s.loading()?3:-1),d(),_(s.order()&&!s.loading()?4:-1),d(),_(s.dialogMode()==="record-payment"?5:-1),d(),_(s.dialogMode()==="cancel-items"?6:-1),d(),_(s.dialogMode()==="remove-waitlist"?7:-1),d(),_(s.dialogMode()==="update-adjustment"?8:-1),d(),_(s.dialogMode()==="approve-change"?9:-1),d(),_(s.dialogMode()==="deny-change"?10:-1),d(),_(s.dialogMode()==="add-adjustment"?11:-1),d(),_(s.dialogMode()==="reject-screenshot"?12:-1))},dependencies:[Y,K,be,xe,he,ve,pe,me,fe,ue,_e,ye,Ce,ge,Se,Oe,we],styles:[".admin-order-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:15px;border-radius:4px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:24px;cursor:pointer;color:inherit}.order-header-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding:1rem;background:#fff;border:1px solid #e0e0e0;border-radius:8px}.order-user-id[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.order-user-id[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:#666}.order-user-id[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-family:monospace;font-weight:500;font-size:.9375rem}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.user-id[_ngcontent-%COMP%]{color:#666;font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.order-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:1.5rem;align-items:start}.main-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.sidebar-column[_ngcontent-%COMP%]{position:sticky;top:20px}@media(max-width:900px){.order-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar-column[_ngcontent-%COMP%]{position:static;order:-1}}.info-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;margin-bottom:20px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;color:#333}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.user-details[_ngcontent-%COMP%], .status-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-size:12px;font-weight:600;text-transform:uppercase;display:inline-block}.status-submitted[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-paid[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-cancelled[_ngcontent-%COMP%], .status-refunded[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-partial[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.status-empty[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.remaining-time[_ngcontent-%COMP%]{font-size:12px;color:#666}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-top:15px}.alert-danger[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}.alert-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.items-section[_ngcontent-%COMP%]{margin-bottom:30px}.items-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:15px;color:#333}.item-count[_ngcontent-%COMP%]{color:#666;font-weight:400;font-size:14px}.items-list[_ngcontent-%COMP%]{display:grid;gap:12px}.item-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:15px}.item-card.locked[_ngcontent-%COMP%]{background:#f3e5f5;border-color:#ce93d8}.item-card.pending[_ngcontent-%COMP%]{background:#fff3cd;border-color:#ffeaa7}.item-card.secured[_ngcontent-%COMP%]{background:#f3e5f5;border-color:#ce93d8}.item-card.cancelled[_ngcontent-%COMP%]{background:#f8d7da;border-color:#f5c6cb;opacity:.7}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.class-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.item-status-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:3px;font-size:11px;font-weight:600;text-transform:uppercase}.item-status-locked[_ngcontent-%COMP%]{background:#7b1fa2;color:#fff}.item-status-submitted[_ngcontent-%COMP%]{background:#ffc107;color:#000}.item-status-paid[_ngcontent-%COMP%]{background:#28a745;color:#fff}.item-status-secured[_ngcontent-%COMP%]{background:#7b1fa2;color:#fff}.item-status-cancelled[_ngcontent-%COMP%], .item-status-refunded[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:14px}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.option-badge[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:2px 8px;border-radius:3px;font-size:11px;margin-right:4px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #dee2e6}.payments-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600}.method-badge[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:4px 8px;border-radius:3px;font-size:12px;text-transform:uppercase}.waitlist-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.waitlist-item[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:15px}.waitlist-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.promoted-badge[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:4px 8px;border-radius:3px;font-size:12px;font-weight:600}.waitlist-details[_ngcontent-%COMP%]{margin-bottom:10px}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;cursor:pointer;-webkit-user-select:none;user-select:none;margin-bottom:15px}.section-header[_ngcontent-%COMP%]:hover{opacity:.8}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;color:#666;cursor:pointer;padding:4px 8px}.history-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.history-event[_ngcontent-%COMP%]{display:flex;gap:15px;padding:12px;background:#f8f9fa;border-radius:6px}.event-time[_ngcontent-%COMP%]{color:#666;font-size:12px;white-space:nowrap;min-width:150px}.event-details[_ngcontent-%COMP%]{flex:1}.event-action[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.event-metadata[_ngcontent-%COMP%]{color:#666;font-size:14px}.affected-items[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background:#e9ecef;border-radius:4px}.affected-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 0;font-size:13px;border-bottom:1px solid #dee2e6}.affected-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.affected-item[_ngcontent-%COMP%]   .item-class[_ngcontent-%COMP%]{font-weight:500;color:#333}.affected-item[_ngcontent-%COMP%]   .item-student[_ngcontent-%COMP%]{color:#666}.affected-item[_ngcontent-%COMP%]   .item-options[_ngcontent-%COMP%]{display:flex;gap:4px;margin-left:auto}.affected-item[_ngcontent-%COMP%]   .option-tag[_ngcontent-%COMP%]{background:#6c757d;color:#fff;padding:2px 6px;border-radius:3px;font-size:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.btn-primary-outline[_ngcontent-%COMP%]{background:#fff;color:#007bff;border:1px solid #007bff}.btn-primary-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6268}.btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}.btn-danger-outline[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:1px solid #dc3545}.btn-danger-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc3545;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #dee2e6}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px}.modal-body[_ngcontent-%COMP%]{padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:8px;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.form-text[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:12px;color:#6c757d}.items-checklist[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto;padding:8px;background:#f8f9fa;border-radius:4px}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px;cursor:pointer}.checkbox-item[_ngcontent-%COMP%]:hover{background:#e9ecef;border-radius:4px}.checkbox-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.item-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.read-only-value[_ngcontent-%COMP%]{padding:8px 12px;background:#f8f9fa;border-radius:4px;font-weight:500}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px;padding-top:20px;border-top:1px solid #dee2e6}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite;margin-right:8px}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.change-requests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.change-request-item[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:8px;padding:16px;background:#f8f9fa}.change-request-item.status-pending[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.change-request-item.status-approved[_ngcontent-%COMP%]{border-left:4px solid #28a745}.change-request-item.status-denied[_ngcontent-%COMP%]{border-left:4px solid #dc3545;opacity:.7}.change-request-item[_ngcontent-%COMP%]   .request-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.change-request-item[_ngcontent-%COMP%]   .request-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.change-request-item[_ngcontent-%COMP%]   .request-id[_ngcontent-%COMP%]{font-weight:600;color:#495057}.request-status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase}.request-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.request-status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.request-status-badge.status-denied[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.change-request-item[_ngcontent-%COMP%]   .request-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}.change-request-item[_ngcontent-%COMP%]   .request-actions-list[_ngcontent-%COMP%]{font-size:14px}.change-request-item[_ngcontent-%COMP%]   .request-action-row[_ngcontent-%COMP%]{margin-left:16px;color:#666;padding:4px 0}.change-request-item[_ngcontent-%COMP%]   .request-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:13px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;gap:8px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:130px}.change-request-item[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.change-request-item[_ngcontent-%COMP%]   .request-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding-top:12px;border-top:1px solid #dee2e6}.text-success[_ngcontent-%COMP%]{color:#28a745!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.items-list-readonly[_ngcontent-%COMP%]{background:#f8f9fa;padding:12px;border-radius:4px}.items-list-readonly[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{padding:4px 0;color:#495057}.cash-discount-info[_ngcontent-%COMP%]{background:#e8f5e9;border:1px solid #c8e6c9;border-radius:8px;padding:12px;margin-bottom:15px}.cash-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px 0;font-size:14px}.cash-info-row.discount[_ngcontent-%COMP%]{color:#2e7d32}.cash-info-row.total[_ngcontent-%COMP%]{font-weight:600;font-size:16px;border-top:1px solid #c8e6c9;padding-top:8px;margin-top:4px}.cash-discount-info[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{margin-top:8px;color:#666;font-style:italic}.deposit-confirmation[_ngcontent-%COMP%]{background:#f3e5f5;border:1px solid #ce93d8;border-radius:8px;padding:12px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:500}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#7b1fa2}.deposit-confirmation[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{margin-top:8px;color:#7b1fa2}"]})};export{Te as AdminOrderDetailComponent};
