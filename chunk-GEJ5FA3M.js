import{a as M}from"./chunk-XRTB5ZTJ.js";import{_ as u,fa as P,h as v,ka as S,ma as O,n as C,o as _}from"./chunk-NBRTDJZM.js";import"./chunk-CIPCES67.js";import{$a as h,Db as n,Ea as r,Eb as g,N as d,Ob as m,Qa as f,ab as x,da as c,fb as l,gb as e,hb as t,ib as b,sb as k}from"./chunk-CNMR2ZL6.js";import"./chunk-Q7L6LLAK.js";var y=()=>({filter:"submitted"}),E=()=>({filter:"locked"});function w(a,i){a&1&&(e(0,"div",1),b(1,"div",2),t())}function A(a,i){if(a&1&&(e(0,"div",3)(1,"a",4)(2,"div",5)(3,"div",6)(4,"span"),n(5,"\u25F7"),t()(),e(6,"span",7),n(7,"Review \u203A"),t()(),e(8,"div",8),n(9),t(),e(10,"div",9),n(11,"Pending Orders"),t(),e(12,"div",10),n(13,"Receipts waiting for review"),t()(),e(14,"a",4)(15,"div",5)(16,"div",11)(17,"span",12),n(18,"lock"),t()(),e(19,"span",7),n(20,"View \u203A"),t()(),e(21,"div",8),n(22),t(),e(23,"div",9),n(24,"Locked Spots"),t(),e(25,"div",10),n(26,"Active holds in system"),t()()(),e(27,"div",13)(28,"div",14)(29,"h3"),n(30,"Quick Actions"),t(),e(31,"p"),n(32,"Common management tasks"),t()(),e(33,"div",15)(34,"a",16)(35,"div",17)(36,"span",12),n(37,"description"),t()(),e(38,"div",18)(39,"span",19),n(40,"Process Applications"),t(),e(41,"span",20),n(42,"Review new camp applications"),t()(),e(43,"span",21),n(44,"\u203A"),t()(),e(45,"a",22)(46,"div",23)(47,"span",12),n(48,"menu_book"),t()(),e(49,"div",18)(50,"span",19),n(51,"Manage Catalog"),t(),e(52,"span",20),n(53,"Edit seasons, classes, and pricing"),t()(),e(54,"span",21),n(55,"\u203A"),t()(),e(56,"a",24)(57,"div",25)(58,"span",12),n(59,"download"),t()(),e(60,"div",18)(61,"span",19),n(62,"Export Data"),t(),e(63,"span",20),n(64,"Download full registration roster (CSV)"),t()(),e(65,"span",21),n(66,"\u203A"),t()()()()),a&2){let o=k();r(),l("queryParams",m(5,y)),r(8),g(o.pendingCount()),r(5),l("queryParams",m(6,E)),r(8),g(o.lockedCount()),r(12),l("queryParams",m(7,y))}}var q=class a{userService=d(O);router=d(C);orderDatastore=d(P);seasonService=d(S);loading=c(!0);pendingCount=c(0);lockedCount=c(0);async ngOnInit(){if(console.log("[AdminDashboard] ngOnInit start"),!this.userService.isAuthenticated()){console.log("[AdminDashboard] not authenticated, redirecting to login"),this.router.navigate(["/login"]);return}if(!this.userService.isAdmin()){console.log("[AdminDashboard] not admin, redirecting to home"),this.router.navigate(["/"]);return}try{console.log("[AdminDashboard] calling loadSeasons..."),await this.seasonService.loadSeasons(),console.log("[AdminDashboard] loadSeasons complete, selectedSeason:",this.seasonService.selectedSeason()?.id),await this.loadStats()}finally{this.loading.set(!1)}}async loadStats(){console.log("[AdminDashboard] loadStats: loading from all seasons");try{let i=await this.orderDatastore.listAllSeasonOrders();console.log("[AdminDashboard] fetched orders from all seasons:",i.length);let o=i.filter(p=>u(p)==="submitted").length,s=i.filter(p=>u(p)==="locked").length;console.log("[AdminDashboard] stats:",{pending:o,locked:s,total:i.length}),this.pendingCount.set(o),this.lockedCount.set(s)}catch(i){console.error("[AdminDashboard] Failed to load dashboard stats:",i)}}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=f({type:a,selectors:[["app-admin-dashboard"]],decls:3,vars:1,consts:[["pageTitle","Welcome back, Admin","pageSubtitle","Here's what's happening with your camp registration today."],[1,"loading-state"],[1,"spinner"],[1,"stats-grid"],["routerLink","/admin/orders",1,"stat-card",3,"queryParams"],[1,"stat-header"],[1,"stat-icon","blue"],[1,"stat-link"],[1,"stat-number"],[1,"stat-label"],[1,"stat-subtitle"],[1,"stat-icon","purple"],["aria-hidden","true",1,"material-symbols-rounded"],[1,"quick-actions-card"],[1,"quick-actions-header"],[1,"quick-actions-list"],["routerLink","/admin/orders",1,"quick-action",3,"queryParams"],[1,"quick-action-icon","blue"],[1,"quick-action-text"],[1,"quick-action-title"],[1,"quick-action-desc"],[1,"quick-action-chevron"],["routerLink","/admin/catalog",1,"quick-action"],[1,"quick-action-icon","purple"],["routerLink","/admin/export",1,"quick-action"],[1,"quick-action-icon","red"]],template:function(o,s){o&1&&(e(0,"app-admin-layout",0),h(1,w,2,0,"div",1)(2,A,67,8),t()),o&2&&(r(),x(s.loading()?1:2))},dependencies:[v,_,M],styles:[".loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:4rem}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #eee;border-top-color:#c62828;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem;text-decoration:none;border:1px solid #e8e8e8;transition:all .2s ease;display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]:hover{border-color:#ddd;transform:translateY(-2px);box-shadow:0 4px 12px #0000000f}.stat-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1rem}.stat-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.125rem}.stat-icon.blue[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.stat-icon.purple[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.stat-link[_ngcontent-%COMP%]{font-size:.75rem;color:#888;font-weight:500}.stat-card[_ngcontent-%COMP%]:hover   .stat-link[_ngcontent-%COMP%]{color:#c62828}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#212121;line-height:1;margin-bottom:.375rem}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#333;margin-bottom:.25rem}.stat-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.quick-actions-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e8e8e8;overflow:hidden}.quick-actions-header[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1rem;border-bottom:1px solid #f0f0f0}.quick-actions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:600;color:#212121}.quick-actions-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#888}.quick-actions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.quick-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;text-decoration:none;transition:background .15s ease;border-bottom:1px solid #f5f5f5}.quick-action[_ngcontent-%COMP%]:last-child{border-bottom:none}.quick-action[_ngcontent-%COMP%]:hover{background:#fafafa}.quick-action-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.125rem;flex-shrink:0}.quick-action-icon.blue[_ngcontent-%COMP%]{background:#e3f2fd}.quick-action-icon.purple[_ngcontent-%COMP%]{background:#f3e5f5}.quick-action-icon.red[_ngcontent-%COMP%]{background:#ffebee}.quick-action-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.125rem}.quick-action-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#333}.quick-action-desc[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.quick-action-chevron[_ngcontent-%COMP%]{font-size:1.25rem;color:#ccc;font-weight:300}.quick-action[_ngcontent-%COMP%]:hover   .quick-action-chevron[_ngcontent-%COMP%]{color:#999}@media(max-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{q as AdminDashboardComponent};
