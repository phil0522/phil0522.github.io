import{a as R}from"./chunk-JZ4HOVAJ.js";import{a as L}from"./chunk-FXOCASSC.js";import{a as N}from"./chunk-5R4OVPLI.js";import{b as z,c as D,f as F,q as j}from"./chunk-UIWRCQEF.js";import{ba as V,ea as I,h as T,n as A}from"./chunk-XJRQXI57.js";import"./chunk-UYHN5VVP.js";import{$a as s,Bb as E,Db as a,Ea as d,Eb as _,Jb as S,Kb as O,Lb as k,N as u,Qa as w,S as p,T as g,Tb as h,ab as m,da as b,db as M,eb as P,fb as x,gb as n,hb as i,ib as y,ob as f,qb as C,sb as l}from"./chunk-5O64VQN5.js";import"./chunk-Q7L6LLAK.js";var U=(t,o)=>o.id;function $(t,o){t&1&&(n(0,"div",2),y(1,"div",5),n(2,"p"),a(3,"Loading content..."),i()())}function B(t,o){if(t&1){let e=f();n(0,"div",3)(1,"div",6),a(2,"!"),i(),n(3,"p"),a(4),i(),n(5,"button",7),C("click",function(){p(e);let r=l();return g(r.loadConfig())}),a(6,"Retry"),i()()}if(t&2){let e=l();d(4),_(e.configService.error())}}function q(t,o){if(t&1){let e=f();n(0,"button",18),C("click",function(){let r=p(e).$implicit,v=l(2);return g(v.selectTab(r.id))}),n(1,"span",19),a(2),i(),n(3,"span",20),a(4),i()()}if(t&2){let e=o.$implicit,c=l(2);E("active",c.activeTab()===e.id),d(2),_(e.icon),d(2),_(e.label)}}function G(t,o){if(t&1){let e=f();n(0,"button",21),C("click",function(){p(e);let r=l(2);return g(r.startEdit())}),a(1," Edit Content "),i()}}function H(t,o){if(t&1&&y(0,"app-markdown-renderer",28),t&2){let e=l(3);x("content",e.editContent)}}function J(t,o){t&1&&(n(0,"p",29),a(1,"Start typing to see preview..."),i())}function K(t,o){t&1&&a(0," Saving... ")}function Q(t,o){t&1&&a(0," Save Changes ")}function X(t,o){if(t&1){let e=f();n(0,"div",16)(1,"div",22)(2,"label",23),a(3,"Content (Markdown)"),i(),n(4,"textarea",24),k("ngModelChange",function(r){p(e);let v=l(2);return O(v.editContent,r)||(v.editContent=r),g(r)}),i(),n(5,"small",25),a(6," Supports Markdown: **bold**, *italic*, [links](url), - lists, etc. "),i()(),n(7,"div",26)(8,"label"),a(9,"Preview"),i(),n(10,"div",27),s(11,H,1,1,"app-markdown-renderer",28)(12,J,2,0,"p",29),i()(),n(13,"div",30)(14,"button",31),C("click",function(){p(e);let r=l(2);return g(r.cancelEdit())}),a(15,"Cancel"),i(),n(16,"button",32),C("click",function(){p(e);let r=l(2);return g(r.saveContent())}),s(17,K,1,0)(18,Q,1,0),i()()()}if(t&2){let e=l(2);d(4),S("ngModel",e.editContent),d(7),m(e.editContent?11:12),d(5),x("disabled",e.saving()),d(),m(e.saving()?17:18)}}function Y(t,o){if(t&1&&(n(0,"div",33),y(1,"app-markdown-renderer",28),i()),t&2){let e=l(3);d(),x("content",e.currentContent())}}function Z(t,o){if(t&1){let e=f();n(0,"div",34)(1,"p"),a(2,"No content has been set for this section."),i(),n(3,"button",21),C("click",function(){p(e);let r=l(3);return g(r.startEdit())}),a(4," Add Content "),i()()}}function ee(t,o){if(t&1&&(n(0,"div",17),s(1,Y,2,1,"div",33)(2,Z,5,0,"div",34),i()),t&2){let e=l(2);d(),m(e.currentContent()?1:2)}}function te(t,o){if(t&1&&(n(0,"div",4)(1,"nav",8),M(2,q,5,4,"button",9,U),i(),n(4,"div",10)(5,"div",11)(6,"div",12)(7,"h2"),a(8),i(),n(9,"p",13),a(10),i()(),n(11,"div",14),s(12,G,2,0,"button",15),i()(),s(13,X,19,4,"div",16)(14,ee,3,1,"div",17),i()()),t&2){let e,c,r=l();d(2),P(r.tabs),d(6),_((e=r.activeTabConfig())==null?null:e.label),d(2),_((c=r.activeTabConfig())==null?null:c.description),d(2),m(r.isEditing()?-1:12),d(),m(r.isEditing()?13:14)}}var W=class t{configService=u(V);userService=u(I);router=u(A);notificationService=u(L);tabs=[{id:"payment",label:"Payment Instructions",description:"Instructions shown during checkout and payment",icon:"credit_card"},{id:"terms",label:"Terms & Policies Page",description:"Public Terms & Policies page content (not linked to Financial Terms)",icon:"gavel"},{id:"release",label:"Liability Waiver",description:"Stage 1 of acknowledgement flow - liability release agreement",icon:"edit_note"},{id:"refund",label:"Financial Terms",description:"Stage 2 of acknowledgement flow - refund and cancellation policy",icon:"savings"},{id:"media",label:"Media Policy",description:"Stage 3 of acknowledgement flow - Photography and Videography Policy",icon:"photo_camera"},{id:"forms",label:"Forms Page",description:"Downloadable forms and documents shown on the Forms page",icon:"description"}];activeTab=b("payment");isEditing=b(!1);saving=b(!1);editContent="";activeTabConfig=h(()=>this.tabs.find(o=>o.id===this.activeTab()));currentContent=h(()=>{let o=this.activeTab(),e=this.configService.config();switch(o){case"payment":return e.paymentInstructions?.content||null;case"release":return e.releaseAgreementContent?.content||null;case"refund":return e.returnInstructions?.content||null;case"terms":return e.termsPoliciesContent?.content||null;case"media":return e.mediaPolicyContent?.content||null;case"forms":return e.formsPageContent?.content||null;default:return null}});async ngOnInit(){if(!this.userService.isAuthenticated()){this.router.navigate(["/login"]);return}if(!this.userService.isAdmin()){this.router.navigate(["/"]);return}await this.loadConfig()}async loadConfig(){try{await this.configService.fetchConfig()}catch{}}selectTab(o){this.isEditing()&&this.isEditing.set(!1),this.activeTab.set(o)}startEdit(){this.editContent=this.currentContent()||"",this.isEditing.set(!0)}cancelEdit(){this.isEditing.set(!1),this.editContent=""}async saveContent(){this.saving.set(!0);let o=this.activeTab();try{let c={payment:"paymentInstructions",terms:"termsPoliciesContent",release:"releaseAgreementContent",refund:"returnInstructions",media:"mediaPolicyContent",forms:"formsPageContent"}[o];await this.configService.updateContentSection(c,this.editContent),this.notificationService.success(`${this.activeTabConfig()?.label} saved successfully`),this.isEditing.set(!1)}catch(e){this.notificationService.error("Failed to save: "+e.message)}finally{this.saving.set(!1)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-admin-content-editor"]],decls:5,vars:3,consts:[["pageTitle","Content Editor","pageSubtitle","Manage all markdown content in one place"],[1,"content-editor"],[1,"loading-container"],[1,"error-container"],[1,"editor-layout"],[1,"spinner"],[1,"error-icon"],[1,"btn-retry",3,"click"],[1,"tab-nav"],[1,"tab-btn",3,"active"],[1,"editor-panel"],[1,"panel-header"],[1,"panel-title"],[1,"panel-description"],[1,"panel-actions"],[1,"btn","btn-primary"],[1,"edit-container"],[1,"view-container"],[1,"tab-btn",3,"click"],["aria-hidden","true",1,"tab-icon","material-symbols-rounded"],[1,"tab-label"],[1,"btn","btn-primary",3,"click"],[1,"editor-area"],["for","contentEditor"],["id","contentEditor","rows","20","placeholder","Enter content in Markdown format...",1,"content-textarea",3,"ngModelChange","ngModel"],[1,"hint"],[1,"preview-area"],[1,"preview-content"],[3,"content"],[1,"empty-preview"],[1,"edit-actions"],[1,"btn","btn-outline",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"content-preview"],[1,"empty-state"]],template:function(e,c){e&1&&(n(0,"app-admin-layout",0)(1,"div",1),s(2,$,4,0,"div",2),s(3,B,7,1,"div",3),s(4,te,15,4,"div",4),i()()),e&2&&(d(2),m(c.configService.loading()?2:-1),d(),m(c.configService.error()?3:-1),d(),m(!c.configService.loading()&&!c.configService.error()?4:-1))},dependencies:[T,j,z,D,F,N,R],styles:[".content-editor[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--sys-outline, #e0e0e0);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{background:var(--sys-error-container, #ffebee);border-radius:12px}.error-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--sys-error, #c62828);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;margin-bottom:1rem}.btn-retry[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background:var(--sys-error, #c62828);color:#fff;border:none;border-radius:6px;cursor:pointer}.editor-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;gap:1.5rem;min-height:600px}.tab-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1rem;height:fit-content}.tab-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.875rem 1rem;background:transparent;border:none;border-radius:8px;cursor:pointer;text-align:left;transition:all .2s;color:var(--sys-on-surface-variant, #666)}.tab-btn[_ngcontent-%COMP%]:hover{background:var(--sys-surface-variant, #f5f5f5)}.tab-btn.active[_ngcontent-%COMP%]{background:var(--sys-primary-container, #ffe0e0);color:var(--sys-primary, #c62828);font-weight:500}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem}.tab-label[_ngcontent-%COMP%]{font-size:.9rem}.editor-panel[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.5rem;display:flex;flex-direction:column}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--sys-outline-variant, #e0e0e0)}.panel-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.25rem;color:var(--sys-on-surface, #212121)}.panel-description[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--sys-on-surface-variant, #666)}.edit-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;flex:1}.editor-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.editor-area[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem;color:var(--sys-on-surface, #212121)}.content-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid var(--sys-outline, #e0e0e0);border-radius:8px;font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:.875rem;line-height:1.5;resize:vertical;min-height:300px}.content-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--sys-primary, #c62828)}.hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--sys-on-surface-variant, #999)}.preview-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.preview-content[_ngcontent-%COMP%]{padding:1rem;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;background:var(--sys-surface-variant, #fafafa);min-height:150px;max-height:300px;overflow-y:auto}.empty-preview[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #999);font-style:italic}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:1rem;border-top:1px solid var(--sys-outline-variant, #e0e0e0)}.view-container[_ngcontent-%COMP%]{flex:1}.content-preview[_ngcontent-%COMP%]{padding:1rem;background:var(--sys-surface-variant, #fafafa);border-radius:8px;min-height:200px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:var(--sys-on-surface-variant, #666)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none}.btn-primary[_ngcontent-%COMP%]{background:var(--sys-primary, #c62828);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-primary-dark, #a51c1c)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--sys-outline, #e0e0e0);color:var(--sys-on-surface-variant, #666)}.btn-outline[_ngcontent-%COMP%]:hover{background:var(--sys-surface-variant, #f5f5f5)}@media(max-width:900px){.editor-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.tab-nav[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:.5rem}.tab-btn[_ngcontent-%COMP%]{flex:1 1 auto;min-width:120px;justify-content:center}}"]})};export{W as AdminContentEditorComponent};
