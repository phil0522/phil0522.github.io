import{b as Y}from"./chunk-G73BK2GR.js";import{a as X}from"./chunk-KZ27A6Z5.js";import{c as K,d as Q}from"./chunk-RYIKU5Y3.js";import{h as L,v as Z,w as W,x as J}from"./chunk-XJRQXI57.js";import{F as H}from"./chunk-UYHN5VVP.js";import{$a as p,Ba as G,Bb as O,Cb as B,Db as i,Ea as o,Eb as y,Fb as u,Gb as q,N as R,Qa as I,S as _,T as f,Tb as k,U as N,Vb as x,Wb as C,ab as g,da as T,db as M,ea as U,eb as w,fb as P,gb as m,hb as s,ib as E,jb as d,kb as a,lb as D,ob as v,pb as V,qb as h,rb as S,sb as c}from"./chunk-5O64VQN5.js";var ne=(t,n)=>n.type,ie=(t,n)=>n.status;function oe(t,n){if(t&1){let e=v();d(0,"div",1)(1,"h3"),i(2,"Admin Actions"),a(),d(3,"div",4)(4,"button",5),S("click",function(){_(e);let l=c();return f(l.recordPaymentClick.emit())}),i(5," Record Payment "),a(),d(6,"button",6),S("click",function(){_(e);let l=c();return f(l.addAdjustmentClick.emit())}),i(7," Add Credit/Fee "),a()()()}}function re(t,n){if(t&1){let e=v();d(0,"div",2)(1,"h3"),i(2,"Payment Options"),a(),d(3,"div",7)(4,"label",8),S("click",function(){_(e);let l=c();return f(l.selectOption("zelle"))}),D(5,"input",9),d(6,"div",10)(7,"span",11),i(8,"Full Zelle Payment"),a()()(),d(9,"label",8),S("click",function(){_(e);let l=c();return f(l.selectOption("cash_deposit"))}),D(10,"input",12),d(11,"div",10)(12,"span",11),i(13,"Cash"),a()()()()()}if(t&2){let e=c();o(4),O("selected",e.selectedOption()==="zelle"),o(),V("checked",e.selectedOption()==="zelle"),o(4),O("selected",e.selectedOption()==="cash_deposit"),o(),V("checked",e.selectedOption()==="cash_deposit")}}function ae(t,n){if(t&1&&(d(0,"span",17),i(1),a()),t&2){let e=c(2);o(),u("Due by ",e.paymentDueDate())}}function de(t,n){if(t&1&&(d(0,"div",31)(1,"span",32),i(2),a(),d(3,"span",33),i(4),a()()),t&2){let e=c().$implicit,r=c(3);B(e.status),o(2),q("",e.label," (",e.count,")"),o(2),u("$",r.formatPrice(e.total))}}function se(t,n){if(t&1&&p(0,de,5,5,"div",30),t&2){let e=n.$implicit;g(e.count>0?0:-1)}}function ce(t,n){if(t&1&&(d(0,"div",18),M(1,se,1,1,null,null,ie),a()),t&2){let e=c();o(),w(e.statusCounts)}}function le(t,n){if(t&1&&(d(0,"div",23)(1,"span",21)(2,"span",34),i(3),a(),i(4),a(),d(5,"span",35),i(6),a()()),t&2){let e=n.$implicit,r=c(2);o(3),y(r.getDiscountIcon(e.type)),o(),u(" ",e.label," "),o(2),u("-$",r.formatPrice(r.Math.abs(e.amount)))}}function me(t,n){if(t&1&&(d(0,"div",24)(1,"span",21),i(2,"Total Paid"),a(),d(3,"span",36),i(4),a()()),t&2){let e=c(),r=c();o(4),u("-$",r.formatPrice(e.totalPaid))}}function pe(t,n){if(t&1&&(d(0,"div",27)(1,"span",21)(2,"span",34),i(3,"payments"),a(),i(4," Pay with Cash (3% off) "),a(),d(5,"span",37),i(6),a()()),t&2){let e=c(),r=c();o(6),u("$",r.formatPrice(r.getCashAmount(e.amountDue)))}}function ge(t,n){t&1&&(d(0,"div",28)(1,"span",34),i(2,"check_circle"),a(),i(3," All Items Paid "),a())}function ue(t,n){if(t&1){let e=v();d(0,"div",29)(1,"div",38)(2,"span",39),i(3,"Due via Zelle"),a(),d(4,"span",40),i(5),a()(),d(6,"button",41),S("click",function(){_(e);let l=c(2);return f(l.onSubmit())}),i(7," Submit Now "),a()()}if(t&2){let e=c(2);o(5),u("$",e.formatPrice(e.immediatelyDue()))}}function _e(t,n){if(t&1&&(d(0,"div",3)(1,"div",13)(2,"span",14),i(3,"Remaining Balance"),a(),d(4,"span",15),i(5),d(6,"span",16),i(7),a()(),p(8,ae,2,1,"span",17),a(),p(9,ce,3,0,"div",18),d(10,"div",19)(11,"div",20)(12,"span",21),i(13,"Total Order Value"),a(),d(14,"span",22),i(15),a()(),M(16,le,7,3,"div",23,ne),p(18,me,5,1,"div",24),D(19,"div",25),d(20,"div",26)(21,"span",21),i(22),a(),d(23,"span",22),i(24),a()(),p(25,pe,7,1,"div",27),p(26,ge,4,0,"div",28),a(),p(27,ue,8,1,"div",29),a()),t&2){let e=n,r=c();o(5),u(" $",r.formatWholeDollars(e.amountDue)),o(2),u(".",r.formatCents(e.amountDue)),o(),g(r.paymentDueDate()?8:-1),o(),g(e.statusCounts.length>0?9:-1),o(6),u("$",r.formatPrice(e.subtotal)),o(),w(e.discounts),o(2),g(e.totalPaid>0?18:-1),o(4),y(e.amountDue<0?"Credit Balance":"Remaining Balance"),o(),O("refund",e.amountDue<0)("paid-full",e.amountDue===0&&!r.hasLockedItems()),o(),u(" $",r.formatPrice(r.Math.abs(e.amountDue))," "),o(),g(e.amountDue>0&&(r.hasLockedItems()||r.hasSecuredItems())?25:-1),o(),g(e.amountDue===0&&e.totalPaid>0&&!r.hasLockedItems()?26:-1),o(),g(!r.isAdmin()&&r.hasLockedItems()?27:-1)}}var ee=class t{isAdmin=C(!1);lockedItemsTotal=C(0);lockedSessionCount=C(0);lockedDepositAmount=C(0);lockedItemsDueNow=C(0);lockedItemsDiscount=C(0);hasLockedItems=C(!1);hasSecuredItems=C(!1);selectedOption=C("zelle");orderSummary=C(null);paymentDueDate=C(null);optionChange=x();submitClick=x();recordPaymentClick=x();addAdjustmentClick=x();Math=Math;getDiscountIcon=Y;immediatelyDue=k(()=>this.selectedOption()==="zelle"?this.lockedItemsDueNow():this.lockedDepositAmount());formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}formatLargePrice(n){let e=n/100;return n%100===0?e.toLocaleString("en-US",{minimumFractionDigits:0}):e.toLocaleString("en-US",{minimumFractionDigits:2})}formatWholeDollars(n){let e=Math.abs(n);return Math.floor(e/100).toLocaleString("en-US")}formatCents(n){let e=Math.abs(n);return String(e%100).padStart(2,"0")}getCashAmount(n){if(n<=0)return 0;let r=Math.ceil(n*.03/100)*100;return n-r}selectOption(n){this.optionChange.emit(n)}onSubmit(){this.submitClick.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-settlement-sidebar"]],inputs:{isAdmin:[1,"isAdmin"],lockedItemsTotal:[1,"lockedItemsTotal"],lockedSessionCount:[1,"lockedSessionCount"],lockedDepositAmount:[1,"lockedDepositAmount"],lockedItemsDueNow:[1,"lockedItemsDueNow"],lockedItemsDiscount:[1,"lockedItemsDiscount"],hasLockedItems:[1,"hasLockedItems"],hasSecuredItems:[1,"hasSecuredItems"],selectedOption:[1,"selectedOption"],orderSummary:[1,"orderSummary"],paymentDueDate:[1,"paymentDueDate"]},outputs:{optionChange:"optionChange",submitClick:"submitClick",recordPaymentClick:"recordPaymentClick",addAdjustmentClick:"addAdjustmentClick"},decls:4,vars:3,consts:[[1,"settlement-sidebar"],[1,"admin-actions-section"],[1,"payment-section"],[1,"order-summary-section"],[1,"admin-buttons"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"payment-options"],[1,"payment-option",3,"click"],["type","radio","name","paymentOption","value","zelle",3,"checked"],[1,"option-content"],[1,"option-title"],["type","radio","name","paymentOption","value","cash_deposit",3,"checked"],[1,"balance-header"],[1,"balance-title"],[1,"balance-amount"],[1,"balance-cents"],[1,"due-date"],[1,"status-breakdown"],[1,"order-summary"],[1,"summary-row"],[1,"summary-label"],[1,"summary-value"],[1,"summary-row","discount"],[1,"summary-row","paid"],[1,"divider"],[1,"summary-row","amount-due"],[1,"summary-row","cash-balance"],[1,"paid-badge"],[1,"zelle-due-section"],[1,"status-row",3,"class"],[1,"status-row"],[1,"status-label"],[1,"status-value"],["aria-hidden","true",1,"material-symbols-rounded","icon-sm"],[1,"summary-value","discount-value"],[1,"summary-value","paid-value"],[1,"summary-value","cash-value"],[1,"zelle-due-row"],[1,"zelle-due-label"],[1,"zelle-due-value"],[1,"btn-submit",3,"click"]],template:function(e,r){if(e&1&&(d(0,"div",0),p(1,oe,8,0,"div",1),p(2,re,14,6,"div",2),p(3,_e,28,15,"div",3),a()),e&2){let l;o(),g(r.isAdmin()?1:-1),o(),g(!r.isAdmin()&&r.hasLockedItems()?2:-1),o(),g((l=r.orderSummary())?3:-1,l)}},dependencies:[L],styles:['@charset "UTF-8";.settlement-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.payment-section[_ngcontent-%COMP%], .order-summary-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem}h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:600;color:var(--sys-on-surface, #212121)}.balance-header[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#f97316,#e11d48);color:#fff;padding:1.25rem;border-radius:12px;margin-bottom:1rem;text-align:left;border:none}.balance-title[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.25rem;color:#fff7ed}.balance-amount[_ngcontent-%COMP%]{display:block;font-size:2.25rem;font-weight:700;margin-bottom:.25rem;color:#fff}.balance-cents[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;vertical-align:super}.due-date[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#ffedd5}.payment-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.25rem}.payment-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.875rem;border:2px solid var(--sys-outline-variant, #e0e0e0);border-radius:10px;cursor:pointer;transition:all .2s}.payment-option[_ngcontent-%COMP%]:hover{border-color:var(--sys-primary, #c62828)}.payment-option.selected[_ngcontent-%COMP%]{border-color:var(--sys-primary, #c62828);background:var(--sys-primary-container, #ffebee)}.payment-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-top:.125rem;accent-color:var(--sys-primary, #c62828)}.option-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.option-title[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--sys-on-surface, #212121)}.draft-summary[_ngcontent-%COMP%], .order-summary[_ngcontent-%COMP%]{border-top:1px solid var(--sys-outline-variant, #e0e0e0);padding-top:1rem;margin-bottom:1rem}.order-summary[_ngcontent-%COMP%]{border-top:none;padding-top:0;margin-bottom:0}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.9rem}.summary-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #666)}.summary-value[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.summary-row.discount[_ngcontent-%COMP%]   .discount-value[_ngcontent-%COMP%], .summary-row.paid[_ngcontent-%COMP%]   .paid-value[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.summary-row.total[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #e0e0e0);margin-top:.5rem}.summary-row.total[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%], .summary-row.total[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:700;color:var(--sys-primary, #c62828)}.summary-row.amount-due[_ngcontent-%COMP%]{font-size:1rem}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--sys-primary, #c62828)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value.refund[_ngcontent-%COMP%]{color:var(--sys-tertiary, #1565c0)}.summary-row.amount-due[_ngcontent-%COMP%]   .summary-value.paid-full[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32)}.summary-row.cash-balance[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem .75rem;background:var(--sys-secondary-container, #e8f5e9);border-radius:8px}.summary-row.cash-balance[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-on-secondary-container, #1b5e20)}.summary-row.cash-balance[_ngcontent-%COMP%]   .cash-value[_ngcontent-%COMP%]{font-weight:700;color:var(--sys-secondary, #2e7d32)}.status-breakdown[_ngcontent-%COMP%]{background:var(--sys-surface-container, #f8f9fa);border-radius:8px;padding:.75rem;margin-bottom:1rem}.status-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.375rem 0;font-size:.85rem}.status-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--sys-outline-variant, #eee)}.status-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-label[_ngcontent-%COMP%]:before{content:"\\25cf";font-size:.625rem}.status-row.locked[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-tertiary, #e65100)}.status-row.submitted[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-secondary, #1976d2)}.status-row.secured[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:#7b1fa2}.status-row.paid[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]:before{color:var(--sys-tertiary, #2e7d32)}.status-value[_ngcontent-%COMP%]{font-weight:500;color:var(--sys-on-surface, #333)}.summary-note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #888);text-align:right;font-style:italic}.divider[_ngcontent-%COMP%]{height:1px;background:var(--sys-outline, #e0e0e0);margin:.5rem 0}.paid-badge[_ngcontent-%COMP%]{background:var(--sys-secondary-container, #e8f5e9);color:var(--sys-on-secondary-container, #1b5e20);padding:.5rem .75rem;border-radius:8px;font-size:.875rem;display:inline-flex;align-items:center;justify-content:center;gap:.35rem;font-weight:600;margin-top:.5rem}.zelle-due-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--sys-outline-variant, #e0e0e0)}.zelle-due-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;padding:.75rem;background:var(--sys-primary-container, #ffebee);border-radius:8px}.zelle-due-label[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-primary, #c62828)}.zelle-due-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--sys-primary, #c62828)}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:var(--sys-primary, #c62828);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .2s}.btn-submit[_ngcontent-%COMP%]:hover{background:var(--sys-primary-dark, #a51c1c)}.admin-actions-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem}.admin-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}']})};function fe(t,n){if(t&1){let e=v();d(0,"div",0)(1,"div",2)(2,"div",3)(3,"span",4),i(4,"event"),a(),d(5,"div",5)(6,"span",6),i(7),a(),d(8,"span",7),i(9),a()()(),d(10,"div",8),i(11),a()(),d(12,"div",9)(13,"div",10)(14,"span",11),i(15,"Base Price"),a(),d(16,"span",12),i(17),a()(),d(18,"div",13)(19,"label",14)(20,"span",15),D(21,"span",16),a(),d(22,"input",17),S("change",function(l){_(e);let b=c();return f(b.onLunchToggle(l))}),a(),d(23,"span",18),i(24,"Lunch"),a(),d(25,"span",19),i(26),a()(),d(27,"label",14)(28,"span",15),D(29,"span",16),a(),d(30,"input",17),S("change",function(l){_(e);let b=c();return f(b.onExtendedCareToggle(l))}),a(),d(31,"span",18),i(32,"Extended Care"),a(),d(33,"span",19),i(34),a()()(),d(35,"div",20)(36,"span",11),i(37,"Item Total"),a(),d(38,"span",12),i(39),a()()(),d(40,"button",21),S("click",function(l){_(e);let b=c();return f(b.onDeleteClick(l))}),N(),d(41,"svg",22),D(42,"path",23),a()()()}if(t&2){let e=c();o(7),y(e.item().className),o(2),y(e.formatDateRange(e.item().startDate,e.item().endDate)),o(2),y(e.item().studentName),o(6),u("$",e.formatPrice(e.item().pricing.basePrice)),o(2),O("active",e.item().options.lunch),o(3),V("checked",e.item().options.lunch),o(4),u("+$",e.formatPrice(e.item().pricing.lunchPrice)),o(),O("active",e.item().options.extendedCare),o(3),V("checked",e.item().options.extendedCare),o(4),u("+$",e.formatPrice(e.item().pricing.extendedCarePrice)),o(5),u("$",e.formatPrice(e.item().pricing.itemTotal))}}function Ce(t,n){t&1&&(d(0,"span",33)(1,"span",34),i(2,"lunch_dining"),a(),i(3," Lunch "),a())}function be(t,n){t&1&&(d(0,"span",33)(1,"span",34),i(2,"schedule"),a(),i(3," Extended Care "),a())}function xe(t,n){if(t&1&&(d(0,"span",31),i(1,"\xB7"),a(),d(2,"span",32),p(3,Ce,4,0,"span",33),p(4,be,4,0,"span",33),a()),t&2){let e=c(2);o(3),g(e.item().options.lunch?3:-1),o(),g(e.item().options.extendedCare?4:-1)}}function ve(t,n){if(t&1&&(d(0,"div",1)(1,"div",24)(2,"span",25),i(3,"event"),a(),d(4,"span",26),i(5),a(),d(6,"span",27),i(7),a()(),d(8,"div",28)(9,"span",29),i(10),a(),p(11,xe,5,2),d(12,"span",30),i(13),a()()()),t&2){let e=c();o(5),y(e.item().className),o(2),u("(",e.formatDateRange(e.item().startDate,e.item().endDate),")"),o(3),y(e.formatStudentName(e.item().studentName)),o(),g(e.item().options.lunch||e.item().options.extendedCare?11:-1),o(2),u("$",e.formatPrice(e.item().pricing.itemTotal))}}var z=class t{item=C.required();editable=C(!1);deleteClick=x();addonToggle=x();formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}formatDateRange(n,e){return Q(n,e).replace("-","\u2013")}formatStudentName(n){return n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}onDeleteClick(n){n.stopPropagation(),this.deleteClick.emit()}onLunchToggle(n){n.stopPropagation();let e=n.target;this.addonToggle.emit({item:this.item(),addon:"lunch",value:e.checked})}onExtendedCareToggle(n){n.stopPropagation();let e=n.target;this.addonToggle.emit({item:this.item(),addon:"extendedCare",value:e.checked})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-item-card"]],inputs:{item:[1,"item"],editable:[1,"editable"]},outputs:{deleteClick:"deleteClick",addonToggle:"addonToggle"},decls:2,vars:1,consts:[[1,"item-card","editable"],[1,"item-card","compact"],[1,"item-header"],[1,"item-info"],["aria-hidden","true",1,"item-icon","material-symbols-rounded"],[1,"item-details"],[1,"class-name"],[1,"date-range"],[1,"student-badge"],[1,"pricing-breakdown"],[1,"price-row"],[1,"price-label"],[1,"price-value"],[1,"addons-row"],[1,"addon-toggle"],[1,"toggle-track"],[1,"toggle-thumb"],["type","checkbox",3,"change","checked"],[1,"addon-label"],[1,"addon-price"],[1,"price-row","total"],["aria-label","Release reservation",1,"btn-delete",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"compact-row-1"],["aria-hidden","true",1,"compact-icon","material-symbols-rounded"],[1,"compact-class"],[1,"compact-date"],[1,"compact-row-2"],[1,"compact-student"],[1,"compact-price"],[1,"compact-separator"],[1,"compact-addons"],[1,"addon-tag"],["aria-hidden","true",1,"material-symbols-rounded","icon-sm"]],template:function(e,r){e&1&&p(0,fe,43,13,"div",0)(1,ve,14,5,"div",1),e&2&&g(r.editable()?0:1)},dependencies:[L],styles:[".item-card.editable[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:10px;padding:1rem;position:relative}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem;padding-right:2.5rem}.item-info[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:flex-start}.item-icon[_ngcontent-%COMP%]{font-size:1.25rem}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.class-name[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121);font-size:.95rem}.date-range[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #666)}.student-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;background:var(--sys-surface-variant, #f0f0f0);border-radius:12px;font-size:.75rem;font-weight:500;color:var(--sys-on-surface-variant, #666);text-transform:uppercase;letter-spacing:.02em}.pricing-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding:.75rem;background:var(--sys-surface-container, #fafafa);border-radius:8px;border:1px solid var(--sys-outline-variant, #eee)}.price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.85rem}.price-label[_ngcontent-%COMP%]{color:var(--sys-on-surface, #333)}.price-value[_ngcontent-%COMP%]{font-weight:500;color:var(--sys-on-surface, #333)}.addons-row[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:.25rem 0}.addon-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.85rem}.addon-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.toggle-track[_ngcontent-%COMP%]{position:relative;width:32px;height:18px;background:#d0d0d0;border-radius:9px;transition:all .2s ease;flex-shrink:0}.toggle-thumb[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;width:14px;height:14px;background:#fff;border-radius:50%;transition:all .2s ease;box-shadow:0 1px 2px #00000026}.addon-toggle.active[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]{background:#4caf50}.addon-toggle.active[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{left:16px}.addon-toggle.active[_ngcontent-%COMP%]   .addon-price[_ngcontent-%COMP%]{color:var(--sys-primary, #c62828);font-weight:500}.addon-label[_ngcontent-%COMP%]{color:var(--sys-on-surface, #333)}.addon-price[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #888);font-size:.85rem}.price-row.total[_ngcontent-%COMP%]{border-top:1px solid var(--sys-outline-variant, #e0e0e0);padding-top:.5rem;margin-top:.25rem}.price-row.total[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{font-weight:600}.price-row.total[_ngcontent-%COMP%]   .price-value[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:var(--sys-primary, #c62828)}.btn-delete[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;width:32px;height:32px;border-radius:50%;border:none;background:transparent;color:var(--sys-on-surface-variant, #999);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--sys-error-container, #ffebee);color:var(--sys-error, #c62828)}.item-card.compact[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid var(--sys-outline-variant, #eee)}.item-card.compact[_ngcontent-%COMP%]:last-child{border-bottom:none}.compact-row-1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.compact-icon[_ngcontent-%COMP%]{font-size:1rem}.compact-class[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface, #212121);font-size:.9rem}.compact-date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--sys-on-surface-variant, #666)}.compact-row-2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding-left:1.5rem;font-size:.8rem}.compact-student[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #555)}.compact-separator[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant, #999)}.compact-addons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.addon-tag[_ngcontent-%COMP%]{font-size:.75rem;color:var(--sys-on-surface-variant, #666)}.compact-price[_ngcontent-%COMP%]{margin-left:auto;font-weight:600;color:var(--sys-on-surface, #333);font-size:.9rem}"]})};var he=(t,n)=>n.sessionId+n.studentId;function ye(t,n){t&1&&(m(0,"div",3),i(1,"Loading..."),s())}function Pe(t,n){if(t&1&&E(0,"img",4),t&2){let e=c();P("src",e.imageUrl(),G)}}function Ee(t,n){t&1&&(m(0,"div",5),i(1,"Failed to load"),s())}function Me(t,n){if(t&1&&(m(0,"span",11),i(1),s()),t&2){let e=c();o(),u("+",e.formatCurrency(e.group().screenshot.claimedAmountCents))}}function we(t,n){t&1&&E(0,"span",20)}function Se(t,n){t&1&&i(0," Confirm ")}function Oe(t,n){t&1&&E(0,"span",22)}function ke(t,n){t&1&&i(0," Reject ")}function Ie(t,n){if(t&1){let e=v();m(0,"div",14)(1,"button",19),h("click",function(l){_(e);let b=c();return f(b.onConfirm(l))}),p(2,we,1,0,"span",20)(3,Se,1,0),s(),m(4,"button",21),h("click",function(l){_(e);let b=c();return f(b.onReject(l))}),p(5,Oe,1,0,"span",22)(6,ke,1,0),s()()}if(t&2){let e=c();o(),P("disabled",e.confirming()||e.rejecting()),o(),g(e.confirming()?2:3),o(2),P("disabled",e.confirming()||e.rejecting()),o(),g(e.rejecting()?5:6)}}function De(t,n){t&1&&E(0,"span",24)}function Le(t,n){t&1&&(N(),m(0,"svg",25),E(1,"path",26),s())}function Te(t,n){if(t&1){let e=v();m(0,"button",23),h("click",function(l){_(e);let b=c();return f(b.onDelete(l))}),p(1,De,1,0,"span",24)(2,Le,2,0,":svg:svg",25),s()}if(t&2){let e=c();P("disabled",e.deleting()),o(),g(e.deleting()?1:2)}}function Ve(t,n){if(t&1&&E(0,"app-ledger-item-card",17),t&2){let e=n.$implicit;P("item",e)("editable",!1)}}function ze(t,n){if(t&1){let e=v();m(0,"div",27),h("click",function(){_(e);let l=c();return f(l.closeLightbox())}),m(1,"div",28),h("click",function(l){return _(e),f(l.stopPropagation())}),m(2,"button",29),h("click",function(){_(e);let l=c();return f(l.closeLightbox())}),i(3,"\xD7"),s(),E(4,"img",30),s()()}if(t&2){let e=c();o(4),P("src",e.imageUrl(),G)}}var j=class t{confirmDialog=R(X);group=C.required();showDelete=C(!0);showConfirm=C(!1);deleteClick=x();confirmClick=x();rejectClick=x();imageUrl=T(null);loading=T(!0);deleting=T(!1);confirming=T(!1);rejecting=T(!1);showLightbox=T(!1);storage=J(H());constructor(){U(()=>{let n=this.group().screenshot;this.resolveUrl(n.storagePath)})}async resolveUrl(n){this.loading.set(!0);try{let e=W(this.storage,n),r=await Z(e);this.imageUrl.set(r)}catch{this.imageUrl.set(null)}finally{this.loading.set(!1)}}formatCurrency(n){return"$"+(n/100).toFixed(2)}formatDate(n){return K(n,{month:"short",day:"numeric"})}formatTransactionId(n){if(!n)return"#----";let e=n.toUpperCase(),r=e.slice(0,4),l=e.slice(-2);return`#${r}-${l}`}openLightbox(){this.imageUrl()&&this.showLightbox.set(!0)}closeLightbox(){this.showLightbox.set(!1)}async onDelete(n){n.stopPropagation(),await this.confirmDialog.confirm({title:"Delete Receipt?",message:"Delete this receipt? Items will be moved back to draft.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"danger"})&&this.deleteClick.emit(this.group().screenshot.id)}onConfirm(n){n.stopPropagation(),this.confirmClick.emit(this.group().screenshot.id)}onReject(n){n.stopPropagation(),this.rejectClick.emit(this.group().screenshot.id)}setDeleting(n){this.deleting.set(n)}setConfirming(n){this.confirming.set(n)}setRejecting(n){this.rejecting.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-screenshot-group"]],inputs:{group:[1,"group"],showDelete:[1,"showDelete"],showConfirm:[1,"showConfirm"]},outputs:{deleteClick:"deleteClick",confirmClick:"confirmClick",rejectClick:"rejectClick"},decls:25,vars:10,consts:[[1,"screenshot-group"],[1,"screenshot-header"],[1,"screenshot-preview",3,"click"],[1,"screenshot-loading"],["alt","Payment receipt",1,"screenshot-thumb",3,"src"],[1,"screenshot-error"],[1,"screenshot-info"],[1,"screenshot-header-row"],[1,"payment-info"],[1,"payment-badge"],[1,"review-badge"],[1,"claimed-amount"],[1,"screenshot-meta-row"],[1,"meta-item"],[1,"admin-actions"],["type","button","title","Delete screenshot and move items back to draft",1,"delete-btn",3,"disabled"],[1,"items-container"],[3,"item","editable"],[1,"lightbox-overlay"],["type","button","title","Confirm payment for this receipt",1,"confirm-btn",3,"click","disabled"],[1,"confirm-spinner"],["type","button","title","Reject receipt and revert items to awaiting payment",1,"reject-btn",3,"click","disabled"],[1,"reject-spinner"],["type","button","title","Delete screenshot and move items back to draft",1,"delete-btn",3,"click","disabled"],[1,"delete-spinner"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"],[1,"lightbox-overlay",3,"click"],[1,"lightbox-content",3,"click"],["type","button",1,"lightbox-close",3,"click"],["alt","Payment receipt",1,"lightbox-img",3,"src"]],template:function(e,r){e&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),h("click",function(){return r.openLightbox()}),p(3,ye,2,0,"div",3)(4,Pe,1,1,"img",4)(5,Ee,2,0,"div",5),s(),m(6,"div",6)(7,"div",7)(8,"div",8)(9,"span",9),i(10),s(),m(11,"span",10),i(12,"In Review"),s()(),p(13,Me,2,1,"span",11),s(),m(14,"div",12)(15,"span",13),i(16),s(),m(17,"span",13),i(18),s()()(),p(19,Ie,7,4,"div",14),p(20,Te,3,2,"button",15),s(),m(21,"div",16),M(22,Ve,1,2,"app-ledger-item-card",17,he),s()(),p(24,ze,5,1,"div",18)),e&2&&(o(3),g(r.loading()?3:r.imageUrl()?4:5),o(6),O("cash",r.group().screenshot.paymentOption==="cash_deposit"),o(),u(" ",r.group().screenshot.paymentOption==="cash_deposit"?"Cash":"Zelle"," "),o(3),g(r.group().screenshot.claimedAmountCents!==void 0?13:-1),o(3),u("Submitted ",r.formatDate(r.group().screenshot.uploadedAt)),o(2),u("ID: ",r.formatTransactionId(r.group().screenshot.id)),o(),g(r.showConfirm()?19:-1),o(),g(r.showDelete()?20:-1),o(2),w(r.group().items),o(2),g(r.showLightbox()&&r.imageUrl()?24:-1))},dependencies:[L,z],styles:['@charset "UTF-8";.screenshot-group[_ngcontent-%COMP%]{background:var(--sys-surface, #fff);border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;overflow:hidden}.screenshot-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;background:var(--sys-surface-container, #f8f9fa);border-bottom:1px solid var(--sys-outline-variant, #eee)}.screenshot-preview[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:6px;overflow:hidden;cursor:pointer;flex-shrink:0;border:1px solid var(--sys-outline-variant, #ddd)}.screenshot-thumb[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.screenshot-loading[_ngcontent-%COMP%], .screenshot-error[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.625rem;color:var(--sys-on-surface-variant, #999);background:var(--sys-surface-variant, #f0f0f0)}.screenshot-info[_ngcontent-%COMP%]{flex:1;min-width:0}.screenshot-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.25rem}.payment-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem}.payment-badge[_ngcontent-%COMP%]{display:inline-block;padding:.125rem .5rem;background:#e3f2fd;color:#1565c0;border-radius:4px;font-size:.6875rem;font-weight:600;text-transform:uppercase}.payment-badge.cash[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.review-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.125rem .5rem;background:#fff8e1;color:#f57c00;border:1px solid #ffcc02;border-radius:4px;font-size:.625rem;font-weight:600;text-transform:uppercase}.review-badge[_ngcontent-%COMP%]:before{content:"\\23f1";font-size:.75rem}.claimed-amount[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sys-secondary, #2e7d32);font-weight:600}.screenshot-meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.7rem;color:var(--sys-on-surface-variant, #888)}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.admin-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.confirm-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:6px;border:1px solid #2e7d32;background:#2e7d32;color:#fff;cursor:pointer;font-size:.75rem;font-weight:600;transition:all .2s}.confirm-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1b5e20;border-color:#1b5e20}.confirm-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirm-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.reject-btn[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:6px;border:1px solid #c62828;background:#fff;color:#c62828;cursor:pointer;font-size:.75rem;font-weight:600;transition:all .2s}.reject-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#c62828;color:#fff}.reject-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.reject-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:2px solid rgba(198,40,40,.3);border-top-color:#c62828;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.delete-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:1px solid var(--sys-outline-variant, #ddd);background:#fff;color:var(--sys-on-surface-variant, #666);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--sys-error-container, #ffebee);border-color:var(--sys-error, #c62828);color:var(--sys-error, #c62828)}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.delete-spinner[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid var(--sys-outline, #ddd);border-top-color:var(--sys-primary, #c62828);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.lightbox-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:2000}.lightbox-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh}.lightbox-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:transparent;border:none;color:#fff;font-size:32px;cursor:pointer;line-height:1;padding:4px 8px}.lightbox-img[_ngcontent-%COMP%]{max-width:90vw;max-height:85vh;object-fit:contain;border-radius:4px}']})};var A=(t,n)=>n.sessionId+n.studentId,Ne=(t,n)=>n.screenshot.id;function je(t,n){if(t&1){let e=v();m(0,"button",13),h("click",function(){_(e);let l=c(2);return f(l.cancelItemsClick.emit())}),i(1," Cancel Items "),s()}}function Ae(t,n){if(t&1){let e=v();m(0,"app-ledger-item-card",14),h("deleteClick",function(){let l=_(e).$implicit,b=c(2);return f(b.deleteItem.emit(l))})("addonToggle",function(l){_(e);let b=c(2);return f(b.addonToggle.emit(l))}),s()}if(t&2){let e=n.$implicit,r=c(2);P("item",e)("editable",r.editable())}}function Ge(t,n){if(t&1&&(m(0,"section",0)(1,"div",4)(2,"h2",5)(3,"span",6),i(4,"\u25CF"),s(),i(5," Awaiting Payment "),m(6,"span",7),i(7),s()(),p(8,je,2,0,"button",8),s(),m(9,"p",9),i(10),s(),m(11,"div",10),M(12,Ae,1,2,"app-ledger-item-card",11,A),s(),m(14,"div",12)(15,"span"),i(16,"Section Total"),s(),m(17,"span"),i(18),s()()()),t&2){let e=c();o(7),y(e.lockedItems().length),o(),g(e.isAdmin()&&e.lockedItems().length>0?8:-1),o(2),y(e.isAdmin()?"Spots locked, awaiting payment screenshot":"Review your selections and submit payment to secure your spots"),o(2),w(e.lockedItems()),o(6),u("$",e.formatPrice(e.lockedItemsTotal()))}}function Fe(t,n){if(t&1){let e=v();m(0,"button",13),h("click",function(){_(e);let l=c(2);return f(l.cancelItemsClick.emit())}),i(1," Cancel Items "),s()}}function $e(t,n){if(t&1){let e=v();m(0,"app-ledger-screenshot-group",18),h("deleteClick",function(l){_(e);let b=c(3);return f(b.deleteScreenshot.emit(l))})("confirmClick",function(l){_(e);let b=c(3);return f(b.confirmScreenshot.emit(l))})("rejectClick",function(l){_(e);let b=c(3);return f(b.rejectScreenshot.emit(l))}),s()}if(t&2){let e=n.$implicit,r=c(3);P("group",e)("showDelete",!r.isAdmin())("showConfirm",r.isAdmin())}}function Re(t,n){if(t&1&&(m(0,"div",16),M(1,$e,1,3,"app-ledger-screenshot-group",17,Ne),s()),t&2){let e=c(2);o(),w(e.screenshotGroups())}}function Ue(t,n){if(t&1&&E(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;P("item",e)("editable",!1)}}function Be(t,n){if(t&1&&(m(0,"div",10),M(1,Ue,1,2,"app-ledger-item-card",11,A),s()),t&2){let e=c(2);o(),w(e.submittedItems())}}function qe(t,n){if(t&1&&(m(0,"section",1)(1,"div",4)(2,"h2",5)(3,"span",15),i(4,"\u25CF"),s(),i(5," Pending Verification "),m(6,"span",7),i(7),s()(),p(8,Fe,2,0,"button",8),s(),m(9,"p",9),i(10,"Receipts submitted, awaiting admin confirmation"),s(),p(11,Re,3,0,"div",16)(12,Be,3,0,"div",10),m(13,"div",12)(14,"span"),i(15,"Section Total"),s(),m(16,"span"),i(17),s()()()),t&2){let e=c();o(7),y(e.submittedItems().length),o(),g(e.isAdmin()&&e.submittedItems().length>0?8:-1),o(3),g(e.screenshotGroups().length>0?11:12),o(6),u("$",e.formatPrice(e.submittedItemsTotal()))}}function He(t,n){if(t&1){let e=v();m(0,"button",13),h("click",function(){_(e);let l=c(2);return f(l.cancelItemsClick.emit())}),i(1," Cancel Items "),s()}}function Ze(t,n){if(t&1){let e=v();m(0,"a",26),h("click",function(){_(e);let l=c(2);return f(l.showCashInstructions.emit())}),m(1,"span",27),i(2,"payments"),s(),i(3," View Cash Payment Instructions "),s()}}function We(t,n){if(t&1&&E(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;P("item",e)("editable",!1)}}function Je(t,n){if(t&1&&(m(0,"section",2)(1,"div",4)(2,"h2",5)(3,"span",19),i(4,"\u25CF"),s(),i(5," Registration Fee Received "),m(6,"span",7),i(7),s()(),p(8,He,2,0,"button",8),s(),m(9,"p",9),i(10," Spot secured \u2013 awaiting cash balance "),p(11,Ze,4,0,"a",20),s(),m(12,"div",21),M(13,We,1,2,"app-ledger-item-card",11,A),s(),m(15,"div",22)(16,"div",23)(17,"span"),i(18,"Section Total"),s(),m(19,"span"),i(20),s()(),m(21,"div",24)(22,"span"),i(23,"Registration Fee Paid"),s(),m(24,"span",25),i(25),s()()()()),t&2){let e=c();o(7),y(e.securedItems().length),o(),g(e.isAdmin()&&e.securedItems().length>0?8:-1),o(3),g(e.isAdmin()?-1:11),o(2),w(e.securedItems()),o(7),u("$",e.formatPrice(e.securedItemsTotal())),o(5),u("$",e.formatPrice(e.securedDepositPaid()))}}function Ke(t,n){if(t&1){let e=v();m(0,"button",13),h("click",function(){_(e);let l=c(2);return f(l.cancelItemsClick.emit())}),i(1," Cancel Items "),s()}}function Qe(t,n){if(t&1&&E(0,"app-ledger-item-card",11),t&2){let e=n.$implicit;P("item",e)("editable",!1)}}function Xe(t,n){if(t&1&&(m(0,"section",3)(1,"div",4)(2,"h2",5)(3,"span",28),i(4,"\u25CF"),s(),i(5," Payment Confirmed "),m(6,"span",7),i(7),s()(),p(8,Ke,2,0,"button",8),s(),m(9,"p",9),i(10,"Full payment received - registration complete"),s(),m(11,"div",21),M(12,Qe,1,2,"app-ledger-item-card",11,A),s(),m(14,"div",12)(15,"span"),i(16,"Section Total"),s(),m(17,"span"),i(18),s()()()),t&2){let e=c();o(7),y(e.paidItems().length),o(),g(e.isAdmin()&&e.paidItems().length>0?8:-1),o(4),w(e.paidItems()),o(6),u("$",e.formatPrice(e.paidItemsTotal()))}}var te=class t{lockedItems=C.required();submittedItems=C.required();securedItems=C.required();paidItems=C.required();editable=C(!1);isAdmin=C(!1);screenshotGroups=C([]);deleteItem=x();addonToggle=x();deleteScreenshot=x();confirmScreenshot=x();rejectScreenshot=x();cancelItemsClick=x();showCashInstructions=x();lockedItemsTotal=k(()=>this.lockedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));submittedItemsTotal=k(()=>this.submittedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));securedItemsTotal=k(()=>this.securedItems().reduce((n,e)=>n+e.pricing.itemTotal,0));securedDepositPaid=k(()=>this.securedItems().length*5e3);paidItemsTotal=k(()=>this.paidItems().reduce((n,e)=>n+e.pricing.itemTotal,0));hasSubmittedItems=k(()=>this.submittedItems().length>0||this.screenshotGroups().length>0);formatPrice(n){return(n/100).toLocaleString("en-US",{minimumFractionDigits:0})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=I({type:t,selectors:[["app-ledger-order-items"]],inputs:{lockedItems:[1,"lockedItems"],submittedItems:[1,"submittedItems"],securedItems:[1,"securedItems"],paidItems:[1,"paidItems"],editable:[1,"editable"],isAdmin:[1,"isAdmin"],screenshotGroups:[1,"screenshotGroups"]},outputs:{deleteItem:"deleteItem",addonToggle:"addonToggle",deleteScreenshot:"deleteScreenshot",confirmScreenshot:"confirmScreenshot",rejectScreenshot:"rejectScreenshot",cancelItemsClick:"cancelItemsClick",showCashInstructions:"showCashInstructions"},decls:4,vars:4,consts:[[1,"ledger-section","draft"],[1,"ledger-section","pending"],[1,"ledger-section","deposit-paid"],[1,"ledger-section","secured"],[1,"section-header"],[1,"section-title"],[1,"section-icon","draft"],[1,"section-count"],["type","button",1,"btn-admin","btn-danger-outline"],[1,"section-description"],[1,"items-list"],[3,"item","editable"],[1,"section-footer"],["type","button",1,"btn-admin","btn-danger-outline",3,"click"],[3,"deleteClick","addonToggle","item","editable"],[1,"section-icon","pending"],[1,"screenshot-groups"],[3,"group","showDelete","showConfirm"],[3,"deleteClick","confirmClick","rejectClick","group","showDelete","showConfirm"],[1,"section-icon","deposit-paid"],[1,"cash-instruction-link"],[1,"compact-items-container"],[1,"section-footer","multi-row"],[1,"footer-row"],[1,"footer-row","paid"],[1,"paid-amount"],[1,"cash-instruction-link",3,"click"],["aria-hidden","true",1,"material-symbols-rounded","icon-inline"],[1,"section-icon","secured"]],template:function(e,r){e&1&&(p(0,Ge,19,4,"section",0),p(1,qe,18,4,"section",1),p(2,Je,26,5,"section",2),p(3,Xe,19,3,"section",3)),e&2&&(g(r.lockedItems().length>0?0:-1),o(),g(r.hasSubmittedItems()?1:-1),o(),g(r.securedItems().length>0?2:-1),o(),g(r.paidItems().length>0?3:-1))},dependencies:[L,z,j],styles:[".ledger-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:12px;padding:1.25rem;margin-bottom:1rem}.ledger-section.draft[_ngcontent-%COMP%]{border-left:4px solid var(--sys-tertiary, #e65100)}.ledger-section.pending[_ngcontent-%COMP%]{border-left:4px solid var(--sys-secondary, #1976d2)}.ledger-section.deposit-paid[_ngcontent-%COMP%]{border-left:4px solid #7b1fa2;background:linear-gradient(135deg,#faf5ff,#fff8e1)}.ledger-section.secured[_ngcontent-%COMP%]{border-left:4px solid var(--sys-tertiary, #2e7d32)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.25rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1rem;font-weight:600;color:var(--sys-on-surface, #212121)}.section-icon[_ngcontent-%COMP%]{font-size:.75rem}.section-icon.draft[_ngcontent-%COMP%]{color:var(--sys-tertiary, #e65100)}.section-icon.pending[_ngcontent-%COMP%]{color:var(--sys-secondary, #1976d2)}.section-icon.deposit-paid[_ngcontent-%COMP%]{color:#7b1fa2}.section-icon.secured[_ngcontent-%COMP%]{color:var(--sys-tertiary, #2e7d32)}.section-count[_ngcontent-%COMP%]{margin-left:auto;padding:.125rem .5rem;background:var(--sys-surface-variant, #f0f0f0);border-radius:10px;font-size:.75rem;font-weight:500;color:var(--sys-on-surface-variant, #666)}.section-description[_ngcontent-%COMP%]{margin:.25rem 0 1rem 1.25rem;font-size:.8rem;color:var(--sys-on-surface-variant, #888)}.items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.compact-items-container[_ngcontent-%COMP%]{background:var(--sys-surface, #fff);border:1px solid var(--sys-outline-variant, #e0e0e0);border-radius:8px;overflow:hidden}.screenshot-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.section-footer[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem 1rem;background:var(--sys-surface-container, #f5f5f5);border-radius:8px;font-size:.875rem;display:flex;justify-content:space-between;align-items:center}.section-footer.multi-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.footer-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem 0;color:var(--sys-on-surface-variant, #666)}.footer-row.paid[_ngcontent-%COMP%]{color:var(--sys-secondary, #2e7d32);font-weight:500}.footer-row.paid[_ngcontent-%COMP%]   .paid-amount[_ngcontent-%COMP%]{font-weight:600}.footer-row.remaining[_ngcontent-%COMP%]{padding-top:.5rem;border-top:1px dashed var(--sys-outline-variant, #ddd);margin-top:.25rem;color:var(--sys-tertiary, #e65100);font-weight:500}.cash-instruction-link[_ngcontent-%COMP%]{display:inline-block;margin-left:.5rem;color:var(--sys-primary, #c62828);cursor:pointer;text-decoration:underline;font-style:normal}.cash-instruction-link[_ngcontent-%COMP%]:hover{color:var(--sys-primary-dark, #a51c1c)}.btn-admin[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s}.btn-danger-outline[_ngcontent-%COMP%]{background:#fff;color:#dc3545;border:1px solid #dc3545}.btn-danger-outline[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}"]})};export{ee as a,te as b};
